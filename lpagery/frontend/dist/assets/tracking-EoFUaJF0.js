import{r as J}from"./react-query-BRHYXYzf.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"2.4.12"};var e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="afa2e166-1d31-44d0-90dc-05dd7f127055",t._sentryDebugIdIdentifier="sentry-dbid-afa2e166-1d31-44d0-90dc-05dd7f127055")}catch{}})();var _=typeof window<"u"?window:void 0,Se=typeof globalThis<"u"?globalThis:_;typeof self>"u"&&(Se.self=Se),typeof File>"u"&&(Se.File=function(){});var su=Array.prototype,Ko=su.forEach,Zo=su.indexOf,Ae=Se?.navigator,E=Se?.document,Re=Se?.location,mi=Se?.fetch,vi=Se!=null&&Se.XMLHttpRequest&&"withCredentials"in new Se.XMLHttpRequest?Se.XMLHttpRequest:void 0,Qo=Se?.AbortController,xe=Ae?.userAgent,x=_??{},Ze={DEBUG:!1,LIB_VERSION:"1.335.3"};function ea(t,e,n,r,s,i,o){try{var a=t[i](o),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,s)}function rn(t){return function(){var e=this,n=arguments;return new Promise((function(r,s){var i=t.apply(e,n);function o(c){ea(i,r,s,o,a,"next",c)}function a(c){ea(i,r,s,o,a,"throw",c)}o(void 0)}))}}function w(){return w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w.apply(null,arguments)}function iu(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Jd=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],ta=function(t,e){if(e===void 0&&(e=[]),!t)return!1;var n=t.toLowerCase();return Jd.concat(e).some((r=>{var s=r.toLowerCase();return n.indexOf(s)!==-1}))},Xd=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function M(t,e){return t.indexOf(e)!==-1}var Ts=function(t){return t.trim()},yi=function(t){return t.replace(/^\$/,"")},Kd=Array.isArray,ou=Object.prototype,au=ou.hasOwnProperty,Is=ou.toString,W=Kd||function(t){return Is.call(t)==="[object Array]"},bt=t=>typeof t=="function",me=t=>t===Object(t)&&!W(t),sn=t=>{if(me(t)){for(var e in t)if(au.call(t,e))return!1;return!0}return!1},b=t=>t===void 0,ve=t=>Is.call(t)=="[object String]",bi=t=>ve(t)&&t.trim().length===0,Ge=t=>t===null,B=t=>b(t)||Ge(t),at=t=>Is.call(t)=="[object Number]"&&t==t,tn=t=>at(t)&&t>0,st=t=>Is.call(t)==="[object Boolean]",Zd=t=>t instanceof FormData,Qd=t=>M(Xd,t);function Ei(t){return t===null||typeof t!="object"}function Zr(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function cu(t){return!b(Event)&&(function(e,n){try{return e instanceof n}catch{return!1}})(t,Event)}var ep=[!0,"true",1,"1","yes"],Hs=t=>M(ep,t),tp=[!1,"false",0,"0","no"];function ze(t,e,n,r,s){return e>n&&(r.warn("min cannot be greater than max."),e=n),at(t)?t>n?(r.warn(" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(r.warn(" cannot be less than min: "+e+". Using min value instead."),e):t:(r.warn(" must be a number. using max or fallback. max: "+n+", fallback: "+s),ze(s||n,e,n,r))}class np{constructor(e){this.t={},this.i=e.i,this.o=ze(e.bucketSize,0,100,e.h),this.m=ze(e.refillRate,0,this.o,e.h),this.$=ze(e.refillInterval,0,864e5,e.h)}S(e,n){var r=n-e.lastAccess,s=Math.floor(r/this.$);if(s>0){var i=s*this.m;e.tokens=Math.min(e.tokens+i,this.o),e.lastAccess=e.lastAccess+s*this.$}}consumeRateLimit(e){var n,r=Date.now(),s=String(e),i=this.t[s];return i?this.S(i,r):(i={tokens:this.o,lastAccess:r},this.t[s]=i),i.tokens===0||(i.tokens--,i.tokens===0&&((n=this.i)==null||n.call(this,e)),i.tokens===0)}stop(){this.t={}}}var Le="Mobile",Qr="iOS",rt="Android",tr="Tablet",uu=rt+" "+tr,lu="iPad",du="Apple",pu=du+" Watch",nr="Safari",dn="BlackBerry",fu="Samsung",hu=fu+"Browser",gu=fu+" Internet",Wt="Chrome",rp=Wt+" OS",_u=Wt+" "+Qr,lo="Internet Explorer",mu=lo+" "+Le,po="Opera",sp=po+" Mini",fo="Edge",vu="Microsoft "+fo,cn="Firefox",yu=cn+" "+Qr,rr="Nintendo",sr="PlayStation",un="Xbox",bu=rt+" "+Le,Eu=Le+" "+nr,qn="Windows",Si=qn+" Phone",na="Nokia",wi="Ouya",Su="Generic",ip=Su+" "+Le.toLowerCase(),wu=Su+" "+tr.toLowerCase(),Ti="Konqueror",Te="(\\d+(\\.\\d+)?)",Us=new RegExp("Version/"+Te),op=new RegExp(un,"i"),ap=new RegExp(sr+" \\w+","i"),cp=new RegExp(rr+" \\w+","i"),ho=new RegExp(dn+"|PlayBook|BB10","i"),up={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},Pr,ra,Bs,lp=(t,e)=>e&&M(e,du)||(function(n){return M(n,nr)&&!M(n,Wt)&&!M(n,rt)})(t),Tu=function(t,e){return e=e||"",M(t," OPR/")&&M(t,"Mini")?sp:M(t," OPR/")?po:ho.test(t)?dn:M(t,"IE"+Le)||M(t,"WPDesktop")?mu:M(t,hu)?gu:M(t,fo)||M(t,"Edg/")?vu:M(t,"FBIOS")?"Facebook "+Le:M(t,"UCWEB")||M(t,"UCBrowser")?"UC Browser":M(t,"CriOS")?_u:M(t,"CrMo")||M(t,Wt)?Wt:M(t,rt)&&M(t,nr)?bu:M(t,"FxiOS")?yu:M(t.toLowerCase(),Ti.toLowerCase())?Ti:lp(t,e)?M(t,Le)?Eu:nr:M(t,cn)?cn:M(t,"MSIE")||M(t,"Trident/")?lo:M(t,"Gecko")?cn:""},dp={[mu]:[new RegExp("rv:"+Te)],[vu]:[new RegExp(fo+"?\\/"+Te)],[Wt]:[new RegExp("("+Wt+"|CrMo)\\/"+Te)],[_u]:[new RegExp("CriOS\\/"+Te)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+Te)],[nr]:[Us],[Eu]:[Us],[po]:[new RegExp("(Opera|OPR)\\/"+Te)],[cn]:[new RegExp(cn+"\\/"+Te)],[yu]:[new RegExp("FxiOS\\/"+Te)],[Ti]:[new RegExp("Konqueror[:/]?"+Te,"i")],[dn]:[new RegExp(dn+" "+Te),Us],[bu]:[new RegExp("android\\s"+Te,"i")],[gu]:[new RegExp(hu+"\\/"+Te)],[lo]:[new RegExp("(rv:|MSIE )"+Te)],Mozilla:[new RegExp("rv:"+Te)]},pp=function(t,e){var n=Tu(t,e),r=dp[n];if(b(r))return null;for(var s=0;s<r.length;s++){var i=r[s],o=t.match(i);if(o)return parseFloat(o[o.length-2])}return null},sa=[[new RegExp(un+"; "+un+" (.*?)[);]","i"),t=>[un,t&&t[1]||""]],[new RegExp(rr,"i"),[rr,""]],[new RegExp(sr,"i"),[sr,""]],[ho,[dn,""]],[new RegExp(qn,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[Si,""];if(new RegExp(Le).test(e)&&!/IEMobile\b/.test(e))return[qn+" "+Le,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var r=n[1],s=up[r]||"";return/arm/i.test(e)&&(s="RT"),[qn,s]}return[qn,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[Qr,e.join(".")]}return[Qr,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=b(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+rt+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+rt+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[rt,e.join(".")]}return[rt,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[rp,""]],[/Linux|debian/i,["Linux",""]]],ia=function(t){return cp.test(t)?rr:ap.test(t)?sr:op.test(t)?un:new RegExp(wi,"i").test(t)?wi:new RegExp("("+Si+"|WPDesktop)","i").test(t)?Si:/iPad/.test(t)?lu:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?pu:ho.test(t)?dn:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(na,"i").test(t)?na:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?new RegExp(Le).test(t)&&!/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)||/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?rt:uu:new RegExp("(pda|"+Le+")","i").test(t)?ip:new RegExp(tr,"i").test(t)&&!new RegExp(tr+" pc","i").test(t)?wu:""},fp=t=>t instanceof Error;function hp(t){var e=globalThis._posthogChunkIds;if(e){var n=Object.keys(e);return Bs&&n.length===ra||(ra=n.length,Bs=n.reduce(((r,s)=>{Pr||(Pr={});var i=Pr[s];if(i)r[i[0]]=i[1];else for(var o=t(s),a=o.length-1;a>=0;a--){var c=o[a],u=c?.filename,l=e[s];if(u&&l){r[u]=l,Pr[s]=[u,l];break}}return r}),{})),Bs}}class gp{constructor(e,n,r){r===void 0&&(r=[]),this.coercers=e,this.stackParser=n,this.modifiers=r}buildFromUnknown(e,n){n===void 0&&(n={});var r=n&&n.mechanism||{handled:!0,type:"generic"},s=this.buildCoercingContext(r,n,0).apply(e),i=this.buildParsingContext(),o=this.parseStacktrace(s,i);return{$exception_list:this.convertToExceptionList(o,r),$exception_level:"error"}}modifyFrames(e){var n=this;return rn((function*(){for(var r of e)r.stacktrace&&r.stacktrace.frames&&W(r.stacktrace.frames)&&(r.stacktrace.frames=yield n.applyModifiers(r.stacktrace.frames));return e}))()}coerceFallback(e){var n;return{type:"Error",value:"Unknown error",stack:(n=e.syntheticException)==null?void 0:n.stack,synthetic:!0}}parseStacktrace(e,n){var r,s;return e.cause!=null&&(r=this.parseStacktrace(e.cause,n)),e.stack!=""&&e.stack!=null&&(s=this.applyChunkIds(this.stackParser(e.stack,e.synthetic?1:0),n.chunkIdMap)),w({},e,{cause:r,stack:s})}applyChunkIds(e,n){return e.map((r=>(r.filename&&n&&(r.chunk_id=n[r.filename]),r)))}applyCoercers(e,n){for(var r of this.coercers)if(r.match(e))return r.coerce(e,n);return this.coerceFallback(n)}applyModifiers(e){var n=this;return rn((function*(){var r=e;for(var s of n.modifiers)r=yield s(r);return r}))()}convertToExceptionList(e,n){var r,s,i,o={type:e.type,value:e.value,mechanism:{type:(r=n.type)!==null&&r!==void 0?r:"generic",handled:(s=n.handled)===null||s===void 0||s,synthetic:(i=e.synthetic)!==null&&i!==void 0&&i}};e.stack&&(o.stacktrace={type:"raw",frames:e.stack});var a=[o];return e.cause!=null&&a.push(...this.convertToExceptionList(e.cause,w({},n,{handled:!0}))),a}buildParsingContext(){return{chunkIdMap:hp(this.stackParser)}}buildCoercingContext(e,n,r){r===void 0&&(r=0);var s=(i,o)=>{if(o<=4){var a=this.buildCoercingContext(e,n,o);return this.applyCoercers(i,a)}};return w({},n,{syntheticException:r==0?n.syntheticException:void 0,mechanism:e,apply:i=>s(i,r),next:i=>s(i,r+1)})}}var pn="?";function Ii(t,e,n,r,s){var i={platform:t,filename:e,function:n==="<anonymous>"?pn:n,in_app:!0};return b(r)||(i.lineno=r),b(s)||(i.colno=s),i}var Iu=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:pn,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},_p=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,mp=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,vp=/\((\S*)(?::(\d+))(?::(\d+))\)/,yp=(t,e)=>{var n=_p.exec(t);if(n){var[,r,s,i]=n;return Ii(e,r,pn,+s,+i)}var o=mp.exec(t);if(o){if(o[2]&&o[2].indexOf("eval")===0){var a=vp.exec(o[2]);a&&(o[2]=a[1],o[3]=a[2],o[4]=a[3])}var[c,u]=Iu(o[1]||pn,o[2]);return Ii(e,u,c,o[3]?+o[3]:void 0,o[4]?+o[4]:void 0)}},bp=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Ep=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Sp=(t,e)=>{var n=bp.exec(t);if(n){if(n[3]&&n[3].indexOf(" > eval")>-1){var r=Ep.exec(n[3]);r&&(n[1]=n[1]||"eval",n[3]=r[1],n[4]=r[2],n[5]="")}var s=n[3],i=n[1]||pn;return[i,s]=Iu(i,s),Ii(e,s,i,n[4]?+n[4]:void 0,n[5]?+n[5]:void 0)}},oa=/\(error: (.*)\)/,aa=50;function wp(){return(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(s,i){i===void 0&&(i=0);for(var o=[],a=s.split(`
`),c=i;c<a.length;c++){var u=a[c];if(!(u.length>1024)){var l=oa.test(u)?u.replace(oa,"$1"):u;if(!l.match(/\S*Error: /)){for(var d of n){var f=d(l,t);if(f){o.push(f);break}}if(o.length>=aa)break}}}return(function(p){if(!p.length)return[];var h=Array.from(p);return h.reverse(),h.slice(0,aa).map((g=>{return w({},g,{filename:g.filename||(m=h,m[m.length-1]||{}).filename,function:g.function||pn});var m}))})(o)}})("web:javascript",yp,Sp)}class Tp{match(e){return this.isDOMException(e)||this.isDOMError(e)}coerce(e,n){var r=ve(e.stack);return{type:this.getType(e),value:this.getValue(e),stack:r?e.stack:void 0,cause:e.cause?n.next(e.cause):void 0,synthetic:!1}}getType(e){return this.isDOMError(e)?"DOMError":"DOMException"}getValue(e){var n=e.name||(this.isDOMError(e)?"DOMError":"DOMException");return e.message?n+": "+e.message:n}isDOMException(e){return Zr(e,"DOMException")}isDOMError(e){return Zr(e,"DOMError")}}class Ip{match(e){return(n=>n instanceof Error)(e)}coerce(e,n){return{type:this.getType(e),value:this.getMessage(e,n),stack:this.getStack(e),cause:e.cause?n.next(e.cause):void 0,synthetic:!1}}getType(e){return e.name||e.constructor.name}getMessage(e,n){var r=e.message;return r.error&&typeof r.error.message=="string"?String(r.error.message):String(r)}getStack(e){return e.stacktrace||e.stack||void 0}}class kp{constructor(){}match(e){return Zr(e,"ErrorEvent")&&e.error!=null}coerce(e,n){var r,s=n.apply(e.error);return s||{type:"ErrorEvent",value:e.message,stack:(r=n.syntheticException)==null?void 0:r.stack,synthetic:!0}}}var xp=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;class Rp{match(e){return typeof e=="string"}coerce(e,n){var r,[s,i]=this.getInfos(e);return{type:s??"Error",value:i??e,stack:(r=n.syntheticException)==null?void 0:r.stack,synthetic:!0}}getInfos(e){var n="Error",r=e,s=e.match(xp);return s&&(n=s[1],r=s[2]),[n,r]}}var Pp=["fatal","error","warning","log","info","debug"];function ku(t,e){e===void 0&&(e=40);var n=Object.keys(t);if(n.sort(),!n.length)return"[object has no keys]";for(var r=n.length;r>0;r--){var s=n.slice(0,r).join(", ");if(!(s.length>e))return r===n.length||s.length<=e?s:s.slice(0,e)+"..."}return""}class Cp{match(e){return typeof e=="object"&&e!==null}coerce(e,n){var r,s=this.getErrorPropertyFromObject(e);return s?n.apply(s):{type:this.getType(e),value:this.getValue(e),stack:(r=n.syntheticException)==null?void 0:r.stack,level:this.isSeverityLevel(e.level)?e.level:"error",synthetic:!0}}getType(e){return cu(e)?e.constructor.name:"Error"}getValue(e){if("name"in e&&typeof e.name=="string"){var n="'"+e.name+"' captured as exception";return"message"in e&&typeof e.message=="string"&&(n+=" with message: '"+e.message+"'"),n}if("message"in e&&typeof e.message=="string")return e.message;var r=this.getObjectClassName(e);return(r&&r!=="Object"?"'"+r+"'":"Object")+" captured as exception with keys: "+ku(e)}isSeverityLevel(e){return ve(e)&&!bi(e)&&Pp.indexOf(e)>=0}getErrorPropertyFromObject(e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];if(fp(r))return r}}getObjectClassName(e){try{var n=Object.getPrototypeOf(e);return n?n.constructor.name:void 0}catch{return}}}class Ap{match(e){return cu(e)}coerce(e,n){var r,s=e.constructor.name;return{type:s,value:s+" captured as exception with keys: "+ku(e),stack:(r=n.syntheticException)==null?void 0:r.stack,synthetic:!0}}}class $p{match(e){return Ei(e)}coerce(e,n){var r;return{type:"Error",value:"Primitive value captured as exception: "+String(e),stack:(r=n.syntheticException)==null?void 0:r.stack,synthetic:!0}}}class Op{match(e){return Zr(e,"PromiseRejectionEvent")}coerce(e,n){var r,s=this.getUnhandledRejectionReason(e);return Ei(s)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(s),stack:(r=n.syntheticException)==null?void 0:r.stack,synthetic:!0}:n.apply(s)}getUnhandledRejectionReason(e){if(Ei(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}}var xu=function(t,e){var{debugEnabled:n}=e===void 0?{}:e,r={k:function(s){if(_&&(Ze.DEBUG||x.POSTHOG_DEBUG||n)&&!b(_.console)&&_.console){for(var i=("__rrweb_original__"in _.console[s])?_.console[s].__rrweb_original__:_.console[s],o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];i(t,...a)}},info:function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];r.k("log",...i)},warn:function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];r.k("warn",...i)},error:function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];r.k("error",...i)},critical:function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];console.error(t,...i)},uninitializedWarning:s=>{r.error("You must initialize PostHog before calling "+s)},createLogger:(s,i)=>xu(t+" "+s,i)};return r},S=xu("[PostHog.js]"),oe=S.createLogger,Np=oe("[ExternalScriptsLoader]"),ca=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return Np.warn(e+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var r=E?.querySelectorAll("script");if(r){for(var s,i=function(){if(r[o].src===e){var c=r[o];return c.__posthog_loading_callback_fired?{v:n()}:(c.addEventListener("load",(u=>{c.__posthog_loading_callback_fired=!0,n(void 0,u)})),c.onerror=u=>n(u),{v:void 0})}},o=0;o<r.length;o++)if(s=i())return s.v}var a=()=>{if(!E)return n("document not found");var c=E.createElement("script");if(c.type="text/javascript",c.crossOrigin="anonymous",c.src=e,c.onload=d=>{c.__posthog_loading_callback_fired=!0,n(void 0,d)},c.onerror=d=>n(d),t.config.prepare_external_dependency_script&&(c=t.config.prepare_external_dependency_script(c)),!c)return n("prepare_external_dependency_script returned null");if(t.config.external_scripts_inject_target==="head")E.head.appendChild(c);else{var u,l=E.querySelectorAll("body > script");l.length>0?(u=l[0].parentNode)==null||u.insertBefore(c,l[0]):E.body.appendChild(c)}};E!=null&&E.body?a():E?.addEventListener("DOMContentLoaded",a)};x.__PosthogExtensions__=x.__PosthogExtensions__||{},x.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var r="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(r="/array/"+t.config.token+"/config.js"),e==="toolbar"){var s=3e5;r=r+"&t="+Math.floor(Date.now()/s)*s}var i=t.requestRouter.endpointFor("assets",r);ca(t,i,n)},x.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var r=t.requestRouter.endpointFor("api",e);ca(t,r,n)};var es={};function Et(t,e,n){if(W(t)){if(Ko&&t.forEach===Ko)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var r=0,s=t.length;r<s;r++)if(r in t&&e.call(n,t[r],r)===es)return}}}function K(t,e,n){if(!B(t)){if(W(t))return Et(t,e,n);if(Zd(t)){for(var r of t.entries())if(e.call(n,r[1],r[0])===es)return}else for(var s in t)if(au.call(t,s)&&e.call(n,t[s],s)===es)return}}var le=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Et(n,(function(s){for(var i in s)s[i]!==void 0&&(t[i]=s[i])})),t},En=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Et(n,(function(s){Et(s,(function(i){t.push(i)}))})),t};function Ur(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r}var ua=function(t){try{return t()}catch{return}},Fp=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(this,n)}catch(s){S.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),S.critical(s)}}},go=function(t){var e={};return K(t,(function(n,r){(ve(n)&&n.length>0||at(n))&&(e[r]=n)})),e};function Mp(t,e){return n=t,r=i=>ve(i)&&!Ge(e)?i.slice(0,e):i,s=new Set,(function i(o,a){return o!==Object(o)?r?r(o,a):o:s.has(o)?void 0:(s.add(o),W(o)?(c=[],Et(o,(u=>{c.push(i(u))}))):(c={},K(o,((u,l)=>{s.has(u)||(c[l]=i(u,l))}))),c);var c})(n);var n,r,s}var Lp=["herokuapp.com","vercel.app","netlify.app"];function Dp(t){var e=t?.hostname;if(!ve(e))return!1;var n=e.split(".").slice(-2).join(".");for(var r of Lp)if(n===r)return!1;return!0}function Ru(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function he(t,e,n,r){var{capture:s=!1,passive:i=!0}=r??{};t?.addEventListener(e,n,{capture:s,passive:i})}var Pu="$people_distinct_id",Wn="__alias",Gn="__timers",la="$autocapture_disabled_server_side",ki="$heatmaps_enabled_server_side",da="$exception_capture_enabled_server_side",xi="$error_tracking_suppression_rules",pa="$error_tracking_capture_extension_exceptions",fa="$web_vitals_enabled_server_side",Cu="$dead_clicks_enabled_server_side",ha="$product_tours_enabled_server_side",ga="$web_vitals_allowed_metrics",js="$session_recording_remote_config",ts="$sesid",Au="$session_is_sampled",on="$enabled_feature_flags",Vn="$early_access_features",Ri="$feature_flag_details",zn="$stored_person_properties",Dt="$stored_group_properties",Pi="$surveys",ns="$flag_call_reported",Qe="$user_state",Ci="$client_session_props",Ai="$capture_rate_limit",$i="$initial_campaign_params",Oi="$initial_referrer_info",rs="$initial_person_info",ss="$epp",$u="__POSTHOG_TOOLBAR__",On="$posthog_cookieless",Hp=[Pu,Wn,"__cmpns",Gn,"$session_recording_enabled_server_side",ki,ts,on,xi,Qe,Vn,Ri,Dt,zn,Pi,ns,Ci,Ai,$i,Oi,ss,rs,"$conversations_widget_session_id","$conversations_ticket_id","$conversations_widget_state","$conversations_user_traits"];function _a(t){return t instanceof Element&&(t.id===$u||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function ks(t){return!!t&&t.nodeType===1}function St(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function Ou(t){return!!t&&t.nodeType===3}function Nu(t){return!!t&&t.nodeType===11}function _o(t){return t?Ts(t).split(/\s+/):[]}function ma(t){var e=_?.location.href;return!!(e&&t&&t.some((n=>e.match(n))))}function is(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return _o(e)}function Fu(t){return B(t)?null:Ts(t).split(/(\s+)/).filter((e=>ir(e))).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function pr(t){var e="";return Ni(t)&&!Uu(t)&&t.childNodes&&t.childNodes.length&&K(t.childNodes,(function(n){var r;Ou(n)&&n.textContent&&(e+=(r=Fu(n.textContent))!==null&&r!==void 0?r:"")})),Ts(e)}function Mu(t){return b(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var mo=["a","button","form","input","select","textarea","label"];function Lu(t,e){if(b(e))return!0;var n,r=function(i){if(e.some((o=>i.matches(o))))return{v:!0}};for(var s of t)if(n=r(s))return n.v;return!1}function Du(t){var e=t.parentNode;return!(!e||!ks(e))&&e}var Up=["next","previous","prev",">","<"],va=10,ya=[".ph-no-rageclick",".ph-no-capture"];function Bp(t,e){if(!_||vo(t))return!1;var n,r,s;if(st(e)?(n=!!e&&ya,r=void 0):(n=(s=e?.css_selector_ignorelist)!==null&&s!==void 0?s:ya,r=e?.content_ignorelist),n===!1)return!1;var{targetElementList:i}=Hu(t,!1);return!(function(o,a){if(o===!1||b(o))return!1;var c;if(o===!0)c=Up;else{if(!W(o))return!1;if(o.length>va)return S.error("[PostHog] content_ignorelist array cannot exceed "+va+" items. Use css_selector_ignorelist for more complex matching."),!1;c=o.map((u=>u.toLowerCase()))}return a.some((u=>{var{safeText:l,ariaLabel:d}=u;return c.some((f=>l.includes(f)||d.includes(f)))}))})(r,i.map((o=>{var a;return{safeText:pr(o).toLowerCase(),ariaLabel:((a=o.getAttribute("aria-label"))==null?void 0:a.toLowerCase().trim())||""}})))&&!Lu(i,n)}var vo=t=>!t||St(t,"html")||!ks(t),Hu=(t,e)=>{if(!_||vo(t))return{parentIsUsefulElement:!1,targetElementList:[]};for(var n=!1,r=[t],s=t;s.parentNode&&!St(s,"body");)if(Nu(s.parentNode))r.push(s.parentNode.host),s=s.parentNode.host;else{var i=Du(s);if(!i)break;if(e||mo.indexOf(i.tagName.toLowerCase())>-1)n=!0;else{var o=_.getComputedStyle(i);o&&o.getPropertyValue("cursor")==="pointer"&&(n=!0)}r.push(i),s=i}return{parentIsUsefulElement:n,targetElementList:r}};function jp(t,e,n,r,s){var i,o,a,c;if(n===void 0&&(n=void 0),!_||vo(t)||(i=n)!=null&&i.url_allowlist&&!ma(n.url_allowlist)||(o=n)!=null&&o.url_ignorelist&&ma(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var u=n.dom_event_allowlist;if(u&&!u.some((h=>e.type===h)))return!1}var{parentIsUsefulElement:l,targetElementList:d}=Hu(t,r);if(!(function(h,g){var m=g?.element_allowlist;if(b(m))return!0;var v,T=function(O){if(m.some((I=>O.tagName.toLowerCase()===I)))return{v:!0}};for(var F of h)if(v=T(F))return v.v;return!1})(d,n)||!Lu(d,(c=n)==null?void 0:c.css_selector_allowlist))return!1;var f=_.getComputedStyle(t);if(f&&f.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var p=t.tagName.toLowerCase();switch(p){case"html":return!1;case"form":return(s||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(s||["change","click"]).indexOf(e.type)>=0;default:return l?(s||["click"]).indexOf(e.type)>=0:(s||["click"]).indexOf(e.type)>=0&&(mo.indexOf(p)>-1||t.getAttribute("contenteditable")==="true")}}function Ni(t){for(var e=t;e.parentNode&&!St(e,"body");e=e.parentNode){var n=is(e);if(M(n,"ph-sensitive")||M(n,"ph-no-capture"))return!1}if(M(is(t),"ph-include"))return!0;var r=t.type||"";if(ve(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var s=t.name||t.id||"";return!(ve(s)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(s.replace(/[^a-zA-Z0-9]/g,"")))}function Uu(t){return!!(St(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||St(t,"select")||St(t,"textarea")||t.getAttribute("contenteditable")==="true")}var Bu="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",qp=new RegExp("^(?:"+Bu+")$"),Wp=new RegExp(Bu),ju="\\d{3}-?\\d{2}-?\\d{4}",Gp=new RegExp("^("+ju+")$"),Vp=new RegExp("("+ju+")");function ir(t,e){return e===void 0&&(e=!0),!(B(t)||ve(t)&&(t=Ts(t),(e?qp:Wp).test((t||"").replace(/[- ]/g,""))||(e?Gp:Vp).test(t)))}function qu(t){var e=pr(t);return ir(e=(e+" "+Wu(t)).trim())?e:""}function Wu(t){var e="";return t&&t.childNodes&&t.childNodes.length&&K(t.childNodes,(function(n){var r;if(n&&((r=n.tagName)==null?void 0:r.toLowerCase())==="span")try{var s=pr(n);e=(e+" "+s).trim(),n.childNodes&&n.childNodes.length&&(e=(e+" "+Wu(n)).trim())}catch(i){S.error("[AutoCapture]",i)}})),e}function zp(t){return(function(e){var n=e.map((r=>{var s,i,o="";if(r.tag_name&&(o+=r.tag_name),r.attr_class)for(var a of(r.attr_class.sort(),r.attr_class))o+="."+a.replace(/"/g,"");var c=w({},r.text?{text:r.text}:{},{"nth-child":(s=r.nth_child)!==null&&s!==void 0?s:0,"nth-of-type":(i=r.nth_of_type)!==null&&i!==void 0?i:0},r.href?{href:r.href}:{},r.attr_id?{attr_id:r.attr_id}:{},r.attributes),u={};return Ur(c).sort(((l,d)=>{var[f]=l,[p]=d;return f.localeCompare(p)})).forEach((l=>{var[d,f]=l;return u[ba(d.toString())]=ba(f.toString())})),o+=":",o+=Ur(u).map((l=>{var[d,f]=l;return d+'="'+f+'"'})).join("")}));return n.join(";")})((function(e){return e.map((n=>{var r,s,i={text:(r=n.$el_text)==null?void 0:r.slice(0,400),tag_name:n.tag_name,href:(s=n.attr__href)==null?void 0:s.slice(0,2048),attr_class:Yp(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Ur(n).filter((o=>{var[a]=o;return a.indexOf("attr__")===0})).forEach((o=>{var[a,c]=o;return i.attributes[a]=c})),i}))})(t))}function ba(t){return t.replace(/"|\\"/g,'\\"')}function Yp(t){var e=t.attr__class;return e?W(e)?e:_o(e):void 0}class Gu{constructor(e){this.disabled=e===!1;var n=me(e)?e:{};this.thresholdPx=n.threshold_px||30,this.timeoutMs=n.timeout_ms||1e3,this.clickCount=n.click_count||3,this.clicks=[]}isRageClick(e,n,r){if(this.disabled)return!1;var s=this.clicks[this.clicks.length-1];if(s&&Math.abs(e-s.x)+Math.abs(n-s.y)<this.thresholdPx&&r-s.timestamp<this.timeoutMs){if(this.clicks.push({x:e,y:n,timestamp:r}),this.clicks.length===this.clickCount)return!0}else this.clicks=[{x:e,y:n,timestamp:r}];return!1}}var os=t=>{var e=E?.createElement("a");return b(e)?null:(e.href=t,e)},Jp=function(t,e){var n,r;e===void 0&&(e="&");var s=[];return K(t,(function(i,o){b(i)||b(o)||o==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(i)?i.name:i.toString()),r=encodeURIComponent(o),s[s.length]=r+"="+n)})),s.join(e)},as=function(t,e){for(var n,r=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),s=0;s<r.length;s++){var i=r[s].split("=");if(i[0]===e){n=i;break}}if(!W(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{S.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},fr=function(t,e,n){if(!t||!e||!e.length)return t;for(var r=t.split("#"),s=r[0]||"",i=r[1],o=s.split("?"),a=o[1],c=o[0],u=(a||"").split("&"),l=[],d=0;d<u.length;d++){var f=u[d].split("=");W(f)&&(e.includes(f[0])?l.push(f[0]+"="+n):l.push(u[d]))}var p=c;return a!=null&&(p+="?"+l.join("&")),i!=null&&(p+="#"+i),p},cs=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},qs="$copy_autocapture",Ea=oe("[AutoCapture]");function Ws(t,e){return e.length>t?e.slice(0,t)+"...":e}function Xp(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!ks(e));return e}function Kp(t,e,n,r){var s=t.tagName.toLowerCase(),i={tag_name:s};mo.indexOf(s)>-1&&!n&&(s.toLowerCase()==="a"||s.toLowerCase()==="button"?i.$el_text=Ws(1024,qu(t)):i.$el_text=Ws(1024,pr(t)));var o=is(t);o.length>0&&(i.classes=o.filter((function(l){return l!==""}))),K(t.attributes,(function(l){var d;if((!Uu(t)||["name","id","class","aria-label"].indexOf(l.name)!==-1)&&(r==null||!r.includes(l.name))&&!e&&ir(l.value)&&(d=l.name,!ve(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var f=l.value;l.name==="class"&&(f=_o(f).join(" ")),i["attr__"+l.name]=Ws(1024,f)}}));for(var a=1,c=1,u=t;u=Xp(u);)a++,u.tagName===t.tagName&&c++;return i.nth_child=a,i.nth_of_type=c,i}function Zp(t,e){for(var n,r,{e:s,maskAllElementAttributes:i,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:c}=e,u=[t],l=t;l.parentNode&&!St(l,"body");)Nu(l.parentNode)?(u.push(l.parentNode.host),l=l.parentNode.host):(u.push(l.parentNode),l=l.parentNode);var d,f=[],p={},h=!1,g=!1;if(K(u,(O=>{var I=Ni(O);O.tagName.toLowerCase()==="a"&&(h=O.getAttribute("href"),h=I&&h&&ir(h)&&h),M(is(O),"ph-no-capture")&&(g=!0),f.push(Kp(O,i,o,a));var ge=(function(C){if(!Ni(C))return{};var R={};return K(C.attributes,(function(de){if(de.name&&de.name.indexOf("data-ph-capture-attribute")===0){var ae=de.name.replace("data-ph-capture-attribute-",""),Z=de.value;ae&&Z&&ir(Z)&&(R[ae]=Z)}})),R})(O);le(p,ge)})),g)return{props:{},explicitNoCapture:g};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?f[0].$el_text=qu(t):f[0].$el_text=pr(t)),h){var m,v;f[0].attr__href=h;var T=(m=os(h))==null?void 0:m.host,F=_==null||(v=_.location)==null?void 0:v.host;T&&F&&T!==F&&(d=h)}return{props:le({$event_type:s.type,$ce_version:1},c?{}:{$elements:f},{$elements_chain:zp(f)},(n=f[0])!=null&&n.$el_text?{$el_text:(r=f[0])==null?void 0:r.$el_text}:{},d&&s.type==="click"?{$external_click_url:d}:{},p)}}class Qp{constructor(e){this.P=!1,this.T=null,this.I=!1,this.instance=e,this.rageclicks=new Gu(e.config.rageclick),this.C=null}get R(){var e,n,r=me(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=(e=r.url_allowlist)==null?void 0:e.map((s=>new RegExp(s))),r.url_ignorelist=(n=r.url_ignorelist)==null?void 0:n.map((s=>new RegExp(s))),r}F(){if(this.isBrowserSupported()){if(_&&E){var e=r=>{r=r||_?.event;try{this.M(r)}catch(s){Ea.error("Failed to capture event",s)}};if(he(E,"submit",e,{capture:!0}),he(E,"change",e,{capture:!0}),he(E,"click",e,{capture:!0}),this.R.capture_copied_text){var n=r=>{r=r||_?.event,this.M(r,qs)};he(E,"copy",n,{capture:!0}),he(E,"cut",n,{capture:!0})}}}else Ea.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.P&&(this.F(),this.P=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.I=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[la]:!!e.autocapture_opt_out}),this.T=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.C=e}getElementSelectors(e){var n,r=[];return(n=this.C)==null||n.forEach((s=>{var i=E?.querySelectorAll(s);i?.forEach((o=>{e===o&&r.push(s)}))})),r}get isEnabled(){var e,n,r=(e=this.instance.persistence)==null?void 0:e.props[la],s=this.T;if(Ge(s)&&!st(r)&&!this.instance.O())return!1;var i=(n=this.T)!==null&&n!==void 0?n:!!r;return!!this.instance.config.autocapture&&!i}M(e,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var r,s=Mu(e);Ou(s)&&(s=s.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,e.timeStamp||new Date().getTime())&&Bp(s,this.instance.config.rageclick)&&this.M(e,"$rageclick");var i=n===qs;if(s&&jp(s,e,this.R,i,i?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=Zp(s,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.R.element_attribute_ignorelist,elementsChainAsString:this.I});if(a)return!1;var c=this.getElementSelectors(s);if(c&&c.length>0&&(o.$element_selectors=c),n===qs){var u,l=Fu(_==null||(u=_.getSelection())==null?void 0:u.toString()),d=e.type||"clipboard";if(!l)return!1;o.$selected_content=l,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return bt(E?.querySelectorAll)}}Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return at(t)&&isFinite(t)&&Math.floor(t)===t});var Sa="0123456789abcdef";class us{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,r,s){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(s)||e<0||n<0||r<0||s<0||e>0xffffffffffff||n>4095||r>1073741823||s>4294967295)throw new RangeError("invalid field value");var i=new Uint8Array(16);return i[0]=e/Math.pow(2,40),i[1]=e/Math.pow(2,32),i[2]=e/Math.pow(2,24),i[3]=e/Math.pow(2,16),i[4]=e/Math.pow(2,8),i[5]=e,i[6]=112|n>>>8,i[7]=n,i[8]=128|r>>>24,i[9]=r>>>16,i[10]=r>>>8,i[11]=r,i[12]=s>>>24,i[13]=s>>>16,i[14]=s>>>8,i[15]=s,new us(i)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+Sa.charAt(this.bytes[n]>>>4)+Sa.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new us(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var r=this.bytes[n]-e.bytes[n];if(r!==0)return Math.sign(r)}return 0}}class ef{constructor(){this.A=0,this.D=0,this.j=new tf}generate(){var e=this.generateOrAbort();if(b(e)){this.A=0;var n=this.generateOrAbort();if(b(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.A)this.A=e,this.L();else{if(!(e+1e4>this.A))return;this.D++,this.D>4398046511103&&(this.A++,this.L())}return us.fromFieldsV7(this.A,Math.trunc(this.D/Math.pow(2,30)),this.D&Math.pow(2,30)-1,this.j.nextUint32())}L(){this.D=1024*this.j.nextUint32()+(1023&this.j.nextUint32())}}var wa,Vu=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};_&&!b(_.crypto)&&crypto.getRandomValues&&(Vu=t=>crypto.getRandomValues(t));class tf{constructor(){this.N=new Uint32Array(8),this.U=1/0}nextUint32(){return this.U>=this.N.length&&(Vu(this.N),this.U=0),this.N[this.U++]}}var vt=()=>nf().toString(),nf=()=>(wa||(wa=new ef)).generate(),Nn="",rf=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function sf(t,e){if(e){var n=(function(s,i){if(i===void 0&&(i=E),Nn)return Nn;if(!i||["localhost","127.0.0.1"].includes(s))return"";for(var o=s.split("."),a=Math.min(o.length,8),c="dmn_chk_"+vt();!Nn&&a--;){var u=o.slice(a).join("."),l=c+"=1;domain=."+u+";path=/";i.cookie=l+";max-age=3",i.cookie.includes(c)&&(i.cookie=l+";max-age=0",Nn=u)}return Nn})(t);if(!n){var r=(s=>{var i=s.match(rf);return i?i[0]:""})(t);r!==n&&S.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}var Ve={H:()=>!!E,B:function(t){S.error("cookieStore error: "+t)},q:function(t){if(E){try{for(var e=t+"=",n=E.cookie.split(";").filter((i=>i.length)),r=0;r<n.length;r++){for(var s=n[r];s.charAt(0)==" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return decodeURIComponent(s.substring(e.length,s.length))}}catch{}return null}},W:function(t){var e;try{e=JSON.parse(Ve.q(t))||{}}catch{}return e},G:function(t,e,n,r,s){if(E)try{var i="",o="",a=sf(E.location.hostname,r);if(n){var c=new Date;c.setTime(c.getTime()+24*n*60*60*1e3),i="; expires="+c.toUTCString()}s&&(o="; secure");var u=t+"="+encodeURIComponent(JSON.stringify(e))+i+"; SameSite=Lax; path=/"+a+o;return u.length>3686.4&&S.warn("cookieStore warning: large cookie, len="+u.length),E.cookie=u,u}catch{return}},V:function(t,e){if(E!=null&&E.cookie)try{Ve.G(t,"",-1,e)}catch{return}}},Gs=null,ne={H:function(){if(!Ge(Gs))return Gs;var t=!0;if(b(_))t=!1;else try{var e="__mplssupport__";ne.G(e,"xyz"),ne.q(e)!=='"xyz"'&&(t=!1),ne.V(e)}catch{t=!1}return t||S.error("localStorage unsupported; falling back to cookie store"),Gs=t,t},B:function(t){S.error("localStorage error: "+t)},q:function(t){try{return _?.localStorage.getItem(t)}catch(e){ne.B(e)}return null},W:function(t){try{return JSON.parse(ne.q(t))||{}}catch{}return null},G:function(t,e){try{_?.localStorage.setItem(t,JSON.stringify(e))}catch(n){ne.B(n)}},V:function(t){try{_?.localStorage.removeItem(t)}catch(e){ne.B(e)}}},of=["$device_id","distinct_id",ts,Au,ss,rs],Cr={},af={H:function(){return!0},B:function(t){S.error("memoryStorage error: "+t)},q:function(t){return Cr[t]||null},W:function(t){return Cr[t]||null},G:function(t,e){Cr[t]=e},V:function(t){delete Cr[t]}},Nt=null,Ee={H:function(){if(!Ge(Nt))return Nt;if(Nt=!0,b(_))Nt=!1;else try{var t="__support__";Ee.G(t,"xyz"),Ee.q(t)!=='"xyz"'&&(Nt=!1),Ee.V(t)}catch{Nt=!1}return Nt},B:function(t){S.error("sessionStorage error: ",t)},q:function(t){try{return _?.sessionStorage.getItem(t)}catch(e){Ee.B(e)}return null},W:function(t){try{return JSON.parse(Ee.q(t))||null}catch{}return null},G:function(t,e){try{_?.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Ee.B(n)}},V:function(t){try{_?.sessionStorage.removeItem(t)}catch(e){Ee.B(e)}}},et=(function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t})({});class cf{constructor(e){this._instance=e}get R(){return this._instance.config}get consent(){return this.J()?et.DENIED:this.K}isOptedOut(){return this.R.cookieless_mode==="always"||this.consent===et.DENIED||this.consent===et.PENDING&&(this.R.opt_out_capturing_by_default||this.R.cookieless_mode==="on_reject")}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===et.DENIED}optInOut(e){this.Y.G(this.X,e?1:0,this.R.cookie_expiration,this.R.cross_subdomain_cookie,this.R.secure_cookie)}reset(){this.Y.V(this.X,this.R.cross_subdomain_cookie)}get X(){var{token:e,opt_out_capturing_cookie_prefix:n,consent_persistence_name:r}=this._instance.config;return r||(n?n+e:"__ph_opt_in_out_"+e)}get K(){var e=this.Y.q(this.X);return Hs(e)?et.GRANTED:M(tp,e)?et.DENIED:et.PENDING}get Y(){if(!this.Z){var e=this.R.opt_out_capturing_persistence_type;this.Z=e==="localStorage"?ne:Ve;var n=e==="localStorage"?Ve:ne;n.q(this.X)&&(this.Z.q(this.X)||this.optInOut(Hs(n.q(this.X))),n.V(this.X,this.R.cross_subdomain_cookie))}return this.Z}J(){return!!this.R.respect_dnt&&!!Ru([Ae?.doNotTrack,Ae?.msDoNotTrack,x.doNotTrack],(e=>Hs(e)))}}var Ar=oe("[Dead Clicks]"),uf=()=>!0,lf=t=>{var e,n=!((e=t.instance.persistence)==null||!e.get_property(Cu)),r=t.instance.config.capture_dead_clicks;return st(r)?r:!!me(r)||n};class zu{get lazyLoadedDeadClicksAutocapture(){return this.tt}constructor(e,n,r){this.instance=e,this.isEnabled=n,this.onCapture=r,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[Cu]:e?.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.it((()=>{this.et()}))}it(e){var n,r;(n=x.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&e(),(r=x.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this.instance,"dead-clicks-autocapture",(s=>{s?Ar.error("failed to load script",s):e()}))}et(){var e;if(E){if(!this.tt&&(e=x.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var n=me(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.tt=x.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.tt.start(E),Ar.info("starting...")}}else Ar.error("`document` not found. Cannot start.")}stop(){this.tt&&(this.tt.stop(),this.tt=void 0,Ar.info("stopping..."))}}var Fn=oe("[ExceptionAutocapture]");class df{constructor(e){var n,r,s;this.rt=()=>{var i;if(_&&this.isEnabled&&(i=x.__PosthogExtensions__)!=null&&i.errorWrappingFunctions){var o=x.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=x.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,c=x.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.st&&this.R.capture_unhandled_errors&&(this.st=o(this.captureException.bind(this))),!this.nt&&this.R.capture_unhandled_rejections&&(this.nt=a(this.captureException.bind(this))),!this.ot&&this.R.capture_console_errors&&(this.ot=c(this.captureException.bind(this)))}catch(u){Fn.error("failed to start",u),this.ut()}}},this._instance=e,this.ht=!((n=this._instance.persistence)==null||!n.props[da]),this.dt=new np({refillRate:(r=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&r!==void 0?r:1,bucketSize:(s=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&s!==void 0?s:10,refillInterval:1e4,h:Fn}),this.R=this.vt(),this.startIfEnabledOrStop()}vt(){var e=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return me(e)?n=w({},n,e):(b(e)?this.ht:e)&&(n=w({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.R.capture_console_errors||this.R.capture_unhandled_errors||this.R.capture_unhandled_rejections}startIfEnabledOrStop(){this.isEnabled?(Fn.info("enabled"),this.ut(),this.it(this.rt)):this.ut()}it(e){var n,r;(n=x.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&e(),(r=x.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"exception-autocapture",(s=>{if(s)return Fn.error("failed to load script",s);e()}))}ut(){var e,n,r;(e=this.st)==null||e.call(this),this.st=void 0,(n=this.nt)==null||n.call(this),this.nt=void 0,(r=this.ot)==null||r.call(this),this.ot=void 0}onRemoteConfig(e){var n=e.autocaptureExceptions;this.ht=!!n||!1,this._instance.persistence&&this._instance.persistence.register({[da]:this.ht}),this.R=this.vt(),this.startIfEnabledOrStop()}onConfigChange(){this.R=this.vt()}captureException(e){var n,r,s=(n=e==null||(r=e.$exception_list)==null||(r=r[0])==null?void 0:r.type)!==null&&n!==void 0?n:"Exception";this.dt.consumeRateLimit(s)?Fn.info("Skipping exception capture because of client rate limiting.",{exception:s}):this._instance.exceptions.sendExceptionEvent(e)}}function Ta(t,e,n){try{if(!(e in t))return()=>{};var r=t[e],s=n(r);return bt(s)&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=s,()=>{t[e]=r}}catch{return()=>{}}}class pf{constructor(e){var n;this._instance=e,this.ct=(_==null||(n=_.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(S.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.ft&&this.ft(),this.ft=void 0,S.info("History API monitoring stopped")}monitorHistoryChanges(){var e,n;if(_&&_.history){var r=this;(e=_.history.pushState)!=null&&e.__posthog_wrapped__||Ta(_.history,"pushState",(s=>function(i,o,a){s.call(this,i,o,a),r._t("pushState")})),(n=_.history.replaceState)!=null&&n.__posthog_wrapped__||Ta(_.history,"replaceState",(s=>function(i,o,a){s.call(this,i,o,a),r._t("replaceState")})),this.yt()}}_t(e){try{var n,r=_==null||(n=_.location)==null?void 0:n.pathname;if(!r)return;r!==this.ct&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ct=r}catch(s){S.error("Error capturing "+e+" pageview",s)}}yt(){if(!this.ft){var e=()=>{this._t("popstate")};he(_,"popstate",e),this.ft=()=>{_&&_.removeEventListener("popstate",e)}}}}var Vs=oe("[SegmentIntegration]");function ff(t,e){var n=t.config.segment;if(!n)return e();(function(r,s){var i=r.config.segment;if(!i)return s();var o=c=>{var u=()=>c.anonymousId()||vt();r.config.get_device_id=u,c.id()&&(r.register({distinct_id:c.id(),$device_id:u()}),r.persistence.set_property(Qe,"identified")),s()},a=i.user();"then"in a&&bt(a.then)?a.then(o):o(a)})(t,(()=>{n.register((r=>{Promise&&Promise.resolve||Vs.warn("This browser does not have Promise support, and can not use the segment integration");var s=(i,o)=>{if(!o)return i;i.event.userId||i.event.anonymousId===r.get_distinct_id()||(Vs.info("No userId set, resetting PostHog"),r.reset()),i.event.userId&&i.event.userId!==r.get_distinct_id()&&(Vs.info("UserId set, identifying with PostHog"),r.identify(i.event.userId));var a=r.calculateEventProperties(o,i.event.properties);return i.event.properties=Object.assign({},a,i.event.properties),i};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:i=>s(i,i.event.event),page:i=>s(i,"$pageview"),identify:i=>s(i,"$identify"),screen:i=>s(i,"$screen")}})(t)).then((()=>{e()}))}))}var Yu="posthog-js";function Ju(t,e){var{organization:n,projectId:r,prefix:s,severityAllowList:i=["error"],sendExceptionsToPostHog:o=!0}=e===void 0?{}:e;return a=>{var c,u,l,d,f;if(!(i==="*"||i.includes(a.level))||!t.__loaded)return a;a.tags||(a.tags={});var p=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());a.tags["PostHog Person URL"]=p,t.sessionRecordingStarted()&&(a.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var h=((c=a.exception)==null?void 0:c.values)||[],g=h.map((v=>w({},v,{stacktrace:v.stacktrace?w({},v.stacktrace,{type:"raw",frames:(v.stacktrace.frames||[]).map((T=>w({},T,{platform:"web:javascript"})))}):void 0}))),m={$exception_message:((u=h[0])==null?void 0:u.value)||a.message,$exception_type:(l=h[0])==null?void 0:l.type,$exception_level:a.level,$exception_list:g,$sentry_event_id:a.event_id,$sentry_exception:a.exception,$sentry_exception_message:((d=h[0])==null?void 0:d.value)||a.message,$sentry_exception_type:(f=h[0])==null?void 0:f.type,$sentry_tags:a.tags};return n&&r&&(m.$sentry_url=(s||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+a.event_id),o&&t.exceptions.sendExceptionEvent(m),a}}class hf{constructor(e,n,r,s,i,o){this.name=Yu,this.setupOnce=function(a){a(Ju(e,{organization:n,projectId:r,prefix:s,severityAllowList:i,sendExceptionsToPostHog:o==null||o}))}}}var gf=_!=null&&_.location?cs(_.location.hash,"__posthog")||cs(location.hash,"state"):null,Ia="_postHogToolbarParams",ka=oe("[Toolbar]"),mt=(function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t})(mt||{});class _f{constructor(e){this.instance=e}bt(e){x.ph_toolbar_state=e}wt(){var e;return(e=x.ph_toolbar_state)!==null&&e!==void 0?e:mt.UNINITIALIZED}maybeLoadToolbar(e,n,r){if(e===void 0&&(e=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),!_||!E)return!1;e=e??_.location,r=r??_.history;try{if(!n){try{_.localStorage.setItem("test","test"),_.localStorage.removeItem("test")}catch{return!1}n=_?.localStorage}var s,i=gf||cs(e.hash,"__posthog")||cs(e.hash,"state"),o=i?ua((()=>JSON.parse(atob(decodeURIComponent(i)))))||ua((()=>JSON.parse(decodeURIComponent(i)))):null;return o&&o.action==="ph_authorize"?((s=o).source="url",s&&Object.keys(s).length>0&&(o.desiredHash?e.hash=o.desiredHash:r?r.replaceState(r.state,"",e.pathname+e.search):e.hash="")):((s=JSON.parse(n.getItem(Ia)||"{}")).source="localstorage",delete s.userIntent),!(!s.token||this.instance.config.token!==s.token)&&(this.loadToolbar(s),!0)}catch{return!1}}xt(e){var n=x.ph_load_toolbar||x.ph_load_editor;!B(n)&&bt(n)?n(e,this.instance):ka.warn("No toolbar load function found")}loadToolbar(e){var n=!(E==null||!E.getElementById($u));if(!_||n)return!1;var r=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,s=w({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(_.localStorage.setItem(Ia,JSON.stringify(w({},s,{source:void 0}))),this.wt()===mt.LOADED)this.xt(s);else if(this.wt()===mt.UNINITIALIZED){var i;this.bt(mt.LOADING),(i=x.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this.instance,"toolbar",(o=>{if(o)return ka.error("[Toolbar] Failed to load",o),void this.bt(mt.UNINITIALIZED);this.bt(mt.LOADED),this.xt(s)})),he(_,"turbolinks:load",(()=>{this.bt(mt.UNINITIALIZED),this.loadToolbar(s)}))}return!0}Et(e){return this.loadToolbar(e)}maybeLoadEditor(e,n,r){return e===void 0&&(e=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),this.maybeLoadToolbar(e,n,r)}}var mf=oe("[TracingHeaders]");class vf{constructor(e){this.$t=void 0,this.St=void 0,this.rt=()=>{var n,r;b(this.$t)&&((n=x.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),b(this.St)&&((r=x.__PosthogExtensions__)==null||(r=r.tracingHeadersPatchFns)==null||r._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}it(e){var n,r;(n=x.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&e(),(r=x.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"tracing-headers",(s=>{if(s)return mf.error("failed to load script",s);e()}))}startIfEnabledOrStop(){var e,n;this._instance.config.__add_tracing_headers?this.it(this.rt):((e=this.$t)==null||e.call(this),(n=this.St)==null||n.call(this),this.$t=void 0,this.St=void 0)}}var $r="https?://(.*)",Sn=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],yf=En(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],Sn),hr="<masked>",bf=["li_fat_id"];function Xu(t,e,n){if(!E)return{};var r,s=e?En([],Sn,n||[]):[],i=Ku(fr(E.URL,s,hr),t),o=(r={},K(bf,(function(a){var c=Ve.q(a);r[a]=c||null})),r);return le(o,i)}function Ku(t,e){var n=yf.concat(e||[]),r={};return K(n,(function(s){var i=as(t,s);r[s]=i||null})),r}function Zu(t){var e=(function(i){return i?i.search($r+"google.([^/?]*)")===0?"google":i.search($r+"bing.com")===0?"bing":i.search($r+"yahoo.com")===0?"yahoo":i.search($r+"duckduckgo.com")===0?"duckduckgo":null:null})(t),n=e!="yahoo"?"q":"p",r={};if(!Ge(e)){r.$search_engine=e;var s=E?as(E.referrer,n):"";s.length&&(r.ph_keyword=s)}return r}function xa(){return navigator.language||navigator.userLanguage}function Qu(){return E?.referrer||"$direct"}function el(t,e){var n=t?En([],Sn,e||[]):[],r=Re?.href.substring(0,1e3);return{r:Qu().substring(0,1e3),u:r?fr(r,n,hr):void 0}}function tl(t){var e,{r:n,u:r}=t,s={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=os(n))==null?void 0:e.host};if(r){s.$current_url=r;var i=os(r);s.$host=i?.host,s.$pathname=i?.pathname;var o=Ku(r);le(s,o)}if(n){var a=Zu(n);le(s,a)}return s}function nl(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function Ef(){try{return new Date().getTimezoneOffset()}catch{return}}function Sf(t,e){if(!xe)return{};var n,r,s,i=t?En([],Sn,e||[]):[],[o,a]=(function(c){for(var u=0;u<sa.length;u++){var[l,d]=sa[u],f=l.exec(c),p=f&&(bt(d)?d(f,c):d);if(p)return p}return["",""]})(xe);return le(go({$os:o,$os_version:a,$browser:Tu(xe,navigator.vendor),$device:ia(xe),$device_type:(r=xe,s=ia(r),s===lu||s===uu||s==="Kobo"||s==="Kindle Fire"||s===wu?tr:s===rr||s===un||s===sr||s===wi?"Console":s===pu?"Wearable":s?Le:"Desktop"),$timezone:nl(),$timezone_offset:Ef()}),{$current_url:fr(Re?.href,i,hr),$host:Re?.host,$pathname:Re?.pathname,$raw_user_agent:xe.length>1e3?xe.substring(0,997)+"...":xe,$browser_version:pp(xe,navigator.vendor),$browser_language:xa(),$browser_language_prefix:(n=xa(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:_?.screen.height,$screen_width:_?.screen.width,$viewport_height:_?.innerHeight,$viewport_width:_?.innerWidth,$lib:"web",$lib_version:Ze.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var ht=oe("[Web Vitals]"),Ra=9e5;class wf{constructor(e){var n;this.kt=!1,this.P=!1,this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Pt=()=>{clearTimeout(this.Tt),this.N.metrics.length!==0&&(this._instance.capture("$web_vitals",this.N.metrics.reduce(((r,s)=>w({},r,{["$web_vitals_"+s.name+"_event"]:w({},s),["$web_vitals_"+s.name+"_value"]:s.value})),{})),this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.It=r=>{var s,i=(s=this._instance.sessionManager)==null?void 0:s.checkAndGetSessionAndWindowId(!0);if(b(i))ht.error("Could not read session ID. Dropping metrics!");else{this.N=this.N||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.Ct();b(o)||(B(r?.name)||B(r?.value)?ht.error("Invalid metric received",r):this.Rt&&r.value>=this.Rt?ht.error("Ignoring metric with value >= "+this.Rt,r):(this.N.url!==o&&(this.Pt(),this.Tt=setTimeout(this.Pt,this.flushToCaptureTimeoutMs)),b(this.N.url)&&(this.N.url=o),this.N.firstMetricTimestamp=b(this.N.firstMetricTimestamp)?Date.now():this.N.firstMetricTimestamp,r.attribution&&r.attribution.interactionTargetElement&&(r.attribution.interactionTargetElement=void 0),this.N.metrics.push(w({},r,{$current_url:o,$session_id:i.sessionId,$window_id:i.windowId,timestamp:Date.now()})),this.N.metrics.length===this.allowedMetrics.length&&this.Pt()))}},this.rt=()=>{if(!this.P){var r,s,i,o,a=x.__PosthogExtensions__;b(a)||b(a.postHogWebVitalsCallbacks)||({onLCP:r,onCLS:s,onFCP:i,onINP:o}=a.postHogWebVitalsCallbacks),r&&s&&i&&o?(this.allowedMetrics.indexOf("LCP")>-1&&r(this.It.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&s(this.It.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&i(this.It.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.It.bind(this)),this.P=!0):ht.error("web vitals callbacks not loaded - not starting")}},this._instance=e,this.kt=!((n=this._instance.persistence)==null||!n.props[fa]),this.startIfEnabled()}get allowedMetrics(){var e,n,r=me(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return b(r)?((n=this._instance.persistence)==null?void 0:n.props[ga])||["CLS","FCP","INP","LCP"]:r}get flushToCaptureTimeoutMs(){return(me(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get useAttribution(){var e=me(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_attribution:void 0;return e==null||e}get Rt(){var e=me(this._instance.config.capture_performance)&&at(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:Ra;return 0<e&&e<=6e4?Ra:e}get isEnabled(){var e=Re?.protocol;if(e!=="http:"&&e!=="https:")return ht.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=me(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:st(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return st(n)?n:this.kt}startIfEnabled(){this.isEnabled&&!this.P&&(ht.info("enabled, starting..."),this.it(this.rt))}onRemoteConfig(e){var n=me(e.capturePerformance)&&!!e.capturePerformance.web_vitals,r=me(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[fa]:n}),this._instance.persistence.register({[ga]:r})),this.kt=n,this.startIfEnabled()}it(e){var n,r;(n=x.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks?e():(r=x.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"web-vitals",(s=>{var i;if(s)ht.error("failed to load script",s);else{var o=(i=x.__PosthogExtensions__)==null?void 0:i.loadWebVitalsCallbacks;o&&o(this.useAttribution),e()}}))}Ct(){var e=_?_.location.href:void 0;if(e){var n=this._instance.config.mask_personal_data_properties,r=this._instance.config.custom_personal_data_properties,s=n?En([],Sn,r||[]):[];return fr(e,s,hr)}ht.error("Could not determine current URL")}}var Tf=oe("[Heatmaps]");function Pa(t){return me(t)&&"clientX"in t&&"clientY"in t&&at(t.clientX)&&at(t.clientY)}class If{constructor(e){var n;this.kt=!1,this.P=!1,this.Ft=null,this.instance=e,this.kt=!((n=this.instance.persistence)==null||!n.props[ki]),this.rageclicks=new Gu(e.config.rageclick)}get flushIntervalMilliseconds(){var e=5e3;return me(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return b(this.instance.config.capture_heatmaps)?b(this.instance.config.enable_heatmaps)?this.kt:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.P)return;Tf.info("starting..."),this.Mt(),this.Ot()}else{var e;clearInterval((e=this.Ft)!==null&&e!==void 0?e:void 0),this.At(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[ki]:n}),this.kt=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.N;return this.N=void 0,e}Dt(e){this.jt(e.originalEvent,"deadclick")}Ot(){this.Ft&&clearInterval(this.Ft),this.Ft=(function(e){return e?.visibilityState==="visible"})(E)?setInterval(this.Lt.bind(this),this.flushIntervalMilliseconds):null}Mt(){_&&E&&(this.Nt=this.Lt.bind(this),he(_,"beforeunload",this.Nt),this.Ut=e=>this.jt(e||_?.event),he(E,"click",this.Ut,{capture:!0}),this.zt=e=>this.Ht(e||_?.event),he(E,"mousemove",this.zt,{capture:!0}),this.Bt=new zu(this.instance,uf,this.Dt.bind(this)),this.Bt.startIfEnabled(),this.qt=this.Ot.bind(this),he(E,"visibilitychange",this.qt),this.P=!0)}At(){var e;_&&E&&(this.Nt&&_.removeEventListener("beforeunload",this.Nt),this.Ut&&E.removeEventListener("click",this.Ut,{capture:!0}),this.zt&&E.removeEventListener("mousemove",this.zt,{capture:!0}),this.qt&&E.removeEventListener("visibilitychange",this.qt),clearTimeout(this.Wt),(e=this.Bt)==null||e.stop(),this.P=!1)}Gt(e,n){var r=this.instance.scrollManager.scrollY(),s=this.instance.scrollManager.scrollX(),i=this.instance.scrollManager.scrollElement(),o=(function(a,c,u){for(var l=a;l&&ks(l)&&!St(l,"body");){if(l===u)return!1;if(M(c,_?.getComputedStyle(l).position))return!0;l=Du(l)}return!1})(Mu(e),["fixed","sticky"],i);return{x:e.clientX+(o?0:s),y:e.clientY+(o?0:r),target_fixed:o,type:n}}jt(e,n){var r;if(n===void 0&&(n="click"),!_a(e.target)&&Pa(e)){var s=this.Gt(e,n);(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.Vt(w({},s,{type:"rageclick"})),this.Vt(s)}}Ht(e){!_a(e.target)&&Pa(e)&&(clearTimeout(this.Wt),this.Wt=setTimeout((()=>{this.Vt(this.Gt(e,"mousemove"))}),500))}Vt(e){if(_){var n=_.location.href,r=this.instance.config.mask_personal_data_properties,s=this.instance.config.custom_personal_data_properties,i=r?En([],Sn,s||[]):[],o=fr(n,i,hr);this.N=this.N||{},this.N[o]||(this.N[o]=[]),this.N[o].push(e)}}Lt(){this.N&&!sn(this.N)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class Ca{constructor(e){this.Jt=(n,r,s)=>{s&&(s.noSessionId||s.activityTimeout||s.sessionPastMaximumLength)&&(S.info("[PageViewManager] Session rotated, clearing pageview state",{sessionId:n,changeReason:s}),this.Kt=void 0,this._instance.scrollManager.resetContext())},this._instance=e,this.Yt()}Yt(){var e;this.Xt=(e=this._instance.sessionManager)==null?void 0:e.onSessionId(this.Jt)}destroy(){var e;(e=this.Xt)==null||e.call(this),this.Xt=void 0}doPageView(e,n){var r,s=this.Qt(e,n);return this.Kt={pathname:(r=_?.location.pathname)!==null&&r!==void 0?r:"",pageViewId:n,timestamp:e},this._instance.scrollManager.resetContext(),s}doPageLeave(e){var n;return this.Qt(e,(n=this.Kt)==null?void 0:n.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.Kt)==null?void 0:e.pageViewId}}Qt(e,n){var r=this.Kt;if(!r)return{$pageview_id:n};var s={$pageview_id:n,$prev_pageview_id:r.pageViewId},i=this._instance.scrollManager.getContext();if(i&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:c,maxContentHeight:u,lastContentY:l,maxContentY:d}=i;if(!(b(o)||b(a)||b(c)||b(u)||b(l)||b(d))){o=Math.ceil(o),a=Math.ceil(a),c=Math.ceil(c),u=Math.ceil(u),l=Math.ceil(l),d=Math.ceil(d);var f=o<=1?1:ze(a/o,0,1,S),p=o<=1?1:ze(c/o,0,1,S),h=u<=1?1:ze(l/u,0,1,S),g=u<=1?1:ze(d/u,0,1,S);s=le(s,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:f,$prev_pageview_max_scroll:c,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:l,$prev_pageview_last_content_percentage:h,$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:g})}}return r.pathname&&(s.$prev_pageview_pathname=r.pathname),r.timestamp&&(s.$prev_pageview_duration=(e.getTime()-r.timestamp.getTime())/1e3),s}}var nt=(function(t){return t.GZipJS="gzip-js",t.Base64="base64",t})({}),De=Uint8Array,Pe=Uint16Array,fn=Uint32Array,yo=new De([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bo=new De([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Aa=new De([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rl=function(t,e){for(var n=new Pe(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var s=new fn(n[30]);for(r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return[n,s]},sl=rl(yo,2),kf=sl[0],Fi=sl[1];kf[28]=258,Fi[258]=28;for(var $a=rl(bo,0)[1],il=new Pe(32768),ee=0;ee<32768;++ee){var Ft=(43690&ee)>>>1|(21845&ee)<<1;Ft=(61680&(Ft=(52428&Ft)>>>2|(13107&Ft)<<2))>>>4|(3855&Ft)<<4,il[ee]=((65280&Ft)>>>8|(255&Ft)<<8)>>>1}var Zn=function(t,e,n){for(var r=t.length,s=0,i=new Pe(e);s<r;++s)++i[t[s]-1];var o,a=new Pe(e);for(s=0;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;for(o=new Pe(r),s=0;s<r;++s)o[s]=il[a[t[s]-1]++]>>>15-t[s];return o},Gt=new De(288);for(ee=0;ee<144;++ee)Gt[ee]=8;for(ee=144;ee<256;++ee)Gt[ee]=9;for(ee=256;ee<280;++ee)Gt[ee]=7;for(ee=280;ee<288;++ee)Gt[ee]=8;var ls=new De(32);for(ee=0;ee<32;++ee)ls[ee]=5;var xf=Zn(Gt,9),Rf=Zn(ls,5),ol=function(t){return(t/8>>0)+(7&t&&1)},al=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof Pe?Pe:t instanceof fn?fn:De)(n-e);return r.set(t.subarray(e,n)),r},Xe=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},Mn=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},zs=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,i=n.slice();if(!s)return[new De(0),0];if(s==1){var o=new De(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort((function(I,ge){return I.f-ge.f})),n.push({s:-1,f:25001});var a=n[0],c=n[1],u=0,l=1,d=2;for(n[0]={s:-1,f:a.f+c.f,l:a,r:c};l!=s-1;)a=n[n[u].f<n[d].f?u++:d++],c=n[u!=l&&n[u].f<n[d].f?u++:d++],n[l++]={s:-1,f:a.f+c.f,l:a,r:c};var f=i[0].s;for(r=1;r<s;++r)i[r].s>f&&(f=i[r].s);var p=new Pe(f+1),h=Mi(n[l-1],p,0);if(h>e){r=0;var g=0,m=h-e,v=1<<m;for(i.sort((function(I,ge){return p[ge.s]-p[I.s]||I.f-ge.f}));r<s;++r){var T=i[r].s;if(!(p[T]>e))break;g+=v-(1<<h-p[T]),p[T]=e}for(g>>>=m;g>0;){var F=i[r].s;p[F]<e?g-=1<<e-p[F]++-1:++r}for(;r>=0&&g;--r){var O=i[r].s;p[O]==e&&(--p[O],++g)}h=e}return[new De(p),h]},Mi=function(t,e,n){return t.s==-1?Math.max(Mi(t.l,e,n+1),Mi(t.r,e,n+1)):e[t.s]=n},Oa=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Pe(++e),r=0,s=t[0],i=1,o=function(c){n[r++]=c},a=1;a<=e;++a)if(t[a]==s&&a!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=t[a]}return[n.subarray(0,r),e]},Ln=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Li=function(t,e,n){var r=n.length,s=ol(e+2);t[s]=255&r,t[s+1]=r>>>8,t[s+2]=255^t[s],t[s+3]=255^t[s+1];for(var i=0;i<r;++i)t[s+i+4]=n[i];return 8*(s+4+r)},Na=function(t,e,n,r,s,i,o,a,c,u,l){Xe(e,l++,n),++s[256];for(var d=zs(s,15),f=d[0],p=d[1],h=zs(i,15),g=h[0],m=h[1],v=Oa(f),T=v[0],F=v[1],O=Oa(g),I=O[0],ge=O[1],C=new Pe(19),R=0;R<T.length;++R)C[31&T[R]]++;for(R=0;R<I.length;++R)C[31&I[R]]++;for(var de=zs(C,7),ae=de[0],Z=de[1],ce=19;ce>4&&!ae[Aa[ce-1]];--ce);var re,U,ue,pe,fe=u+5<<3,N=Ln(s,Gt)+Ln(i,ls)+o,q=Ln(s,f)+Ln(i,g)+o+14+3*ce+Ln(C,ae)+(2*C[16]+3*C[17]+7*C[18]);if(fe<=N&&fe<=q)return Li(e,l,t.subarray(c,c+u));if(Xe(e,l,1+(q<N)),l+=2,q<N){re=Zn(f,p),U=f,ue=Zn(g,m),pe=g;var A=Zn(ae,Z);for(Xe(e,l,F-257),Xe(e,l+5,ge-1),Xe(e,l+10,ce-4),l+=14,R=0;R<ce;++R)Xe(e,l+3*R,ae[Aa[R]]);l+=3*ce;for(var X=[T,I],H=0;H<2;++H){var z=X[H];for(R=0;R<z.length;++R){var te=31&z[R];Xe(e,l,A[te]),l+=ae[te],te>15&&(Xe(e,l,z[R]>>>5&127),l+=z[R]>>>12)}}}else re=xf,U=Gt,ue=Rf,pe=ls;for(R=0;R<a;++R)if(r[R]>255){te=r[R]>>>18&31,Mn(e,l,re[te+257]),l+=U[te+257],te>7&&(Xe(e,l,r[R]>>>23&31),l+=yo[te]);var P=31&r[R];Mn(e,l,ue[P]),l+=pe[P],P>3&&(Mn(e,l,r[R]>>>5&8191),l+=bo[P])}else Mn(e,l,re[r[R]]),l+=U[r[R]];return Mn(e,l,re[256]),l+U[256]},Pf=new fn([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Cf=(function(){for(var t=new fn(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t})(),Af=function(t,e,n,r,s){return(function(i,o,a,c,u,l){var d=i.length,f=new De(c+d+5*(1+Math.floor(d/7e3))+u),p=f.subarray(c,f.length-u),h=0;if(!o||d<8)for(var g=0;g<=d;g+=65535){var m=g+65535;m<d?h=Li(p,h,i.subarray(g,m)):(p[g]=l,h=Li(p,h,i.subarray(g,d)))}else{for(var v=Pf[o-1],T=v>>>13,F=8191&v,O=(1<<a)-1,I=new Pe(32768),ge=new Pe(O+1),C=Math.ceil(a/3),R=2*C,de=function(Ds){return(i[Ds]^i[Ds+1]<<C^i[Ds+2]<<R)&O},ae=new fn(25e3),Z=new Pe(288),ce=new Pe(32),re=0,U=0,ue=(g=0,0),pe=0,fe=0;g<d;++g){var N=de(g),q=32767&g,A=ge[N];if(I[q]=A,ge[N]=q,pe<=g){var X=d-g;if((re>7e3||ue>24576)&&X>423){h=Na(i,p,0,ae,Z,ce,U,ue,fe,g-fe,h),ue=re=U=0,fe=g;for(var H=0;H<286;++H)Z[H]=0;for(H=0;H<30;++H)ce[H]=0}var z=2,te=0,P=F,se=q-A&32767;if(X>2&&N==de(g-se))for(var Ot=Math.min(T,X)-1,Rr=Math.min(32767,g),Ms=Math.min(258,X);se<=Rr&&--P&&q!=A;){if(i[g+z]==i[g+z-se]){for(var ft=0;ft<Ms&&i[g+ft]==i[g+ft-se];++ft);if(ft>z){if(z=ft,te=se,ft>Ot)break;var Yd=Math.min(se,ft-2),zo=0;for(H=0;H<Yd;++H){var Ls=g-se+H+32768&32767,Yo=Ls-I[Ls]+32768&32767;Yo>zo&&(zo=Yo,A=Ls)}}}se+=(q=A)-(A=I[q])+32768&32767}if(te){ae[ue++]=268435456|Fi[z]<<18|$a[te];var Jo=31&Fi[z],Xo=31&$a[te];U+=yo[Jo]+bo[Xo],++Z[257+Jo],++ce[Xo],pe=g+z,++re}else ae[ue++]=i[g],++Z[i[g]]}}h=Na(i,p,l,ae,Z,ce,U,ue,fe,g-fe,h)}return al(f,0,c+ol(h)+u)})(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,r,!0)},Ys=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8};function $f(t,e){e===void 0&&(e={});var n=(function(){var a=4294967295;return{p:function(c){for(var u=a,l=0;l<c.length;++l)u=Cf[255&u^c[l]]^u>>>8;a=u},d:function(){return 4294967295^a}}})(),r=t.length;n.p(t);var s,i=Af(t,e,10+((s=e).filename&&s.filename.length+1||0),8),o=i.length;return(function(a,c){var u=c.filename;if(a[0]=31,a[1]=139,a[2]=8,a[8]=c.level<2?4:c.level==9?2:0,a[9]=3,c.mtime!=0&&Ys(a,4,Math.floor(new Date(c.mtime||Date.now())/1e3)),u){a[3]=8;for(var l=0;l<=u.length;++l)a[l+10]=u.charCodeAt(l)}})(i,e),Ys(i,o-8,n.d()),Ys(i,o-4,r),i}var Of=function(t){var e,n,r,s,i="";for(e=n=0,r=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,s=0;s<r;s++){var o=t.charCodeAt(s),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),Ge(a)||(n>e&&(i+=t.substring(e,n)),i+=a,e=n=s+1)}return n>e&&(i+=t.substring(e,t.length)),i},Nf=!!vi||!!mi,Fa="text/plain",ds=function(t,e,n){var r;n===void 0&&(n=!0);var[s,i]=t.split("?"),o=w({},e),a=(r=i?.split("&").map((u=>{var l,[d,f]=u.split("="),p=n&&(l=o[d])!==null&&l!==void 0?l:f;return delete o[d],d+"="+p})))!==null&&r!==void 0?r:[],c=Jp(o);return c&&a.push(c),s+"?"+a.join("&")},Yn=(t,e)=>JSON.stringify(t,((n,r)=>typeof r=="bigint"?r.toString():r),e),Js=t=>{var{data:e,compression:n}=t;if(e){if(n===nt.GZipJS){var r=$f((function(c,u){var l=c.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(c);for(var d=new De(c.length+(c.length>>>1)),f=0,p=function(v){d[f++]=v},h=0;h<l;++h){if(f+5>d.length){var g=new De(f+8+(l-h<<1));g.set(d),d=g}var m=c.charCodeAt(h);m<128||u?p(m):m<2048?(p(192|m>>>6),p(128|63&m)):m>55295&&m<57344?(p(240|(m=65536+(1047552&m)|1023&c.charCodeAt(++h))>>>18),p(128|m>>>12&63),p(128|m>>>6&63),p(128|63&m)):(p(224|m>>>12),p(128|m>>>6&63),p(128|63&m))}return al(d,0,f)})(Yn(e)),{mtime:0}),s=new Blob([r],{type:Fa});return{contentType:Fa,body:s,estimatedSize:s.size}}if(n===nt.Base64){var i=(function(c){var u,l,d,f,p,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g=0,m=0,v="",T=[];if(!c)return c;c=Of(c);do u=(p=c.charCodeAt(g++)<<16|c.charCodeAt(g++)<<8|c.charCodeAt(g++))>>18&63,l=p>>12&63,d=p>>6&63,f=63&p,T[m++]=h.charAt(u)+h.charAt(l)+h.charAt(d)+h.charAt(f);while(g<c.length);switch(v=T.join(""),c.length%3){case 1:v=v.slice(0,-2)+"==";break;case 2:v=v.slice(0,-1)+"="}return v})(Yn(e)),o=(c=>"data="+encodeURIComponent(typeof c=="string"?c:Yn(c)))(i);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=Yn(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Br=[];mi&&Br.push({transport:"fetch",method:t=>{var e,n,{contentType:r,body:s,estimatedSize:i}=(e=Js(t))!==null&&e!==void 0?e:{},o=new Headers;K(t.headers,(function(l,d){o.append(d,l)})),r&&o.append("Content-Type",r);var a=t.url,c=null;if(Qo){var u=new Qo;c={signal:u.signal,timeout:setTimeout((()=>u.abort()),t.timeout)}}mi(a,w({method:t?.method||"GET",headers:o,keepalive:t.method==="POST"&&(i||0)<52428.8,body:s,signal:(n=c)==null?void 0:n.signal},t.fetchOptions)).then((l=>l.text().then((d=>{var f={statusCode:l.status,text:d};if(l.status===200)try{f.json=JSON.parse(d)}catch(p){S.error(p)}t.callback==null||t.callback(f)})))).catch((l=>{S.error(l),t.callback==null||t.callback({statusCode:0,text:l})})).finally((()=>c?clearTimeout(c.timeout):null))}}),vi&&Br.push({transport:"XHR",method:t=>{var e,n=new vi;n.open(t.method||"GET",t.url,!0);var{contentType:r,body:s}=(e=Js(t))!==null&&e!==void 0?e:{};K(t.headers,(function(i,o){n.setRequestHeader(o,i)})),r&&n.setRequestHeader("Content-Type",r),t.timeout&&(n.timeout=t.timeout),t.disableXHRCredentials||(n.withCredentials=!0),n.onreadystatechange=()=>{if(n.readyState===4){var i={statusCode:n.status,text:n.responseText};if(n.status===200)try{i.json=JSON.parse(n.responseText)}catch{}t.callback==null||t.callback(i)}},n.send(s)}}),Ae!=null&&Ae.sendBeacon&&Br.push({transport:"sendBeacon",method:t=>{var e=ds(t.url,{beacon:"1"});try{var n,{contentType:r,body:s}=(n=Js(t))!==null&&n!==void 0?n:{},i=typeof s=="string"?new Blob([s],{type:r}):s;Ae.sendBeacon(e,i)}catch{}}});var ps=function(t,e){if(!(function(n){try{new RegExp(n)}catch{return!1}return!0})(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function Ma(t,e,n){return Yn({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:n})}var cl={exact:(t,e)=>e.some((n=>t.some((r=>n===r)))),is_not:(t,e)=>e.every((n=>t.every((r=>n!==r)))),regex:(t,e)=>e.some((n=>t.some((r=>ps(n,r))))),not_regex:(t,e)=>e.every((n=>t.every((r=>!ps(n,r))))),icontains:(t,e)=>e.map(Or).some((n=>t.map(Or).some((r=>n.includes(r))))),not_icontains:(t,e)=>e.map(Or).every((n=>t.map(Or).every((r=>!n.includes(r))))),gt:(t,e)=>e.some((n=>{var r=parseFloat(n);return!isNaN(r)&&t.some((s=>r>parseFloat(s)))})),lt:(t,e)=>e.some((n=>{var r=parseFloat(n);return!isNaN(r)&&t.some((s=>r<parseFloat(s)))}))},Or=t=>t.toLowerCase();function ul(t,e){return!t||Object.entries(t).every((n=>{var[r,s]=n,i=e?.[r];if(b(i)||Ge(i))return!1;var o=[String(i)],a=cl[s.operator];return!!a&&a(s.values,o)}))}var Xs=oe("[Error tracking]");class Ff{constructor(e){var n,r;this.Zt=[],this.ti=new gp([new Tp,new Op,new kp,new Ip,new Ap,new Cp,new Rp,new $p],wp()),this._instance=e,this.Zt=(n=(r=this._instance.persistence)==null?void 0:r.get_property(xi))!==null&&n!==void 0?n:[]}onRemoteConfig(e){var n,r,s,i=(n=(r=e.errorTracking)==null?void 0:r.suppressionRules)!==null&&n!==void 0?n:[],o=(s=e.errorTracking)==null?void 0:s.captureExtensionExceptions;this.Zt=i,this._instance.persistence&&this._instance.persistence.register({[xi]:this.Zt,[pa]:o})}get ii(){var e,n=!!this._instance.get_property(pa),r=this._instance.config.error_tracking.captureExtensionExceptions;return(e=r??n)!==null&&e!==void 0&&e}buildProperties(e,n){return this.ti.buildFromUnknown(e,{syntheticException:n?.syntheticException,mechanism:{handled:n?.handled}})}sendExceptionEvent(e){var n=e.$exception_list;if(this.ei(n)){if(this.ri(n))return void Xs.info("Skipping exception capture because a suppression rule matched");if(!this.ii&&this.si(n))return void Xs.info("Skipping exception capture because it was thrown by an extension");if(!this._instance.config.error_tracking.__capturePostHogExceptions&&this.ni(n))return void Xs.info("Skipping exception capture because it was thrown by the PostHog SDK")}return this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}ri(e){if(e.length===0)return!1;var n=e.reduce(((r,s)=>{var{type:i,value:o}=s;return ve(i)&&i.length>0&&r.$exception_types.push(i),ve(o)&&o.length>0&&r.$exception_values.push(o),r}),{$exception_types:[],$exception_values:[]});return this.Zt.some((r=>{var s=r.values.map((i=>{var o,a=cl[i.operator],c=W(i.value)?i.value:[i.value],u=(o=n[i.key])!==null&&o!==void 0?o:[];return c.length>0&&a(c,u)}));return r.type==="OR"?s.some(Boolean):s.every(Boolean)}))}si(e){return e.flatMap((n=>{var r,s;return(r=(s=n.stacktrace)==null?void 0:s.frames)!==null&&r!==void 0?r:[]})).some((n=>n.filename&&n.filename.startsWith("chrome-extension://")))}ni(e){if(e.length>0){var n,r,s,i,o=(n=(r=e[0].stacktrace)==null?void 0:r.frames)!==null&&n!==void 0?n:[],a=o[o.length-1];return(s=a==null||(i=a.filename)==null?void 0:i.includes("posthog.com/static"))!==null&&s!==void 0&&s}return!1}ei(e){return!B(e)&&W(e)}}var Me=oe("[FeatureFlags]"),Dn=oe("[FeatureFlags]",{debugEnabled:!0}),Ks="$active_feature_flags",Kt="$override_feature_flags",La="$feature_flag_payloads",Hn="$override_feature_flag_payloads",Da="$feature_flag_request_id",Ha="$feature_flag_evaluated_at",Ua=t=>{var e={};for(var[n,r]of Ur(t||{}))r&&(e[n]=r);return e},Mf=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map((n=>{var r;return[n,(r=e[n].variant)!==null&&r!==void 0?r:e[n].enabled]}))),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter((n=>e[n].enabled)).filter((n=>{var r;return(r=e[n].metadata)==null?void 0:r.payload})).map((n=>{var r;return[n,(r=e[n].metadata)==null?void 0:r.payload]})))):Me.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},Lf=(function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t})({});class Df{constructor(e){this.oi=!1,this.ai=!1,this.li=!1,this.ui=!1,this.hi=!1,this.di=!1,this.vi=!1,this.ci=!1,this._instance=e,this.featureFlagEventHandlers=[]}fi(){var e,n=(e=this._instance.config.evaluation_contexts)!==null&&e!==void 0?e:this._instance.config.evaluation_environments;return!this._instance.config.evaluation_environments||this._instance.config.evaluation_contexts||this.ci||(Me.warn("evaluation_environments is deprecated. Use evaluation_contexts instead. evaluation_environments will be removed in a future version."),this.ci=!0),n!=null&&n.length?n.filter((r=>{var s=r&&typeof r=="string"&&r.trim().length>0;return s||Me.error("Invalid evaluation context found:",r,"Expected non-empty string"),s})):[]}pi(){return this.fi().length>0}flags(){if(this._instance.config.__preview_remote_config)this.di=!0;else{var e=!this.gi&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.mi({disableFlags:e})}}get hasLoadedFlags(){return this.ai}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(Ri),n=this._instance.get_property(Kt),r=this._instance.get_property(Hn);if(!r&&!n)return e||{};var s=le({},e||{}),i=[...new Set([...Object.keys(r||{}),...Object.keys(n||{})])];for(var o of i){var a,c,u=s[o],l=n?.[o],d=b(l)?(a=u?.enabled)!==null&&a!==void 0&&a:!!l,f=b(l)?u.variant:typeof l=="string"?l:void 0,p=r?.[o],h=w({},u,{enabled:d,variant:d?f??u?.variant:void 0});d!==u?.enabled&&(h.original_enabled=u?.enabled),f!==u?.variant&&(h.original_variant=u?.variant),p&&(h.metadata=w({},u?.metadata,{payload:p,original_payload:u==null||(c=u.metadata)==null?void 0:c.payload})),s[o]=h}return this.oi||(Me.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:r,finalDetails:s}),this.oi=!0),s}getFlagVariants(){var e=this._instance.get_property(on),n=this._instance.get_property(Kt);if(!n)return e||{};for(var r=le({},e),s=Object.keys(n),i=0;i<s.length;i++)r[s[i]]=n[s[i]];return this.oi||(Me.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:r}),this.oi=!0),r}getFlagPayloads(){var e=this._instance.get_property(La),n=this._instance.get_property(Hn);if(!n)return e||{};for(var r=le({},e||{}),s=Object.keys(n),i=0;i<s.length;i++)r[s[i]]=n[s[i]];return this.oi||(Me.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:n,finalPayloads:r}),this.oi=!0),r}reloadFeatureFlags(){this.ui||this._instance.config.advanced_disable_feature_flags||this.gi||(this.gi=setTimeout((()=>{this.mi()}),5))}yi(){clearTimeout(this.gi),this.gi=void 0}ensureFlagsLoaded(){this.ai||this.li||this.gi||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.ui=e}mi(e){var n;if(this.yi(),!this._instance.O())if(this.li)this.hi=!0;else{var r=this._instance.config.token,s=this._instance.get_property("$device_id"),i={token:r,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:w({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(zn)||{}),group_properties:this._instance.get_property(Dt)};Ge(s)||b(s)||(i.$device_id=s),(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(i.disable_flags=!0),this.pi()&&(i.evaluation_contexts=this.fi());var o=this._instance.config.__preview_remote_config,a=o?"/flags/?v=2":"/flags/?v=2&config=true",c=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",u=this._instance.requestRouter.endpointFor("flags",a+c);o&&(i.timezone=nl()),this.li=!0,this._instance._send_request({method:"POST",url:u,data:i,compression:this._instance.config.disable_compression?void 0:nt.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var d,f,p=!0;if(l.statusCode===200&&(this.hi||(this.$anon_distinct_id=void 0),p=!1),this.li=!1,this.di||(this.di=!0,this._instance.bi((f=l.json)!==null&&f!==void 0?f:{})),!i.disable_flags||this.hi)if(this.vi=!p,l.json&&(d=l.json.quotaLimited)!=null&&d.includes(Lf.FeatureFlags))Me.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var h;i.disable_flags||this.receivedFeatureFlags((h=l.json)!==null&&h!==void 0?h:{},p),this.hi&&(this.hi=!1,this.mi())}}})}}getFeatureFlag(e,n){if(n===void 0&&(n={}),this.ai||this.getFlags()&&this.getFlags().length>0){var r=this.getFlagVariants()[e],s=""+r,i=this._instance.get_property(Da)||void 0,o=this._instance.get_property(Ha)||void 0,a=this._instance.get_property(ns)||{};if((n.send_event||!("send_event"in n))&&(!(e in a)||!a[e].includes(s))){var c,u,l,d,f,p,h,g,m;W(a[e])?a[e].push(s):a[e]=[s],(c=this._instance.persistence)==null||c.register({[ns]:a});var v=this.getFeatureFlagDetails(e),T={$feature_flag:e,$feature_flag_response:r,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:i,$feature_flag_evaluated_at:o,$feature_flag_bootstrapped_response:((u=this._instance.config.bootstrap)==null||(u=u.featureFlags)==null?void 0:u[e])||null,$feature_flag_bootstrapped_payload:((l=this._instance.config.bootstrap)==null||(l=l.featureFlagPayloads)==null?void 0:l[e])||null,$used_bootstrap_value:!this.vi};b(v==null||(d=v.metadata)==null?void 0:d.version)||(T.$feature_flag_version=v.metadata.version);var F,O=(f=v==null||(p=v.reason)==null?void 0:p.description)!==null&&f!==void 0?f:v==null||(h=v.reason)==null?void 0:h.code;O&&(T.$feature_flag_reason=O),v!=null&&(g=v.metadata)!=null&&g.id&&(T.$feature_flag_id=v.metadata.id),b(v?.original_variant)&&b(v?.original_enabled)||(T.$feature_flag_original_response=b(v.original_variant)?v.original_enabled:v.original_variant),v!=null&&(m=v.metadata)!=null&&m.original_payload&&(T.$feature_flag_original_payload=v==null||(F=v.metadata)==null?void 0:F.original_payload),this._instance.capture("$feature_flag_called",T)}return r}Me.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,n){var r=this._instance.config.token,s={distinct_id:this._instance.get_distinct_id(),token:r};this.pi()&&(s.evaluation_contexts=this.fi()),this._instance._send_request({method:"POST",url:this._instance.requestRouter.endpointFor("flags","/flags/?v=2&config=true"),data:s,compression:this._instance.config.disable_compression?void 0:nt.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:i=>{var o,a=(o=i.json)==null?void 0:o.featureFlagPayloads;n(a?.[e]||void 0)}})}isFeatureEnabled(e,n){if(n===void 0&&(n={}),this.ai||this.getFlags()&&this.getFlags().length>0){var r=this.getFeatureFlag(e,n);return b(r)?void 0:!!r}Me.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((n=>n!==e))}receivedFeatureFlags(e,n){if(this._instance.persistence){this.ai=!0;var r=this.getFlagVariants(),s=this.getFlagPayloads(),i=this.getFlagsWithDetails();(function(o,a,c,u,l){c===void 0&&(c={}),u===void 0&&(u={}),l===void 0&&(l={});var d=Mf(o),f=d.flags,p=d.featureFlags,h=d.featureFlagPayloads;if(p){var g=o.requestId,m=o.evaluatedAt;if(W(p)){Me.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var v={};if(p)for(var T=0;T<p.length;T++)v[p[T]]=!0;a&&a.register({[Ks]:p,[on]:v})}else{var F=p,O=h,I=f;o.errorsWhileComputingFlags&&(F=w({},c,F),O=w({},u,O),I=w({},l,I)),a&&a.register(w({[Ks]:Object.keys(Ua(F)),[on]:F||{},[La]:O||{},[Ri]:I||{}},g?{[Da]:g}:{},m?{[Ha]:m}:{}))}}})(e,this._instance.persistence,r,s,i),this.wi(n)}}override(e,n){n===void 0&&(n=!1),Me.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:n})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return Me.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(Kt),this._instance.persistence.unregister(Hn),this.wi(),Dn.info("All overrides cleared");if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var n,r=e;if(this.oi=!!((n=r.suppressWarning)!==null&&n!==void 0&&n),"flags"in r){if(r.flags===!1)this._instance.persistence.unregister(Kt),Dn.info("Flag overrides cleared");else if(r.flags){if(W(r.flags)){for(var s={},i=0;i<r.flags.length;i++)s[r.flags[i]]=!0;this._instance.persistence.register({[Kt]:s})}else this._instance.persistence.register({[Kt]:r.flags});Dn.info("Flag overrides set",{flags:r.flags})}}return"payloads"in r&&(r.payloads===!1?(this._instance.persistence.unregister(Hn),Dn.info("Payload overrides cleared")):r.payloads&&(this._instance.persistence.register({[Hn]:r.payloads}),Dn.info("Payload overrides set",{payloads:r.payloads}))),void this.wi()}this.wi()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.ai){var{flags:n,flagVariants:r}=this.xi();e(n,r)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n,r){var s,i=(this._instance.get_property(Vn)||[]).find((u=>u.flagKey===e)),o={["$feature_enrollment/"+e]:n},a={$feature_flag:e,$feature_enrollment:n,$set:o};i&&(a.$early_access_feature_name=i.name),r&&(a.$feature_enrollment_stage=r),this._instance.capture("$feature_enrollment_update",a),this.setPersonPropertiesForFlags(o,!1);var c=w({},this.getFlagVariants(),{[e]:n});(s=this._instance.persistence)==null||s.register({[Ks]:Object.keys(Ua(c)),[on]:c}),this.wi()}getEarlyAccessFeatures(e,n,r){n===void 0&&(n=!1);var s=this._instance.get_property(Vn),i=r?"&"+r.map((o=>"stage="+o)).join("&"):"";if(s&&!n)return e(s);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+i),method:"GET",callback:o=>{var a,c;if(o.json){var u=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.unregister(Vn),(c=this._instance.persistence)==null||c.register({[Vn]:u}),e(u)}}})}xi(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter((r=>n[r])),flagVariants:Object.keys(n).filter((r=>n[r])).reduce(((r,s)=>(r[s]=n[s],r)),{})}}wi(e){var{flags:n,flagVariants:r}=this.xi();this.featureFlagEventHandlers.forEach((s=>s(n,r,{errorsLoading:e})))}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0);var r=this._instance.get_property(zn)||{};this._instance.register({[zn]:w({},r,e)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(zn)}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0);var r=this._instance.get_property(Dt)||{};Object.keys(r).length!==0&&Object.keys(r).forEach((s=>{r[s]=w({},r[s],e[s]),delete e[s]})),this._instance.register({[Dt]:w({},r,e)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this._instance.get_property(Dt)||{};this._instance.register({[Dt]:w({},n,{[e]:{}})})}else this._instance.unregister(Dt)}reset(){this.ai=!1,this.li=!1,this.ui=!1,this.hi=!1,this.di=!1,this.vi=!1,this.$anon_distinct_id=void 0,this.yi(),this.oi=!1}}var Hf=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class Zs{constructor(e,n){this.R=e,this.props={},this.Ei=!1,this.$i=(r=>{var s="";return r.token&&(s=r.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),r.persistence_name?"ph_"+r.persistence_name:"ph_"+s+"_posthog"})(e),this.Y=this.Si(e),this.load(),e.debug&&S.info("Persistence loaded",e.persistence,w({},this.props)),this.update_config(e,e,n),this.save()}isDisabled(){return!!this.ki}Si(e){Hf.indexOf(e.persistence.toLowerCase())===-1&&(S.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=(function(s){s===void 0&&(s=[]);var i=[...of,...s];return w({},ne,{W:function(o){try{var a={};try{a=Ve.W(o)||{}}catch{}var c=le(a,JSON.parse(ne.q(o)||"{}"));return ne.G(o,c),c}catch{}return null},G:function(o,a,c,u,l,d){try{ne.G(o,a,void 0,void 0,d);var f={};i.forEach((p=>{a[p]&&(f[p]=a[p])})),Object.keys(f).length&&Ve.G(o,f,c,u,l,d)}catch(p){ne.B(p)}},V:function(o,a){try{_?.localStorage.removeItem(o),Ve.V(o,a)}catch(c){ne.B(c)}}})})(e.cookie_persisted_properties||[]),r=e.persistence.toLowerCase();return r==="localstorage"&&ne.H()?ne:r==="localstorage+cookie"&&n.H()?n:r==="sessionstorage"&&Ee.H()?Ee:r==="memory"?af:r==="cookie"?Ve:n.H()?n:Ve}properties(){var e={};return K(this.props,(function(n,r){if(r===on&&me(n))for(var s=Object.keys(n),i=0;i<s.length;i++)e["$feature/"+s[i]]=n[s[i]];else a=r,c=!1,(Ge(o=Hp)?c:Zo&&o.indexOf===Zo?o.indexOf(a)!=-1:(K(o,(function(u){if(c||(c=u===a))return es})),c))||(e[r]=n);var o,a,c})),e}load(){if(!this.ki){var e=this.Y.W(this.$i);e&&(this.props=le({},e))}}save(){this.ki||this.Y.G(this.$i,this.props,this.Pi,this.Ti,this.Ii,this.R.debug)}remove(){this.Y.V(this.$i,!1),this.Y.V(this.$i,!0)}clear(){this.remove(),this.props={}}register_once(e,n,r){if(me(e)){b(n)&&(n="None"),this.Pi=b(r)?this.Ci:r;var s=!1;if(K(e,((i,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=i,s=!0)})),s)return this.save(),!0}return!1}register(e,n){if(me(e)){this.Pi=b(n)?this.Ci:n;var r=!1;if(K(e,((s,i)=>{e.hasOwnProperty(i)&&this.props[i]!==s&&(this.props[i]=s,r=!0)})),r)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Ei){var e=Xu(this.R.custom_campaign_params,this.R.mask_personal_data_properties,this.R.custom_personal_data_properties);sn(go(e))||this.register(e),this.Ei=!0}}update_search_keyword(){var e;this.register((e=E?.referrer)?Zu(e):{})}update_referrer_info(){var e;this.register_once({$referrer:Qu(),$referring_domain:E!=null&&E.referrer&&((e=os(E.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[$i]||this.props[Oi]||this.register_once({[rs]:el(this.R.mask_personal_data_properties,this.R.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};K([Oi,$i],(o=>{var a=this.props[o];a&&K(a,(function(c,u){e["$initial_"+yi(u)]=c}))}));var n,r,s=this.props[rs];if(s){var i=(n=tl(s),r={},K(n,(function(o,a){r["$initial_"+yi(a)]=o})),r);le(e,i)}return e}safe_merge(e){return K(this.props,(function(n,r){r in e||(e[r]=n)})),e}update_config(e,n,r){if(this.Ci=this.Pi=e.cookie_expiration,this.set_disabled(e.disable_persistence||!!r),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence||!((o,a)=>{if(o.length!==a.length)return!1;var c=[...o].sort(),u=[...a].sort();return c.every(((l,d)=>l===u[d]))})(e.cookie_persisted_properties||[],n.cookie_persisted_properties||[])){var s=this.Si(e),i=this.props;this.clear(),this.Y=s,this.props=i,this.save()}}set_disabled(e){this.ki=e,this.ki?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ti&&(this.Ti=e,this.remove(),this.save())}set_secure(e){e!==this.Ii&&(this.Ii=e,this.remove(),this.save())}set_event_timer(e,n){var r=this.props[Gn]||{};r[e]=n,this.props[Gn]=r,this.save()}remove_event_timer(e){var n=(this.props[Gn]||{})[e];return b(n)||(delete this.props[Gn][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}var Ba=oe("[Product Tours]"),Qs="ph_product_tours";class Uf{constructor(e){this.Ri=null,this.Fi=null,this._instance=e}onRemoteConfig(e){this._instance.persistence&&this._instance.persistence.register({[ha]:!(e==null||!e.productTours)}),this.loadIfEnabled()}loadIfEnabled(){var e,n;this.Ri||(e=this._instance).config.disable_product_tours||(n=e.persistence)==null||!n.get_property(ha)||this.it((()=>this.Mi()))}it(e){var n,r;(n=x.__PosthogExtensions__)!=null&&n.generateProductTours?e():(r=x.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"product-tours",(s=>{s?Ba.error("Could not load product tours script",s):e()}))}Mi(){var e;!this.Ri&&(e=x.__PosthogExtensions__)!=null&&e.generateProductTours&&(this.Ri=x.__PosthogExtensions__.generateProductTours(this._instance,!0))}getProductTours(e,n){if(n===void 0&&(n=!1),!W(this.Fi)||n){var r=this._instance.persistence;if(r){var s=r.props[Qs];if(W(s)&&!n)return this.Fi=s,void e(s,{isLoaded:!0})}this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/product_tours/?token="+this._instance.config.token),method:"GET",callback:i=>{var o=i.statusCode;if(o!==200||!i.json){var a="Product Tours API could not be loaded, status: "+o;return Ba.error(a),void e([],{isLoaded:!1,error:a})}var c=W(i.json.product_tours)?i.json.product_tours:[];this.Fi=c,r&&r.register({[Qs]:c}),e(c,{isLoaded:!0})}})}else e(this.Fi,{isLoaded:!0})}getActiveProductTours(e){B(this.Ri)?e([],{isLoaded:!1,error:"Product tours not loaded"}):this.Ri.getActiveProductTours(e)}showProductTour(e){var n;(n=this.Ri)==null||n.showTourById(e)}previewTour(e){this.Ri?this.Ri.previewTour(e):this.it((()=>{var n;this.Mi(),(n=this.Ri)==null||n.previewTour(e)}))}dismissProductTour(){var e;(e=this.Ri)==null||e.dismissTour("user_clicked_skip")}nextStep(){var e;(e=this.Ri)==null||e.nextStep()}previousStep(){var e;(e=this.Ri)==null||e.previousStep()}clearCache(){var e;this.Fi=null,(e=this._instance.persistence)==null||e.unregister(Qs)}resetTour(e){var n;(n=this.Ri)==null||n.resetTour(e)}resetAllTours(){var e;(e=this.Ri)==null||e.resetAllTours()}cancelPendingTour(e){var n;(n=this.Ri)==null||n.cancelPendingTour(e)}}var Un=(function(t){return t.Activation="events",t.Cancellation="cancelEvents",t})({});(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({});(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({});(function(t){return t.Top="top",t.Left="left",t.Right="right",t.Bottom="bottom",t})({});var ei=(function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t.ExternalSurvey="external_survey",t})({});(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({});(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({});(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({});var Jn=(function(t){return t.SHOWN="survey shown",t.DISMISSED="survey dismissed",t.SENT="survey sent",t.ABANDONED="survey abandoned",t})({}),ti=(function(t){return t.SURVEY_ID="$survey_id",t.SURVEY_NAME="$survey_name",t.SURVEY_RESPONSE="$survey_response",t.SURVEY_ITERATION="$survey_iteration",t.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",t.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",t.SURVEY_SUBMISSION_ID="$survey_submission_id",t.SURVEY_QUESTIONS="$survey_questions",t.SURVEY_COMPLETED="$survey_completed",t.PRODUCT_TOUR_ID="$product_tour_id",t.SURVEY_LAST_SEEN_DATE="$survey_last_seen_date",t})({}),Di=(function(t){return t.Popover="popover",t.Inline="inline",t})({}),Y=oe("[Surveys]"),ll="seenSurvey_",Bf=(t,e)=>{var n="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(n="$survey_"+e+"/"+t.id+"/"+t.current_iteration),n},ja=t=>((e,n)=>{var r=""+e+n.id;return n.current_iteration&&n.current_iteration>0&&(r=""+e+n.id+"_"+n.current_iteration),r})(ll,t),jf=[ei.Popover,ei.Widget,ei.API],qf={ignoreConditions:!1,ignoreDelay:!1,displayType:Di.Popover};class Eo{constructor(){this.Oi={},this.Oi={}}on(e,n){return this.Oi[e]||(this.Oi[e]=[]),this.Oi[e].push(n),()=>{this.Oi[e]=this.Oi[e].filter((r=>r!==n))}}emit(e,n){for(var r of this.Oi[e]||[])r(n);for(var s of this.Oi["*"]||[])s(e,n)}}function Zt(t,e,n){if(B(t))return!1;switch(n){case"exact":return t===e;case"contains":var r=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/_/g,".").replace(/%/g,".*");return new RegExp(r,"i").test(t);case"regex":try{return new RegExp(e).test(t)}catch{return!1}default:return!1}}class Wf{constructor(e){this.Ai=new Eo,this.Di=(n,r)=>this.ji(n,r)&&this.Li(n,r)&&this.Ni(n,r)&&this.Ui(n,r),this.ji=(n,r)=>r==null||!r.event||n?.event===r?.event,this._instance=e,this.zi=new Set,this.Hi=new Set}init(){var e;if(!b((e=this._instance)==null?void 0:e.Bi)){var n;(n=this._instance)==null||n.Bi(((r,s)=>{this.on(r,s)}))}}register(e){var n,r;if(!b((n=this._instance)==null?void 0:n.Bi)&&(e.forEach((o=>{var a,c;(a=this.Hi)==null||a.add(o),(c=o.steps)==null||c.forEach((u=>{var l;(l=this.zi)==null||l.add(u?.event||"")}))})),(r=this._instance)!=null&&r.autocapture)){var s,i=new Set;e.forEach((o=>{var a;(a=o.steps)==null||a.forEach((c=>{c!=null&&c.selector&&i.add(c?.selector)}))})),(s=this._instance)==null||s.autocapture.setElementSelectors(i)}}on(e,n){var r;n!=null&&e.length!=0&&(this.zi.has(e)||this.zi.has(n?.event))&&this.Hi&&((r=this.Hi)==null?void 0:r.size)>0&&this.Hi.forEach((s=>{this.qi(n,s)&&this.Ai.emit("actionCaptured",s.name)}))}Wi(e){this.onAction("actionCaptured",(n=>e(n)))}qi(e,n){if(n?.steps==null)return!1;for(var r of n.steps)if(this.Di(e,r))return!0;return!1}onAction(e,n){return this.Ai.on(e,n)}Li(e,n){if(n!=null&&n.url){var r,s=e==null||(r=e.properties)==null?void 0:r.$current_url;if(!s||typeof s!="string"||!Zt(s,n.url,n.url_matching||"contains"))return!1}return!0}Ni(e,n){return!!this.Gi(e,n)&&!!this.Vi(e,n)&&!!this.Ji(e,n)}Gi(e,n){var r;if(n==null||!n.href)return!0;var s=this.Ki(e);if(s.length>0)return s.some((a=>Zt(a.href,n.href,n.href_matching||"exact")));var i,o=(e==null||(r=e.properties)==null?void 0:r.$elements_chain)||"";return!!o&&Zt((i=o.match(/(?::|")href="(.*?)"/))?i[1]:"",n.href,n.href_matching||"exact")}Vi(e,n){var r;if(n==null||!n.text)return!0;var s=this.Ki(e);if(s.length>0)return s.some((u=>Zt(u.text,n.text,n.text_matching||"exact")||Zt(u.$el_text,n.text,n.text_matching||"exact")));var i,o,a,c=(e==null||(r=e.properties)==null?void 0:r.$elements_chain)||"";return!!c&&(i=(function(u){for(var l,d=[],f=/(?::|")text="(.*?)"/g;!B(l=f.exec(u));)d.includes(l[1])||d.push(l[1]);return d})(c),o=n.text,a=n.text_matching||"exact",i.some((u=>Zt(u,o,a))))}Ji(e,n){var r,s;if(n==null||!n.selector)return!0;var i=e==null||(r=e.properties)==null?void 0:r.$element_selectors;if(i!=null&&i.includes(n.selector))return!0;var o=(e==null||(s=e.properties)==null?void 0:s.$elements_chain)||"";if(n.selector_regex&&o)try{return new RegExp(n.selector_regex).test(o)}catch{return!1}return!1}Ki(e){var n;return(e==null||(n=e.properties)==null?void 0:n.$elements)==null?[]:e?.properties.$elements}Ui(e,n){return n==null||!n.properties||n.properties.length===0||ul(n.properties.reduce(((r,s)=>{var i=W(s.value)?s.value.map(String):s.value!=null?[String(s.value)]:[];return r[s.key]={values:i,operator:s.operator||"exact"},r}),{}),e?.properties)}}class Gf{constructor(e){this._instance=e,this.Yi=new Map,this.Xi=new Map,this.Qi=new Map}Zi(e,n){return!!e&&ul(e.propertyFilters,n?.properties)}te(e,n){var r=new Map;return e.forEach((s=>{var i;(i=s.conditions)==null||(i=i[n])==null||(i=i.values)==null||i.forEach((o=>{if(o!=null&&o.name){var a=r.get(o.name)||[];a.push(s.id),r.set(o.name,a)}}))})),r}ie(e,n,r){var s=(r===Un.Activation?this.Yi:this.Xi).get(e),i=[];return this.ee((o=>{i=o.filter((a=>s?.includes(a.id)))})),i.filter((o=>{var a,c=(a=o.conditions)==null||(a=a[r])==null||(a=a.values)==null?void 0:a.find((u=>u.name===e));return this.Zi(c,n)}))}register(e){var n;b((n=this._instance)==null?void 0:n.Bi)||(this.re(e),this.se(e))}se(e){var n=e.filter((r=>{var s,i;return((s=r.conditions)==null?void 0:s.actions)&&((i=r.conditions)==null||(i=i.actions)==null||(i=i.values)==null?void 0:i.length)>0}));n.length!==0&&(this.ne==null&&(this.ne=new Wf(this._instance),this.ne.init(),this.ne.Wi((r=>{this.onAction(r)}))),n.forEach((r=>{var s,i,o,a,c;r.conditions&&(s=r.conditions)!=null&&s.actions&&(i=r.conditions)!=null&&(i=i.actions)!=null&&i.values&&((o=r.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.ne)==null||a.register(r.conditions.actions.values),(c=r.conditions)==null||(c=c.actions)==null||(c=c.values)==null||c.forEach((u=>{if(u&&u.name){var l=this.Qi.get(u.name);l&&l.push(r.id),this.Qi.set(u.name,l||[r.id])}})))})))}re(e){var n,r=e.filter((i=>{var o,a;return((o=i.conditions)==null?void 0:o.events)&&((a=i.conditions)==null||(a=a.events)==null||(a=a.values)==null?void 0:a.length)>0})),s=e.filter((i=>{var o,a;return((o=i.conditions)==null?void 0:o.cancelEvents)&&((a=i.conditions)==null||(a=a.cancelEvents)==null||(a=a.values)==null?void 0:a.length)>0}));(r.length!==0||s.length!==0)&&((n=this._instance)==null||n.Bi(((i,o)=>{this.onEvent(i,o)})),this.Yi=this.te(e,Un.Activation),this.Xi=this.te(e,Un.Cancellation))}onEvent(e,n){var r,s=this.oe(),i=this.ae(),o=this.le(),a=((r=this._instance)==null||(r=r.persistence)==null?void 0:r.props[i])||[];if(o===e&&n&&a.length>0){var c,u;s.info("event matched, removing item from activated items",{event:e,eventPayload:n,existingActivatedItems:a});var l=(n==null||(c=n.properties)==null?void 0:c.$survey_id)||(n==null||(u=n.properties)==null?void 0:u.$product_tour_id);if(l){var d=a.indexOf(l);d>=0&&(a.splice(d,1),this.ue(a))}}else{if(this.Xi.has(e)){var f=this.ie(e,n,Un.Cancellation);f.length>0&&(s.info("cancel event matched, cancelling items",{event:e,itemsToCancel:f.map((h=>h.id))}),f.forEach((h=>{var g=a.indexOf(h.id);g>=0&&a.splice(g,1),this.he(h.id)})),this.ue(a))}if(this.Yi.has(e)){s.info("event name matched",{event:e,eventPayload:n,items:this.Yi.get(e)});var p=this.ie(e,n,Un.Activation);this.ue(a.concat(p.map((h=>h.id))||[]))}}}onAction(e){var n,r=this.ae(),s=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[r])||[];this.Qi.has(e)&&this.ue(s.concat(this.Qi.get(e)||[]))}ue(e){var n,r=this.oe(),s=this.ae(),i=[...new Set(e)].filter((o=>!this.de(o)));r.info("updating activated items",{activatedItems:i}),(n=this._instance)==null||(n=n.persistence)==null||n.register({[s]:i})}getActivatedIds(){var e,n=this.ae(),r=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[n];return r||[]}getEventToItemsMap(){return this.Yi}ve(){return this.ne}}class Vf extends Gf{constructor(e){super(e)}ae(){return"$surveys_activated"}le(){return Jn.SHOWN}ee(e){var n;(n=this._instance)==null||n.getSurveys(e)}he(e){var n;(n=this._instance)==null||n.cancelPendingSurvey(e)}oe(){return Y}de(){return!1}getSurveys(){return this.getActivatedIds()}getEventToSurveys(){return this.getEventToItemsMap()}}class zf{constructor(e){this.ce=void 0,this._surveyManager=null,this.fe=!1,this.pe=[],this.ge=null,this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){if(!this._instance.config.disable_surveys){var n=e.surveys;if(B(n))return Y.warn("Flags not loaded yet. Not loading surveys.");var r=W(n);this.ce=r?n.length>0:n,Y.info("flags response received, isSurveysEnabled: "+this.ce),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);(r!=null&&r.startsWith(ll)||r!=null&&r.startsWith("inProgressSurvey_"))&&e.push(r)}e.forEach((s=>localStorage.removeItem(s)))}loadIfEnabled(){if(!this._surveyManager)if(this.fe)Y.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Y.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())Y.info("Not loading surveys in cookieless mode without consent.");else{var e=x?.__PosthogExtensions__;if(e){if(!b(this.ce)||this._instance.config.advanced_enable_surveys){var n=this.ce||this._instance.config.advanced_enable_surveys;this.fe=!0;try{var r=e.generateSurveys;if(r)return void this._e(r,n);var s=e.loadExternalDependency;if(!s)return void this.me("PostHog loadExternalDependency extension not found.");s(this._instance,"surveys",(i=>{i||!e.generateSurveys?this.me("Could not load surveys script",i):this._e(e.generateSurveys,n)}))}catch(i){throw this.me("Error initializing surveys",i),i}finally{this.fe=!1}}}else Y.error("PostHog Extensions not found.")}}_e(e,n){this._surveyManager=e(this._instance,n),this._surveyEventReceiver=new Vf(this._instance),Y.info("Surveys loaded successfully"),this.ye({isLoaded:!0})}me(e,n){Y.error(e,n),this.ye({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.pe.push(e),this._surveyManager&&this.ye({isLoaded:!0}),()=>{this.pe=this.pe.filter((n=>n!==e))}}getSurveys(e,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return Y.info("Disabled. Not loading surveys."),e([]);var r,s=this._instance.get_property(Pi);if(s&&!n)return e(s,{isLoaded:!0});typeof Promise<"u"&&this.ge?this.ge.then((i=>{var{surveys:o,context:a}=i;return e(o,a)})):(typeof Promise<"u"&&(this.ge=new Promise((i=>{r=i}))),this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:i=>{var o;this.ge=null;var a=i.statusCode;if(a!==200||!i.json){var c="Surveys API could not be loaded, status: "+a;Y.error(c);var u={isLoaded:!1,error:c};return e([],u),void(r==null||r({surveys:[],context:u}))}var l,d=i.json.surveys||[],f=d.filter((h=>(function(g){return!(!g.start_date||g.end_date)})(h)&&((function(g){var m;return!((m=g.conditions)==null||(m=m.events)==null||(m=m.values)==null||!m.length)})(h)||(function(g){var m;return!((m=g.conditions)==null||(m=m.actions)==null||(m=m.values)==null||!m.length)})(h))));f.length>0&&((l=this._surveyEventReceiver)==null||l.register(f)),(o=this._instance.persistence)==null||o.register({[Pi]:d});var p={isLoaded:!0};e(d,p),r?.({surveys:d,context:p})}}))}ye(e){for(var n of this.pe)try{if(!e.isLoaded)return n([],e);this.getSurveys(n)}catch(r){Y.error("Error in survey callback",r)}}getActiveMatchingSurveys(e,n){if(n===void 0&&(n=!1),!B(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(e,n);Y.warn("init was not called")}be(e){var n=null;return this.getSurveys((r=>{var s;n=(s=r.find((i=>i.id===e)))!==null&&s!==void 0?s:null})),n}we(e){if(B(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof e=="string"?this.be(e):e;return n?this._surveyManager.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(B(this._surveyManager))return Y.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.we(e);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(e,n){return B(this._surveyManager)?(Y.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise((r=>{this.getSurveys((s=>{var i,o=(i=s.find((c=>c.id===e)))!==null&&i!==void 0?i:null;if(o){var a=this.we(o);r({visible:a.eligible,disabledReason:a.reason})}else r({visible:!1,disabledReason:"Survey not found"})}),n)}))}renderSurvey(e,n,r){var s;if(B(this._surveyManager))Y.warn("init was not called");else{var i=typeof e=="string"?this.be(e):e;if(i!=null&&i.id)if(jf.includes(i.type)){var o=E?.querySelector(n);if(o)return(s=i.appearance)!=null&&s.surveyPopupDelaySeconds?(Y.info("Rendering survey "+i.id+" with delay of "+i.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout((()=>{var a,c;Y.info("Rendering survey "+i.id+" with delay of "+((a=i.appearance)==null?void 0:a.surveyPopupDelaySeconds)+" seconds"),(c=this._surveyManager)==null||c.renderSurvey(i,o,r),Y.info("Survey "+i.id+" rendered")}),1e3*i.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(i,o,r);Y.warn("Survey element not found")}else Y.warn("Surveys of type "+i.type+" cannot be rendered in the app");else Y.warn("Survey not found")}}displaySurvey(e,n){var r;if(B(this._surveyManager))Y.warn("init was not called");else{var s=this.be(e);if(s){var i=s;if((r=s.appearance)!=null&&r.surveyPopupDelaySeconds&&n.ignoreDelay&&(i=w({},s,{appearance:w({},s.appearance,{surveyPopupDelaySeconds:0})})),n.displayType!==Di.Popover&&n.initialResponses&&Y.warn("initialResponses is only supported for popover surveys. prefill will not be applied."),n.ignoreConditions===!1){var o=this.canRenderSurvey(s);if(!o.visible)return void Y.warn("Survey is not eligible to be displayed: ",o.disabledReason)}n.displayType!==Di.Inline?this._surveyManager.handlePopoverSurvey(i,n):this.renderSurvey(i,n.selector,n.properties)}else Y.warn("Survey not found")}}cancelPendingSurvey(e){B(this._surveyManager)?Y.warn("init was not called"):this._surveyManager.cancelSurvey(e)}handlePageUnload(){var e;(e=this._surveyManager)==null||e.handlePageUnload()}}var Ke=oe("[Conversations]");class Yf{constructor(e){this.xe=void 0,this._conversationsManager=null,this.Ee=!1,this.$e=null,this._instance=e}onRemoteConfig(e){if(!this._instance.config.disable_conversations){var n=e.conversations;B(n)||(st(n)?this.xe=n:(this.xe=n.enabled,this.$e=n),this.loadIfEnabled())}}reset(){var e;(e=this._conversationsManager)==null||e.reset(),this._conversationsManager=null,this.xe=void 0,this.$e=null}loadIfEnabled(){if(!this._conversationsManager&&!this.Ee&&!(this._instance.config.disable_conversations||this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())){var e=x?.__PosthogExtensions__;if(e&&!b(this.xe)&&this.xe)if(this.$e&&this.$e.token){this.Ee=!0;try{var n=e.initConversations;if(n)return this.Se(n),void(this.Ee=!1);var r=e.loadExternalDependency;if(!r)return void this.ke("PostHog loadExternalDependency extension not found.");r(this._instance,"conversations",(s=>{s||!e.initConversations?this.ke("Could not load conversations script",s):this.Se(e.initConversations),this.Ee=!1}))}catch(s){this.ke("Error initializing conversations",s),this.Ee=!1}}else Ke.error("Conversations enabled but missing token in remote config.")}}Se(e){if(this.$e)try{this._conversationsManager=e(this.$e,this._instance),Ke.info("Conversations loaded successfully")}catch(n){this.ke("Error completing conversations initialization",n)}else Ke.error("Cannot complete initialization: remote config is null")}ke(e,n){Ke.error(e,n),this._conversationsManager=null,this.Ee=!1}show(){this._conversationsManager?this._conversationsManager.show():Ke.warn("Conversations not loaded yet.")}hide(){this._conversationsManager&&this._conversationsManager.hide()}isAvailable(){return this.xe===!0&&!Ge(this._conversationsManager)}isVisible(){var e,n;return(e=(n=this._conversationsManager)==null?void 0:n.isVisible())!==null&&e!==void 0&&e}sendMessage(e,n,r){var s=this;return rn((function*(){return s._conversationsManager?s._conversationsManager.sendMessage(e,n,r):(Ke.warn("Conversations not available yet."),null)}))()}getMessages(e,n){var r=this;return rn((function*(){return r._conversationsManager?r._conversationsManager.getMessages(e,n):(Ke.warn("Conversations not available yet."),null)}))()}markAsRead(e){var n=this;return rn((function*(){return n._conversationsManager?n._conversationsManager.markAsRead(e):(Ke.warn("Conversations not available yet."),null)}))()}getTickets(e){var n=this;return rn((function*(){return n._conversationsManager?n._conversationsManager.getTickets(e):(Ke.warn("Conversations not available yet."),null)}))()}getCurrentTicketId(){var e,n;return(e=(n=this._conversationsManager)==null?void 0:n.getCurrentTicketId())!==null&&e!==void 0?e:null}getWidgetSessionId(){var e,n;return(e=(n=this._conversationsManager)==null?void 0:n.getWidgetSessionId())!==null&&e!==void 0?e:null}}class Jf{constructor(e){var n;this.Pe=!1,this.Te=!1,this._instance=e,this._instance&&(n=this._instance.config.logs)!=null&&n.captureConsoleLogs&&(this.Pe=!0)}onRemoteConfig(e){var n,r=(n=e.logs)==null?void 0:n.captureConsoleLogs;!B(r)&&r&&(this.Pe=!0,this.loadIfEnabled())}reset(){}loadIfEnabled(){if(this.Pe&&!this.Te){var e=oe("[logs]"),n=x?.__PosthogExtensions__;if(n){var r=n.loadExternalDependency;r?r(this._instance,"logs",(s=>{var i;s||(i=n.logs)==null||!i.initializeLogs?e.error("Could not load logs script",s):(n.logs.initializeLogs(this._instance),this.Te=!0)})):e.error("PostHog loadExternalDependency extension not found.")}else e.error("PostHog Extensions not found.")}}}var qa=oe("[RateLimiter]");class Xf{constructor(e){this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=n=>{var r=n.text;if(r&&r.length)try{(JSON.parse(r).quota_limited||[]).forEach((s=>{qa.info((s||"events")+" is quota limited."),this.serverLimits[s]=new Date().getTime()+6e4}))}catch(s){return void qa.warn('could not rate limit - continuing. Error: "'+s?.message+'"',{text:r})}},this.instance=e,this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}get captureEventsPerSecond(){var e;return((e=this.instance.config.rate_limiting)==null?void 0:e.events_per_second)||10}get captureEventsBurstLimit(){var e;return Math.max(((e=this.instance.config.rate_limiting)==null?void 0:e.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond)}clientRateLimitContext(e){var n,r,s;e===void 0&&(e=!1);var{captureEventsBurstLimit:i,captureEventsPerSecond:o}=this,a=new Date().getTime(),c=(n=(r=this.instance.persistence)==null?void 0:r.get_property(Ai))!==null&&n!==void 0?n:{tokens:i,last:a};c.tokens+=(a-c.last)/1e3*o,c.last=a,c.tokens>i&&(c.tokens=i);var u=c.tokens<1;return u||e||(c.tokens=Math.max(0,c.tokens-1)),!u||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+o+" events per second and "+i+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=u,(s=this.instance.persistence)==null||s.set_property(Ai,c),{isRateLimited:u,remainingTokens:c.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}}var Mt=oe("[RemoteConfig]");class Kf{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=x._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}Ie(e){var n,r;(n=x.__PosthogExtensions__)!=null&&n.loadExternalDependency?(r=x.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"remote-config",(()=>e(this.remoteConfig))):(Mt.error("PostHog Extensions not found. Cannot load remote config."),e())}Ce(e){this._instance._send_request({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return Mt.info("Using preloaded remote config",this.remoteConfig),void this.bi(this.remoteConfig);if(this._instance.O())return void Mt.warn("Remote config is disabled. Falling back to local config.");this.Ie((e=>{if(!e)return Mt.info("No config found after loading remote JS config. Falling back to JSON."),void this.Ce((n=>{this.bi(n)}));this.bi(e)}))}catch(e){Mt.error("Error loading remote config",e)}}bi(e){e?this._instance.config.__preview_remote_config?(this._instance.bi(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):Mt.info("__preview_remote_config is disabled. Logging config instead",e):Mt.error("Failed to fetch remote config from PostHog.")}}var Hi=3e3;let Zf=class{constructor(e,n){this.Re=!0,this.Fe=[],this.Me=ze(n?.flush_interval_ms||Hi,250,5e3,S.createLogger("flush interval"),Hi),this.Oe=e}enqueue(e){this.Fe.push(e),this.Ae||this.De()}unload(){this.je();var e=this.Fe.length>0?this.Le():{},n=Object.values(e);[...n.filter((r=>r.url.indexOf("/e")===0)),...n.filter((r=>r.url.indexOf("/e")!==0))].map((r=>{this.Oe(w({},r,{transport:"sendBeacon"}))}))}enable(){this.Re=!1,this.De()}De(){var e=this;this.Re||(this.Ae=setTimeout((()=>{if(this.je(),this.Fe.length>0){var n=this.Le(),r=function(){var i=n[s],o=new Date().getTime();i.data&&W(i.data)&&K(i.data,(a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp})),e.Oe(i)};for(var s in n)r()}}),this.Me))}je(){clearTimeout(this.Ae),this.Ae=void 0}Le(){var e={};return K(this.Fe,(n=>{var r,s=n,i=(s?s.batchKey:null)||s.url;b(e[i])&&(e[i]=w({},s,{data:[]})),(r=e[i].data)==null||r.push(s.data)})),this.Fe=[],e}};var Qf=["retriesPerformedSoFar"];class eh{constructor(e){this.Ne=!1,this.Ue=3e3,this.Fe=[],this._instance=e,this.Fe=[],this.ze=!0,!b(_)&&"onLine"in _.navigator&&(this.ze=_.navigator.onLine,this.He=()=>{this.ze=!0,this.Lt()},this.Be=()=>{this.ze=!1},he(_,"online",this.He),he(_,"offline",this.Be))}get length(){return this.Fe.length}retriableRequest(e){var{retriesPerformedSoFar:n}=e,r=iu(e,Qf);tn(n)&&(r.url=ds(r.url,{retry_count:n})),this._instance._send_request(w({},r,{callback:s=>{s.statusCode!==200&&(s.statusCode<400||s.statusCode>=500)&&(n??0)<10?this.qe(w({retriesPerformedSoFar:n},r)):r.callback==null||r.callback(s)}}))}qe(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var r=(function(o){var a=3e3*Math.pow(2,o),c=a/2,u=Math.min(18e5,a),l=(Math.random()-.5)*(u-c);return Math.ceil(u+l)})(n),s=Date.now()+r;this.Fe.push({retryAt:s,requestOptions:e});var i="Enqueued failed request for retry in "+r;navigator.onLine||(i+=" (Browser is offline)"),S.warn(i),this.Ne||(this.Ne=!0,this.We())}We(){if(this.Ge&&clearTimeout(this.Ge),this.Fe.length===0)return this.Ne=!1,void(this.Ge=void 0);this.Ge=setTimeout((()=>{this.ze&&this.Fe.length>0&&this.Lt(),this.We()}),this.Ue)}Lt(){var e=Date.now(),n=[],r=this.Fe.filter((i=>i.retryAt<e||(n.push(i),!1)));if(this.Fe=n,r.length>0)for(var{requestOptions:s}of r)this.retriableRequest(s)}unload(){for(var{requestOptions:e}of(this.Ge&&(clearTimeout(this.Ge),this.Ge=void 0),this.Ne=!1,b(_)||(this.He&&(_.removeEventListener("online",this.He),this.He=void 0),this.Be&&(_.removeEventListener("offline",this.Be),this.Be=void 0)),this.Fe))try{this._instance._send_request(w({},e,{transport:"sendBeacon"}))}catch(n){S.error(n)}this.Fe=[]}}class th{constructor(e){this.Ve=()=>{var n,r,s,i;this.Je||(this.Je={});var o=this.scrollElement(),a=this.scrollY(),c=o?Math.max(0,o.scrollHeight-o.clientHeight):0,u=a+(o?.clientHeight||0),l=o?.scrollHeight||0;this.Je.lastScrollY=Math.ceil(a),this.Je.maxScrollY=Math.max(a,(n=this.Je.maxScrollY)!==null&&n!==void 0?n:0),this.Je.maxScrollHeight=Math.max(c,(r=this.Je.maxScrollHeight)!==null&&r!==void 0?r:0),this.Je.lastContentY=u,this.Je.maxContentY=Math.max(u,(s=this.Je.maxContentY)!==null&&s!==void 0?s:0),this.Je.maxContentHeight=Math.max(l,(i=this.Je.maxContentHeight)!==null&&i!==void 0?i:0)},this._instance=e}getContext(){return this.Je}resetContext(){var e=this.Je;return setTimeout(this.Ve,0),e}startMeasuringScrollPosition(){he(_,"scroll",this.Ve,{capture:!0}),he(_,"scrollend",this.Ve,{capture:!0}),he(_,"resize",this.Ve)}scrollElement(){if(!this._instance.config.scroll_root_selector)return _?.document.documentElement;var e=W(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of e){var r=_?.document.querySelector(n);if(r)return r}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return _&&(_.scrollY||_.pageYOffset||_.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return _&&(_.scrollX||_.pageXOffset||_.document.documentElement.scrollLeft)||0}}var nh=t=>el(t?.config.mask_personal_data_properties,t?.config.custom_personal_data_properties);class Wa{constructor(e,n,r,s){this.Ke=i=>{var o=this.Ye();if(!o||o.sessionId!==i){var a={sessionId:i,props:this.Xe(this._instance)};this.Qe.register({[Ci]:a})}},this._instance=e,this.Ze=n,this.Qe=r,this.Xe=s||nh,this.Ze.onSessionId(this.Ke)}Ye(){return this.Qe.props[Ci]}getSetOnceProps(){var e,n=(e=this.Ye())==null?void 0:e.props;return n?"r"in n?tl(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var e={};return K(go(this.getSetOnceProps()),((n,r)=>{r==="$current_url"&&(r="url"),e["$session_entry_"+yi(r)]=n})),e}}var ni=oe("[SessionId]");class Ga{on(e,n){return this.tr.on(e,n)}constructor(e,n,r){var s;if(this.ir=[],this.er=void 0,this.tr=new Eo,this.rr=(l,d)=>!(!tn(l)||!tn(d))&&Math.abs(l-d)>this.sessionTimeoutMs,!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.cookieless_mode==="always")throw new Error('SessionIdManager cannot be used with cookieless_mode="always"');this.R=e.config,this.Qe=e.persistence,this.sr=void 0,this.nr=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.ar=n||vt,this.lr=r||vt;var i=this.R.persistence_name||this.R.token,o=this.R.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*ze(o,60,36e3,ni.createLogger("session_idle_timeout_seconds"),1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.ur(),this.hr="ph_"+i+"_window_id",this.dr="ph_"+i+"_primary_window_exists",this.vr()){var a=Ee.W(this.hr),c=Ee.W(this.dr);a&&!c?this.sr=a:Ee.V(this.hr),Ee.G(this.dr,!0)}if((s=this.R.bootstrap)!=null&&s.sessionID)try{var u=(l=>{var d=l.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.R.bootstrap.sessionID);this.cr(this.R.bootstrap.sessionID,new Date().getTime(),u)}catch(l){ni.error("Invalid sessionID in bootstrap",l)}this.pr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return b(this.ir)&&(this.ir=[]),this.ir.push(e),this.nr&&e(this.nr,this.sr),()=>{this.ir=this.ir.filter((n=>n!==e))}}vr(){return this.R.persistence!=="memory"&&!this.Qe.ki&&Ee.H()}gr(e){e!==this.sr&&(this.sr=e,this.vr()&&Ee.G(this.hr,e))}_r(){return this.sr?this.sr:this.vr()?Ee.W(this.hr):null}cr(e,n,r){e===this.nr&&n===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=n,this.nr=e,this.Qe.register({[ts]:[n,e,r]}))}mr(){var e=this.Qe.props[ts];return W(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.cr(null,null,null)}destroy(){clearTimeout(this.yr),this.yr=void 0,this.er&&_&&(_.removeEventListener("beforeunload",this.er,{capture:!1}),this.er=void 0),this.ir=[]}pr(){this.er=()=>{this.vr()&&Ee.V(this.dr)},he(_,"beforeunload",this.er,{capture:!1})}checkAndGetSessionAndWindowId(e,n){if(e===void 0&&(e=!1),n===void 0&&(n=null),this.R.cookieless_mode==="always")throw new Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var r=n||new Date().getTime(),[s,i,o]=this.mr(),a=this._r(),c=tn(o)&&Math.abs(r-o)>864e5,u=!1,l=!i,d=!l&&!e&&this.rr(r,s);l||d||c?(i=this.ar(),a=this.lr(),ni.info("new session ID generated",{sessionId:i,windowId:a,changeReason:{noSessionId:l,activityTimeout:d,sessionPastMaximumLength:c}}),o=r,u=!0):a||(a=this.lr(),u=!0);var f=tn(s)&&e&&!c?s:r,p=tn(o)?o:new Date().getTime();return this.gr(a),this.cr(i,f,p),e||this.ur(),u&&this.ir.forEach((h=>h(i,a,u?{noSessionId:l,activityTimeout:d,sessionPastMaximumLength:c}:void 0))),{sessionId:i,windowId:a,sessionStartTimestamp:p,changeReason:u?{noSessionId:l,activityTimeout:d,sessionPastMaximumLength:c}:void 0,lastActivityTimestamp:s}}ur(){clearTimeout(this.yr),this.yr=setTimeout((()=>{var[e]=this.mr();if(this.rr(new Date().getTime(),e)){var n=this.nr;this.resetSessionId(),this.tr.emit("forcedIdleReset",{idleSessionId:n})}}),1.1*this.sessionTimeoutMs)}}var rh=["$set_once","$set"],gt=oe("[SiteApps]");class sh{constructor(e){this._instance=e,this.br=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}wr(e,n){if(n){var r=this.globalsForEvent(n);this.br.push(r),this.br.length>1e3&&(this.br=this.br.slice(10))}}get siteAppLoaders(){var e;return(e=x._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Bi(this.wr.bind(this));this.Er=()=>{e(),this.br=[],this.Er=void 0}}}globalsForEvent(e){var n,r,s,i,o,a,c;if(!e)throw new Error("Event payload is required");var u={},l=this._instance.get_property("$groups")||[],d=this._instance.get_property("$stored_group_properties")||{};for(var[f,p]of Object.entries(d))u[f]={id:l[f],type:f,properties:p};var{$set_once:h,$set:g}=e;return{event:w({},iu(e,rh),{properties:w({},e.properties,g?{$set:w({},(n=(r=e.properties)==null?void 0:r.$set)!==null&&n!==void 0?n:{},g)}:{},h?{$set_once:w({},(s=(i=e.properties)==null?void 0:i.$set_once)!==null&&s!==void 0?s:{},h)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(c=e.properties)==null?void 0:c.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:u}}setupSiteApp(e){var n=this.apps[e.id],r=()=>{var a;!n.errored&&this.br.length&&(gt.info("Processing "+this.br.length+" events for site app with id "+e.id),this.br.forEach((c=>n.processEvent==null?void 0:n.processEvent(c))),n.processedBuffer=!0),Object.values(this.apps).every((c=>c.processedBuffer||c.errored))&&((a=this.Er)==null||a.call(this))},s=!1,i=a=>{n.errored=!a,n.loaded=!0,gt.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),s&&r()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{i(a)}});o&&(n.processEvent=o),s=!0}catch(a){gt.error("Error while initializing PostHog app with config id "+e.id,a),i(!1)}if(s&&n.loaded)try{r()}catch(a){gt.error("Error while processing buffered events PostHog app with config id "+e.id,a),n.errored=!0}}$r(){var e=this.siteAppLoaders||[];for(var n of e)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var r of e)this.setupSiteApp(r)}Sr(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var r of Object.values(this.apps))try{r.processEvent==null||r.processEvent(n)}catch(s){gt.error("Error while processing event "+e.event+" for site app "+r.id,s)}}}onRemoteConfig(e){var n,r,s,i=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.$r(),void this._instance.on("eventCaptured",(u=>this.Sr(u)))):void gt.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((r=this.Er)==null||r.call(this),(s=e.siteApps)!=null&&s.length)if(this.isEnabled){var o=function(u){var l;x["__$$ph_site_app_"+u]=i._instance,(l=x.__PosthogExtensions__)==null||l.loadSiteApp==null||l.loadSiteApp(i._instance,c,(d=>{if(d)return gt.error("Error while initializing PostHog app with config id "+u,d)}))};for(var{id:a,url:c}of e.siteApps)o(a)}else gt.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var dl=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&ta(n,e))return!0;try{var r=t?.userAgentData;if(r!=null&&r.brands&&r.brands.some((s=>ta(s?.brand,e))))return!0}catch{}return!!t.webdriver},Xn=(function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t})({}),Va="i.posthog.com";class ih{constructor(e){this.kr={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get flagsApiHost(){var e=this.instance.config.flags_api_host;return e?e.trim().replace(/\/$/,""):this.apiHost}get uiHost(){var e,n=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+Va,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.kr[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.kr[this.apiHost]=Xn.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.kr[this.apiHost]=Xn.EU:this.kr[this.apiHost]=Xn.CUSTOM),this.kr[this.apiHost]}endpointFor(e,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),e==="ui")return this.uiHost+n;if(e==="flags")return this.flagsApiHost+n;if(this.region===Xn.CUSTOM)return this.apiHost+n;var r=Va+n;switch(e){case"assets":return"https://"+this.region+"-assets."+r;case"api":return"https://"+this.region+"."+r}}}var oh={icontains:(t,e)=>!!_&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!_&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!_&&ps(e.href,t),not_regex:(t,e)=>!!_&&!ps(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};class we{constructor(e){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(r){r===void 0&&(r=!1),n.getWebExperiments((s=>{we.Pr("retrieved web experiments from the server"),n.Tr=new Map,s.forEach((i=>{if(i.feature_flag_key){var o;n.Tr&&(we.Pr("setting flag key ",i.feature_flag_key," to web experiment ",i),(o=n.Tr)==null||o.set(i.feature_flag_key,i));var a=n._instance.getFeatureFlag(i.feature_flag_key);ve(a)&&i.variants[a]&&n.Ir(i.name,a,i.variants[a].transforms)}else if(i.variants)for(var c in i.variants){var u=i.variants[c];we.Cr(u)&&n.Ir(i.name,c,u.transforms)}}))}),r)},this._instance=e,this._instance.onFeatureFlags((r=>{this.onFeatureFlags(r)}))}onFeatureFlags(e){if(this._is_bot())we.Pr("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(B(this.Tr))return this.Tr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();we.Pr("applying feature flags",e),e.forEach((n=>{var r;if(this.Tr&&(r=this.Tr)!=null&&r.has(n)){var s,i=this._instance.getFeatureFlag(n),o=(s=this.Tr)==null?void 0:s.get(n);i&&o!=null&&o.variants[i]&&this.Ir(o.name,i,o.variants[i].transforms)}}))}}previewWebExperiment(){var e=we.getWindowLocation();if(e!=null&&e.search){var n=as(e?.search,"__experiment_id"),r=as(e?.search,"__experiment_variant");n&&r&&(we.Pr("previewing web experiments "+n+" && "+r),this.getWebExperiments((s=>{this.Rr(parseInt(n),r,s)}),!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,r){if(this._instance.config.disable_web_experiments&&!r)return e([]);var s=this._instance.get_property("$web_experiments");if(s&&!n)return e(s);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:i=>{if(i.statusCode!==200||!i.json)return e([]);var o=i.json.experiments||[];return e(o)}})}Rr(e,n,r){var s=r.filter((i=>i.id===e));s&&s.length>0&&(we.Pr("Previewing web experiment ["+s[0].name+"] with variant ["+n+"]"),this.Ir(s[0].name,n,s[0].variants[n].transforms))}static Cr(e){return!B(e.conditions)&&we.Fr(e)&&we.Mr(e)}static Fr(e){var n;if(B(e.conditions)||B((n=e.conditions)==null?void 0:n.url))return!0;var r,s,i,o=we.getWindowLocation();return!!o&&((r=e.conditions)==null||!r.url||oh[(s=(i=e.conditions)==null?void 0:i.urlMatchType)!==null&&s!==void 0?s:"icontains"](e.conditions.url,o))}static getWindowLocation(){return _?.location}static Mr(e){var n;if(B(e.conditions)||B((n=e.conditions)==null?void 0:n.utm))return!0;var r=Xu();if(r.utm_source){var s,i,o,a,c,u,l,d,f=(s=e.conditions)==null||(s=s.utm)==null||!s.utm_campaign||((i=e.conditions)==null||(i=i.utm)==null?void 0:i.utm_campaign)==r.utm_campaign,p=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==r.utm_source,h=(c=e.conditions)==null||(c=c.utm)==null||!c.utm_medium||((u=e.conditions)==null||(u=u.utm)==null?void 0:u.utm_medium)==r.utm_medium,g=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_term||((d=e.conditions)==null||(d=d.utm)==null?void 0:d.utm_term)==r.utm_term;return f&&h&&g&&p}return!1}static Pr(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];S.info("[WebExperiments] "+e,r)}Ir(e,n,r){this._is_bot()?we.Pr("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?r.forEach((s=>{if(s.selector){var i;we.Pr("applying transform of variant "+n+" for experiment "+e+" ",s);var o=(i=document)==null?void 0:i.querySelectorAll(s.selector);o?.forEach((a=>{var c=a;s.html&&(c.innerHTML=s.html),s.css&&c.setAttribute("style",s.css)}))}})):we.Pr("Control variants leave the page unmodified.")}_is_bot(){return Ae&&this._instance?dl(Ae,this._instance.config.custom_blocked_useragents):void 0}}var ah=oe("[PostHog ExternalIntegrations]"),ch={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class uh{constructor(e){this._instance=e}it(e,n){var r;(r=x.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,e,(s=>{if(s)return ah.error("failed to load script",s);n()}))}startIfEnabledOrStop(){var e=this,n=function(o){var a,c,u;!s||(a=x.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||e.it(ch[o],(()=>{var l;(l=x.__PosthogExtensions__)==null||(l=l.integrations)==null||(l=l[o])==null||l.start(e._instance)})),!s&&(c=x.__PosthogExtensions__)!=null&&(c=c.integrations)!=null&&c[o]&&((u=x.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.stop())};for(var[r,s]of Object.entries((i=this._instance.config.integrations)!==null&&i!==void 0?i:{})){var i;n(r)}}}var Ui="[SessionRecording]",Bn=oe(Ui);class za{get started(){var e;return!((e=this.Or)==null||!e.isStarted)}get status(){return this.Or?this.Or.status:this.Ar&&!this.Dr?"disabled":"lazy_loading"}constructor(e){if(this._forceAllowLocalhostNetworkCapture=!1,this.Ar=!1,this.jr=void 0,this._instance=e,!this._instance.sessionManager)throw Bn.error("started without valid sessionManager"),new Error(Ui+" started without valid sessionManager. This is a bug.");if(this._instance.config.cookieless_mode==="always")throw new Error(Ui+' cannot be used with cookieless_mode="always"')}get Dr(){var e,n=!((e=this._instance.get_property(js))==null||!e.enabled),r=!this._instance.config.disable_session_recording,s=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return _&&n&&r&&!s}startIfEnabledOrStop(e){var n;if(!this.Dr||(n=this.Or)==null||!n.isStarted){var r=!b(Object.assign)&&!b(Array.from);this.Dr&&r?(this.Lr(e),Bn.info("starting")):this.stopRecording()}}Lr(e){var n,r,s;this.Dr&&(x!=null&&(n=x.__PosthogExtensions__)!=null&&(n=n.rrweb)!=null&&n.record&&(r=x.__PosthogExtensions__)!=null&&r.initSessionRecording?this.Nr(e):(s=x.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,this.Ur,(i=>{if(i)return Bn.error("could not load recorder",i);this.Nr(e)})))}stopRecording(){var e,n;(e=this.jr)==null||e.call(this),this.jr=void 0,(n=this.Or)==null||n.stop()}zr(){var e;(e=this._instance.persistence)==null||e.unregister(Au)}Hr(e){if(this._instance.persistence){var n,r,s=this._instance.persistence,i=()=>{var o=e.sessionRecording===!1?void 0:e.sessionRecording,a=o?.sampleRate,c=B(a)?null:parseFloat(a);B(c)&&this.zr();var u=o?.minimumDurationMilliseconds;s.register({[js]:w({enabled:!!o},o,{networkPayloadCapture:w({capturePerformance:e.capturePerformance},o?.networkPayloadCapture),canvasRecording:{enabled:o?.recordCanvas,fps:o?.canvasFps,quality:o?.canvasQuality},sampleRate:c,minimumDurationMilliseconds:b(u)?null:u,endpoint:o?.endpoint,triggerMatchType:o?.triggerMatchType,masking:o?.masking,urlTriggers:o?.urlTriggers})})};i(),(n=this.jr)==null||n.call(this),this.jr=(r=this._instance.sessionManager)==null?void 0:r.onSessionId(i)}}onRemoteConfig(e){"sessionRecording"in e?e.sessionRecording!==!1?(this.Hr(e),this.Ar=!0,this.startIfEnabledOrStop()):this.Ar=!0:Bn.info("skipping remote config with no sessionRecording",e)}log(e,n){var r;n===void 0&&(n="log"),(r=this.Or)!=null&&r.log?this.Or.log(e,n):Bn.warn("log called before recorder was ready")}get Ur(){var e,n,r=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.get_property(js);return(r==null||(n=r.scriptConfig)==null?void 0:n.script)||"lazy-recorder"}Nr(e){var n,r;if((n=x.__PosthogExtensions__)==null||!n.initSessionRecording)throw Error("Called on script loaded before session recording is available");this.Or||(this.Or=(r=x.__PosthogExtensions__)==null?void 0:r.initSessionRecording(this._instance),this.Or._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture),this.Or.start(e)}onRRwebEmit(e){var n;(n=this.Or)==null||n.onRRwebEmit==null||n.onRRwebEmit(e)}overrideLinkedFlag(){var e,n;this.Or||(n=this._instance.persistence)==null||n.register({$replay_override_linked_flag:!0}),(e=this.Or)==null||e.overrideLinkedFlag()}overrideSampling(){var e,n;this.Or||(n=this._instance.persistence)==null||n.register({$replay_override_sampling:!0}),(e=this.Or)==null||e.overrideSampling()}overrideTrigger(e){var n,r;this.Or||(r=this._instance.persistence)==null||r.register({[e==="url"?"$replay_override_url_trigger":"$replay_override_event_trigger"]:!0}),(n=this.Or)==null||n.overrideTrigger(e)}get sdkDebugProperties(){var e;return((e=this.Or)==null?void 0:e.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(e,n){var r;return!((r=this.Or)==null||!r.tryAddCustomEvent(e,n))}}var Qn={},Bi=()=>{},nn="posthog",pl=!Nf&&xe?.indexOf("MSIE")===-1&&xe?.indexOf("Mozilla")===-1,Ya=t=>{var e;return w({api_host:"https://us.i.posthog.com",flags_api_host:null,ui_host:null,token:"",autocapture:!0,cross_subdomain_cookie:Dp(E?.location),persistence:"localStorage+cookie",persistence_name:"",cookie_persisted_properties:[],loaded:Bi,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageleave:"if_capture_pageview",defaults:t??"unset",__preview_deferred_init_extensions:!1,debug:Re&&ve(Re?.search)&&Re.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_conversations:!1,disable_product_tours:!0,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(_==null||(e=_.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var r="Bad HTTP status: "+n.statusCode+" "+n.text;S.error(r)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:Hi},error_tracking:{},_onCapture:Bi,__preview_eager_load_replay:!1},(n=>({rageclick:!(n&&n>="2025-11-30")||{content_ignorelist:!0},capture_pageview:!(n&&n>="2025-05-24")||"history_change",session_recording:n&&n>="2025-11-30"?{strictMinimumDuration:!0}:{},external_scripts_inject_target:n&&n>="2026-01-30"?"head":"body"}))(t))},Ja=t=>{var e={};b(t.process_person)||(e.person_profiles=t.process_person),b(t.xhr_headers)||(e.request_headers=t.xhr_headers),b(t.cookie_name)||(e.persistence_name=t.cookie_name),b(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),b(t.store_google)||(e.save_campaign_params=t.store_google),b(t.verbose)||(e.debug=t.verbose);var n=le({},e,t);return W(t.property_blacklist)&&(b(t.property_denylist)?n.property_denylist=t.property_blacklist:W(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:S.error("Invalid value for property_denylist config: "+t.property_denylist)),n};class lh{constructor(){this.__forceAllowLocalhost=!1}get Br(){return this.__forceAllowLocalhost}set Br(e){S.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class xs{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new lh,this.qr=!1,this.version=Ze.LIB_VERSION,this.Wr=new Eo,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=Ya(),this.SentryIntegration=hf,this.sentryIntegration=e=>(function(n,r){var s=Ju(n,r);return{name:Yu,processEvent:i=>s(i)}})(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.Gr=!1,this.Vr=null,this.Jr=null,this.Kr=null,this.featureFlags=new Df(this),this.toolbar=new _f(this),this.scrollManager=new th(this),this.pageViewManager=new Ca(this),this.surveys=new zf(this),this.conversations=new Yf(this),this.logs=new Jf(this),this.experiments=new we(this),this.exceptions=new Ff(this),this.rateLimiter=new Xf(this),this.requestRouter=new ih(this),this.consent=new cf(this),this.externalIntegrations=new uh(this),this.people={set:(e,n,r)=>{var s=ve(e)?{[e]:n}:e;this.setPersonProperties(s),r?.({})},set_once:(e,n,r)=>{var s=ve(e)?{[e]:n}:e;this.setPersonProperties(void 0,s),r?.({})}},this.on("eventCaptured",(e=>S.info('send "'+e?.event+'"',e)))}init(e,n,r){if(r&&r!==nn){var s,i=(s=Qn[r])!==null&&s!==void 0?s:new xs;return i._init(e,n,r),Qn[r]=i,Qn[nn][r]=i,i}return this._init(e,n,r)}_init(e,n,r){var s;if(n===void 0&&(n={}),b(e)||bi(e))return S.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return console.warn("[PostHog.js]","You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},n.debug=this.Yr(n.debug),this.Xr=n,this.Qr=[],n.person_profiles&&(this.Jr=n.person_profiles),this.set_config(le({},Ya(n.defaults),Ja(n),{name:r,token:e})),this.config.on_xhr_error&&S.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:nt.GZipJS;var i=this.Zr();this.persistence=new Zs(this.config,i),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Zs(w({},this.config,{persistence:"sessionStorage"}),i);var o=w({},this.persistence.props),a=w({},this.sessionPersistence.props);this.register({$initialization_time:new Date().toISOString()}),this.ts=new Zf((T=>this.es(T)),this.config.request_queue_config),this.rs=new eh(this),this.__request_queue=[];var c=this.config.cookieless_mode==="always"||this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut();if(c||(this.sessionManager=new Ga(this),this.sessionPropsManager=new Wa(this,this.sessionManager,this.persistence)),this.config.__preview_deferred_init_extensions?(S.info("Deferring extension initialization to improve startup performance"),setTimeout((()=>{this.ss(c)}),0)):(S.info("Initializing extensions synchronously"),this.ss(c)),Ze.DEBUG=Ze.DEBUG||this.config.debug,Ze.DEBUG&&S.info("Starting in debug mode",{this:this,config:n,thisC:w({},this.config),p:o,s:a}),((s=n.bootstrap)==null?void 0:s.distinctID)!==void 0){var u,l,d=this.config.get_device_id(vt()),f=(u=n.bootstrap)!=null&&u.isIdentifiedID?d:n.bootstrap.distinctID;this.persistence.set_property(Qe,(l=n.bootstrap)!=null&&l.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:f})}if(this.ns()){var p,h,g=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlags)||{}).filter((T=>{var F;return!((F=n.bootstrap)==null||(F=F.featureFlags)==null||!F[T])})).reduce(((T,F)=>{var O;return T[F]=((O=n.bootstrap)==null||(O=O.featureFlags)==null?void 0:O[F])||!1,T}),{}),m=Object.keys(((h=n.bootstrap)==null?void 0:h.featureFlagPayloads)||{}).filter((T=>g[T])).reduce(((T,F)=>{var O,I;return(O=n.bootstrap)!=null&&(O=O.featureFlagPayloads)!=null&&O[F]&&(T[F]=(I=n.bootstrap)==null||(I=I.featureFlagPayloads)==null?void 0:I[F]),T}),{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:m})}if(c)this.register_once({distinct_id:On,$device_id:null},"");else if(!this.get_distinct_id()){var v=this.config.get_device_id(vt());this.register_once({distinct_id:v,$device_id:v},""),this.persistence.set_property(Qe,"anonymous")}return he(_,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?ff(this,(()=>this.os())):this.os(),bt(this.config._onCapture)&&this.config._onCapture!==Bi&&(S.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",(T=>this.config._onCapture(T.event,T)))),this.config.ip&&S.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}ss(e){var n=performance.now();this.historyAutocapture=new pf(this),this.historyAutocapture.startIfEnabled();var r=[];r.push((()=>{new vf(this).startIfEnabledOrStop()})),r.push((()=>{var s;this.siteApps=new sh(this),(s=this.siteApps)==null||s.init()})),e||r.push((()=>{this.sessionRecording=new za(this),this.sessionRecording.startIfEnabledOrStop()})),this.config.disable_scroll_properties||r.push((()=>{this.scrollManager.startMeasuringScrollPosition()})),r.push((()=>{this.autocapture=new Qp(this),this.autocapture.startIfEnabled()})),r.push((()=>{this.surveys.loadIfEnabled()})),r.push((()=>{this.logs.loadIfEnabled()})),r.push((()=>{this.conversations.loadIfEnabled()})),r.push((()=>{this.productTours=new Uf(this),this.productTours.loadIfEnabled()})),r.push((()=>{this.heatmaps=new If(this),this.heatmaps.startIfEnabled()})),r.push((()=>{this.webVitalsAutocapture=new wf(this)})),r.push((()=>{this.exceptionObserver=new df(this),this.exceptionObserver.startIfEnabledOrStop()})),r.push((()=>{this.deadClicksAutocapture=new zu(this,lf),this.deadClicksAutocapture.startIfEnabled()})),r.push((()=>{if(this.ls){var s=this.ls;this.ls=void 0,this.bi(s)}})),this.us(r,n)}us(e,n){for(;e.length>0;){if(this.config.__preview_deferred_init_extensions&&performance.now()-n>=30&&e.length>0)return void setTimeout((()=>{this.us(e,n)}),0);var r=e.shift();if(r)try{r()}catch(i){S.error("Error initializing extension:",i)}}var s=Math.round(performance.now()-n);this.register_for_session({$sdk_debug_extensions_init_method:this.config.__preview_deferred_init_extensions?"deferred":"synchronous",$sdk_debug_extensions_init_time_ms:s}),this.config.__preview_deferred_init_extensions&&S.info("PostHog extensions initialized ("+s+"ms)")}bi(e){var n,r,s,i,o,a,c,u,l;if(!E||!E.body)return S.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((()=>{this.bi(e)}),500);this.config.__preview_deferred_init_extensions&&(this.ls=e),this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=M(e.supportedCompression,nt.GZipJS)?nt.GZipJS:M(e.supportedCompression,nt.Base64)?nt.Base64:void 0),(n=e.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.Jr?this.Jr:"identified_only"}),(r=this.siteApps)==null||r.onRemoteConfig(e),(s=this.sessionRecording)==null||s.onRemoteConfig(e),(i=this.autocapture)==null||i.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),this.logs.onRemoteConfig(e),this.conversations.onRemoteConfig(e),(a=this.productTours)==null||a.onRemoteConfig(e),(c=this.webVitalsAutocapture)==null||c.onRemoteConfig(e),(u=this.exceptionObserver)==null||u.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(l=this.deadClicksAutocapture)==null||l.onRemoteConfig(e)}os(){try{this.config.loaded(this)}catch(e){S.critical("`loaded` function failed",e)}this.hs(),this.config.capture_pageview&&setTimeout((()=>{(this.consent.isOptedIn()||this.config.cookieless_mode==="always")&&this.ds()}),1),new Kf(this).load(),this.featureFlags.flags()}hs(){var e;this.is_capturing()&&this.config.request_batching&&((e=this.ts)==null||e.enable())}_dom_loaded(){this.is_capturing()&&Et(this.__request_queue,(e=>this.es(e))),this.__request_queue=[],this.hs()}_handle_unload(){var e,n;this.surveys.handlePageUnload(),this.config.request_batching?(this.vs()&&this.capture("$pageleave"),(e=this.ts)==null||e.unload(),(n=this.rs)==null||n.unload()):this.vs()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(e){this.__loaded&&(pl?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=ds(e.url,{ip:this.config.ip?1:0}),e.headers=w({},this.config.request_headers,e.headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(e.disableTransport=["sendBeacon"]),e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var r,s,i,o=w({},n);o.timeout=o.timeout||6e4,o.url=ds(o.url,{_:new Date().getTime().toString(),ver:Ze.LIB_VERSION,compression:o.compression});var a=(r=o.transport)!==null&&r!==void 0?r:"fetch",c=Br.filter((l=>!o.disableTransport||!l.transport||!o.disableTransport.includes(l.transport))),u=(s=(i=Ru(c,(l=>l.transport===a)))==null?void 0:i.method)!==null&&s!==void 0?s:c[0].method;if(!u)throw new Error("No available transport method");u(o)})(w({},e,{callback:n=>{var r,s;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((r=(s=this.config).on_request_error)==null||r.call(s,n)),e.callback==null||e.callback(n)}}))))}es(e){this.rs?this.rs.retriableRequest(e):this._send_request(e)}_execute_array(e){var n,r=[],s=[],i=[];Et(e,(a=>{a&&(n=a[0],W(n)?i.push(a):bt(a)?a.call(this):W(a)&&n==="alias"?r.push(a):W(a)&&n.indexOf("capture")!==-1&&bt(this[n])?i.push(a):s.push(a))}));var o=function(a,c){Et(a,(function(u){if(W(u[0])){var l=c;K(u,(function(d){l=l[d[0]].apply(l,d.slice(1))}))}else this[u[0]].apply(this,u.slice(1))}),c)};o(r,this),o(s,this),o(i,this)}ns(){var e,n;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,r){var s;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.ts){if(this.is_capturing())if(!b(e)&&ve(e)){var i=!this.config.opt_out_useragent_filter&&this._is_bot();if(!(i&&!this.config.__preview_capture_bot_pageviews)){var o=r!=null&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(o==null||!o.isRateLimited){n!=null&&n.$current_url&&!ve(n?.$current_url)&&(S.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var a=new Date,c=r?.timestamp||a,u=vt(),l={uuid:u,event:e,properties:this.calculateEventProperties(e,n||{},c,u)};e==="$pageview"&&this.config.__preview_capture_bot_pageviews&&i&&(l.event="$bot_pageview",l.properties.$browser_type="bot"),o&&(l.properties.$lib_rate_limit_remaining_tokens=o.remainingTokens),r?.$set&&(l.$set=r?.$set);var d,f=e!=="$groupidentify",p=this.cs(r?.$set_once,f);if(p&&(l.$set_once=p),(l=Mp(l,r!=null&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=c,b(r?.timestamp)||(l.properties.$event_time_override_provided=!0,l.properties.$event_time_override_system_time=a),e===Jn.DISMISSED||e===Jn.SENT){var h=n?.[ti.SURVEY_ID],g=n?.[ti.SURVEY_ITERATION];d={id:h,current_iteration:g},localStorage.getItem(ja(d))||localStorage.setItem(ja(d),"true"),l.$set=w({},l.$set,{[Bf({id:h,current_iteration:g},e===Jn.SENT?"responded":"dismissed")]:!0})}else e===Jn.SHOWN&&(l.$set=w({},l.$set,{[ti.SURVEY_LAST_SEEN_DATE]:new Date().toISOString()}));var m=w({},l.properties.$set,l.$set);if(sn(m)||this.setPersonPropertiesForFlags(m),!B(this.config.before_send)){var v=this.fs(l);if(!v)return;l=v}this.Wr.emit("eventCaptured",l);var T={method:"POST",url:(s=r?._url)!==null&&s!==void 0?s:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:l,compression:"best-available",batchKey:r?._batchKey};return!this.config.request_batching||r&&(r==null||!r._batchKey)||r!=null&&r.send_instantly?this.es(T):this.ts.enqueue(T),l}S.critical("This capture call is ignored due to client rate limiting.")}}else S.error("No event name provided to posthog.capture")}else S.uninitializedWarning("posthog.capture")}Bi(e){return this.on("eventCaptured",(n=>e(n.event,n)))}calculateEventProperties(e,n,r,s,i){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return n;var o=i?void 0:this.persistence.remove_event_timer(e),a=w({},n);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,(this.config.cookieless_mode=="always"||this.config.cookieless_mode=="on_reject"&&this.consent.isExplicitlyOptedOut())&&(a.$cookieless_mode=!0),e==="$snapshot"){var c=w({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=c.distinct_id,(!ve(a.distinct_id)&&!at(a.distinct_id)||bi(a.distinct_id))&&S.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var u,l=Sf(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId(i,r.getTime());a.$session_id=d,a.$window_id=f}this.sessionPropsManager&&le(a,this.sessionPropsManager.getSessionProps());try{var p;this.sessionRecording&&le(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(p=this.rs)==null?void 0:p.length}catch(v){a.$sdk_debug_error_capturing_properties=String(v)}if(this.requestRouter.region===Xn.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),u=e!=="$pageview"||i?e!=="$pageleave"||i?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(r):this.pageViewManager.doPageView(r,s),a=le(a,u),e==="$pageview"&&E&&(a.title=E.title),!b(o)){var h=r.getTime()-o;a.$duration=parseFloat((h/1e3).toFixed(3))}xe&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=le({},l,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),W(this.config.property_denylist)?K(this.config.property_denylist,(function(v){delete a[v]})):S.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var g=this.config.sanitize_properties;g&&(S.error("sanitize_properties is deprecated. Use before_send instead"),a=g(a,e));var m=this.ps();return a.$process_person_profile=m,m&&!i&&this.gs("_calculate_event_properties"),a}cs(e,n){var r;if(n===void 0&&(n=!0),!this.persistence||!this.ps()||this.qr)return e;var s=this.persistence.get_initial_props(),i=(r=this.sessionPropsManager)==null?void 0:r.getSetOnceProps(),o=le({},s,i||{},e||{}),a=this.config.sanitize_properties;return a&&(S.error("sanitize_properties is deprecated. Use before_send instead"),o=a(o,"$set_once")),n&&(this.qr=!0),sn(o)?void 0:o}register(e,n){var r;(r=this.persistence)==null||r.register(e,n)}register_once(e,n,r){var s;(s=this.persistence)==null||s.register_once(e,n,r)}register_for_session(e){var n;(n=this.sessionPersistence)==null||n.register(e)}unregister(e){var n;(n=this.persistence)==null||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)==null||n.unregister(e)}_s(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateFlags(e,n,r){var s=r!=null&&r.merge?this.featureFlags.getFlagVariants():{},i=r!=null&&r.merge?this.featureFlags.getFlagPayloads():{},o=w({},s,e),a=w({},i,n),c={};for(var[u,l]of Object.entries(o)){var d=typeof l=="string";c[u]={key:u,enabled:!!d||!!l,variant:d?l:void 0,reason:void 0,metadata:b(a?.[u])?void 0:{id:0,version:void 0,description:void 0,payload:a[u]}}}this.featureFlags.receivedFeatureFlags({flags:c})}updateEarlyAccessFeatureEnrollment(e,n,r){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n,r)}getEarlyAccessFeatures(e,n,r){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(e,n,r)}on(e,n){return this.Wr.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var n,r;return(n=(r=this.sessionManager)==null?void 0:r.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e,n){n===void 0&&(n=!1),this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}displaySurvey(e,n){n===void 0&&(n=qf),this.surveys.displaySurvey(e,n)}cancelPendingSurvey(e){this.surveys.cancelPendingSurvey(e)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(e,n)}identify(e,n,r){if(!this.__loaded||!this.persistence)return S.uninitializedWarning("posthog.identify");if(at(e)&&(e=e.toString(),S.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))S.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==On){if(this.gs("posthog.identify")){var s=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var i=s;this.register_once({$had_persisted_distinct_id:!0,$device_id:i},"")}e!==s&&e!==this.get_property(Wn)&&(this.unregister(Wn),this.register({distinct_id:e}));var o=(this.persistence.get_property(Qe)||"anonymous")==="anonymous";e!==s&&o?(this.persistence.set_property(Qe,"identified"),this.setPersonPropertiesForFlags(w({},r||{},n||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:s},{$set:n||{},$set_once:r||{}}),this.Kr=Ma(e,n,r),this.featureFlags.setAnonymousDistinctId(s)):(n||r)&&this.setPersonProperties(n,r),e!==s&&(this.reloadFeatureFlags(),this.unregister(ns))}}else S.critical('The string "'+On+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else S.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){if((e||n)&&this.gs("posthog.setPersonProperties")){var r=Ma(this.get_distinct_id(),e,n);this.Kr!==r?(this.setPersonPropertiesForFlags(w({},n||{},e||{})),this.capture("$set",{$set:e||{},$set_once:n||{}}),this.Kr=r):S.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,n,r){if(e&&n){var s=this.getGroups();s[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:w({},s,{[e]:n})}),r&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:r}),this.setGroupPropertiesForFlags({[e]:r})),s[e]===n||r||this.reloadFeatureFlags()}else S.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0),this.gs("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,r,s,i;if(S.info("reset"),!this.__loaded)return S.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(r=this.sessionPersistence)==null||r.clear(),this.surveys.reset(),this.featureFlags.reset(),(s=this.persistence)==null||s.set_property(Qe,"anonymous"),(i=this.sessionManager)==null||i.resetSessionId(),this.Kr=null,this.config.cookieless_mode==="always")this.register_once({distinct_id:On,$device_id:null},"");else{var a=this.config.get_device_id(vt());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0),s=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(e!=null&&e.withTimestamp&&r){var i,o=(i=e.timestampLookBack)!==null&&i!==void 0?i:10;if(!r)return s;s+="?t="+Math.max(Math.floor((new Date().getTime()-r)/1e3)-o,0)}return s}alias(e,n){return e===this.get_property(Pu)?(S.critical("Attempting to create alias for existing People user - aborting."),-2):this.gs("posthog.alias")?(b(n)&&(n=this.get_distinct_id()),e!==n?(this._s(Wn,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(S.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n=w({},this.config);if(me(e)){var r,s,i,o,a,c,u;le(this.config,Ja(e));var l=this.Zr();(r=this.persistence)==null||r.update_config(this.config,n,l),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Zs(w({},this.config,{persistence:"sessionStorage"}),l);var d=this.Yr(this.config.debug);st(d)&&(this.config.debug=d),st(this.config.debug)&&(this.config.debug?(Ze.DEBUG=!0,ne.H()&&ne.G("ph_debug","true"),S.info("set_config",{config:e,oldConfig:n,newConfig:w({},this.config)})):(Ze.DEBUG=!1,ne.H()&&ne.V("ph_debug"))),(s=this.exceptionObserver)==null||s.onConfigChange(),(i=this.sessionRecording)==null||i.startIfEnabledOrStop(),(o=this.autocapture)==null||o.startIfEnabled(),(a=this.heatmaps)==null||a.startIfEnabled(),(c=this.exceptionObserver)==null||c.startIfEnabledOrStop(),this.surveys.loadIfEnabled(),this.ys(),(u=this.externalIntegrations)==null||u.startIfEnabledOrStop()}}startSessionRecording(e){var n=e===!0,r={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(r).some(Boolean)){var s,i,o,a,c;(s=this.sessionManager)==null||s.checkAndGetSessionAndWindowId(),r.sampling&&((i=this.sessionRecording)==null||i.overrideSampling()),r.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),r.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),r.event_trigger&&((c=this.sessionRecording)==null||c.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,n){var r=new Error("PostHog syntheticException"),s=this.exceptions.buildProperties(e,{handled:!0,syntheticException:r});return this.exceptions.sendExceptionEvent(w({},s,n))}startExceptionAutocapture(e){this.set_config({capture_exceptions:e==null||e})}stopExceptionAutocapture(){this.set_config({capture_exceptions:!1})}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)==null?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)==null?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:nn;return n!==nn&&(n=nn+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)==null?void 0:e.get_property(Qe))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(Qe))==="identified"}ps(){var e,n;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&sn(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[Wn])&&((n=this.persistence)==null||(n=n.props)==null||!n[ss]))}vs(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.ps()||this.gs("posthog.createPersonProfile")&&this.setPersonProperties({},{})}gs(e){return this.config.person_profiles==="never"?(S.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._s(ss,!0),!0)}Zr(){if(this.config.cookieless_mode==="always")return!0;var e=this.consent.isOptedOut(),n=this.config.opt_out_persistence_by_default||this.config.cookieless_mode==="on_reject";return this.config.disable_persistence||e&&!!n}ys(){var e,n,r,s,i=this.Zr();return((e=this.persistence)==null?void 0:e.ki)!==i&&((r=this.persistence)==null||r.set_disabled(i)),((n=this.sessionPersistence)==null?void 0:n.ki)!==i&&((s=this.sessionPersistence)==null||s.set_disabled(i)),i}opt_in_capturing(e){var n;if(this.config.cookieless_mode!=="always"){var r,s,i;this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),(r=this.sessionManager)==null||r.destroy(),(s=this.pageViewManager)==null||s.destroy(),this.sessionManager=new Ga(this),this.pageViewManager=new Ca(this),this.persistence&&(this.sessionPropsManager=new Wa(this,this.sessionManager,this.persistence)),this.sessionRecording=new za(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this.ys(),this.hs(),(n=this.sessionRecording)==null||n.startIfEnabledOrStop(),this.config.cookieless_mode=="on_reject"&&this.surveys.loadIfEnabled(),(b(e?.captureEventName)||e!=null&&e.captureEventName)&&this.capture((i=e?.captureEventName)!==null&&i!==void 0?i:"$opt_in",e?.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.ds()}else S.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var e,n,r;this.config.cookieless_mode!=="always"?(this.config.cookieless_mode==="on_reject"&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this.ys(),this.config.cookieless_mode==="on_reject"&&(this.register({distinct_id:On,$device_id:null}),(e=this.sessionManager)==null||e.destroy(),(n=this.pageViewManager)==null||n.destroy(),this.sessionManager=void 0,this.sessionPropsManager=void 0,(r=this.sessionRecording)==null||r.stopRecording(),this.sessionRecording=void 0,this.ds())):S.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var e=this.consent.consent;return e===et.GRANTED?"granted":e===et.DENIED?"denied":"pending"}is_capturing(){return this.config.cookieless_mode==="always"||(this.config.cookieless_mode==="on_reject"?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this.ys()}_is_bot(){return Ae?dl(Ae,this.config.custom_blocked_useragents):void 0}ds(){E&&(E.visibilityState==="visible"?this.Gr||(this.Gr=!0,this.capture("$pageview",{title:E.title},{send_instantly:!0}),this.Vr&&(E.removeEventListener("visibilitychange",this.Vr),this.Vr=null)):this.Vr||(this.Vr=this.ds.bind(this),he(E,"visibilitychange",this.Vr)))}debug(e){e===!1?(_?.console.log("You've disabled debug mode."),this.set_config({debug:!1})):(_?.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),this.set_config({debug:!0}))}O(){var e,n,r,s,i,o,a,c=this.Xr||{};return"advanced_disable_flags"in c?!!c.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(S.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(r="advanced_disable_decide",s=!1,i=S,o=(n="advanced_disable_flags")in(e=c)&&!b(e[n]),a=r in e&&!b(e[r]),o?e[n]:a?(i&&i.warn("Config field '"+r+"' is deprecated. Please use '"+n+"' instead. The old field will be removed in a future major version."),e[r]):s)}fs(e){if(B(this.config.before_send))return e;var n=W(this.config.before_send)?this.config.before_send:[this.config.before_send],r=e;for(var s of n){if(r=s(r),B(r)){var i="Event '"+e.event+"' was rejected in beforeSend function";return Qd(e.event)?S.warn(i+". This can cause unexpected behavior."):S.info(i),null}r.properties&&!sn(r.properties)||S.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return r}getPageViewId(){var e;return(e=this.pageViewManager.Kt)==null?void 0:e.pageViewId}captureTraceFeedback(e,n){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:n})}captureTraceMetric(e,n,r){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:n,$ai_metric_value:String(r)})}Yr(e){var n=st(e)&&!e,r=ne.H()&&ne.q("ph_debug")==="true";return!n&&(!!r||e)}}(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=Fp(t.prototype[e[n]])})(xs,["identify"]);var Xa,mE=(Xa=Qn[nn]=new xs,(function(){function t(){t.done||(t.done=!0,pl=!1,K(Qn,(function(e){e._dom_loaded()})))}E!=null&&E.addEventListener?E.readyState==="complete"?t():he(E,"DOMContentLoaded",t,{capture:!1}):_&&S.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")})(),Xa);const k=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,L=globalThis,Ut="10.37.0";function Yt(){return Rs(L),L}function Rs(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||Ut,e[Ut]=e[Ut]||{}}function wn(t,e,n=L){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[Ut]=r[Ut]||{};return s[t]||(s[t]=e())}const dh=["debug","info","warn","error","log","assert","trace"],ph="Sentry Logger ",fs={};function Tn(t){if(!("console"in L))return t();const e=L.console,n={},r=Object.keys(fs);r.forEach(s=>{const i=fs[s];n[s]=e[s],e[s]=i});try{return t()}finally{r.forEach(s=>{e[s]=n[s]})}}function fh(){wo().enabled=!0}function hh(){wo().enabled=!1}function fl(){return wo().enabled}function gh(...t){So("log",...t)}function _h(...t){So("warn",...t)}function mh(...t){So("error",...t)}function So(t,...e){k&&fl()&&Tn(()=>{L.console[t](`${ph}[${t}]:`,...e)})}function wo(){return k?wn("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const y={enable:fh,disable:hh,isEnabled:fl,log:gh,warn:_h,error:mh},hl=50,Vt="?",Ka=/\(error: (.*)\)/,Za=/captureMessage|captureException/;function gl(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,s=0)=>{const i=[],o=n.split(`
`);for(let a=r;a<o.length;a++){let c=o[a];c.length>1024&&(c=c.slice(0,1024));const u=Ka.test(c)?c.replace(Ka,"$1"):c;if(!u.match(/\S*Error: /)){for(const l of e){const d=l(u);if(d){i.push(d);break}}if(i.length>=hl+s)break}}return yh(i.slice(s))}}function vh(t){return Array.isArray(t)?gl(...t):t}function yh(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(Nr(e).function||"")&&e.pop(),e.reverse(),Za.test(Nr(e).function||"")&&(e.pop(),Za.test(Nr(e).function||"")&&e.pop()),e.slice(0,hl).map(n=>({...n,filename:n.filename||Nr(e).filename,function:n.function||Vt}))}function Nr(t){return t[t.length-1]||{}}const ri="<anonymous>";function ct(t){try{return!t||typeof t!="function"?ri:t.name||ri}catch{return ri}}function Qa(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}function _l(t){return"__v_isVNode"in t&&t.__v_isVNode?"[VueVNode]":"[VueViewModel]"}const jr={},ec={};function Ct(t,e){jr[t]=jr[t]||[],jr[t].push(e)}function At(t,e){if(!ec[t]){ec[t]=!0;try{e()}catch(n){k&&y.error(`Error while instrumenting ${t}`,n)}}}function He(t,e){const n=t&&jr[t];if(n)for(const r of n)try{r(e)}catch(s){k&&y.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${ct(r)}
Error:`,s)}}let si=null;function ml(t){const e="error";Ct(e,t),At(e,bh)}function bh(){si=L.onerror,L.onerror=function(t,e,n,r,s){return He("error",{column:r,error:s,line:n,msg:t,url:e}),si?si.apply(this,arguments):!1},L.onerror.__SENTRY_INSTRUMENTED__=!0}let ii=null;function vl(t){const e="unhandledrejection";Ct(e,t),At(e,Eh)}function Eh(){ii=L.onunhandledrejection,L.onunhandledrejection=function(t){return He("unhandledrejection",t),ii?ii.apply(this,arguments):!0},L.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const yl=Object.prototype.toString;function Ps(t){switch(yl.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return ut(t,Error)}}function In(t,e){return yl.call(t)===`[object ${e}]`}function bl(t){return In(t,"ErrorEvent")}function tc(t){return In(t,"DOMError")}function Sh(t){return In(t,"DOMException")}function it(t){return In(t,"String")}function To(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function hn(t){return t===null||To(t)||typeof t!="object"&&typeof t!="function"}function or(t){return In(t,"Object")}function Cs(t){return typeof Event<"u"&&ut(t,Event)}function wh(t){return typeof Element<"u"&&ut(t,Element)}function Th(t){return In(t,"RegExp")}function kn(t){return!!(t?.then&&typeof t.then=="function")}function Ih(t){return or(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function ut(t,e){try{return t instanceof e}catch{return!1}}function El(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue||t.__v_isVNode))}function Io(t){return typeof Request<"u"&&ut(t,Request)}const ko=L,kh=80;function Be(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const l=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||kh;for(;n&&i++<r&&(u=xh(n,l),!(u==="html"||i>1&&o+s.length*c+u.length>=d));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function xh(t,e){const n=t,r=[];if(!n?.tagName)return"";if(ko.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=e?.length?e.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(s?.length)s.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&it(o)){const a=o.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function gr(){try{return ko.document.location.href}catch{return""}}function Sl(t){if(!ko.HTMLElement)return null;let e=t;const n=5;for(let r=0;r<n;r++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function $e(t,e,n){if(!(e in t))return;const r=t[e];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&wl(s,r);try{t[e]=s}catch{k&&y.log(`Failed to replace method "${e}" in object`,t)}}function Ce(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{k&&y.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function wl(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,Ce(t,"__sentry_original__",e)}catch{}}function xo(t){return t.__sentry_original__}function Tl(t){if(Ps(t))return{message:t.message,name:t.name,stack:t.stack,...rc(t)};if(Cs(t)){const e={type:t.type,target:nc(t.target),currentTarget:nc(t.currentTarget),...rc(t)};return typeof CustomEvent<"u"&&ut(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function nc(t){try{return wh(t)?Be(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function rc(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function Rh(t){const e=Object.keys(Tl(t));return e.sort(),e[0]?e.join(", "):"[object has no keys]"}let Qt;function _r(t){if(Qt!==void 0)return Qt?Qt(t):t();const e=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__"),n=L;return e in n&&typeof n[e]=="function"?(Qt=n[e],Qt(t)):(Qt=null,t())}function wt(){return _r(()=>Math.random())}function mr(){return _r(()=>Date.now())}function ji(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function sc(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const s=t[r];try{El(s)?n.push(_l(s)):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function qr(t,e,n=!1){return it(t)?Th(e)?e.test(t):it(e)?n?t===e:t.includes(e):!1:!1}function Tt(t,e=[],n=!1){return e.some(r=>qr(t,r,n))}function Ph(){const t=L;return t.crypto||t.msCrypto}let oi;function Ch(){return wt()*16}function Ue(t=Ph()){try{if(t?.randomUUID)return _r(()=>t.randomUUID()).replace(/-/g,"")}catch{}return oi||(oi="10000000100040008000"+1e11),oi.replace(/[018]/g,e=>(e^(Ch()&15)>>e/4).toString(16))}function Il(t){return t.exception?.values?.[0]}function Ht(t){const{message:e,event_id:n}=t;if(e)return e;const r=Il(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function qi(t,e,n){const r=t.exception=t.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=e||""),i.type||(i.type="Error")}function gn(t,e){const n=Il(t);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...e},e&&"data"in e){const i={...s?.data,...e.data};n.mechanism.data=i}}function ic(t){if(Ah(t))return!0;try{Ce(t,"__sentry_captured__",!0)}catch{}return!1}function Ah(t){try{return t.__sentry_captured__}catch{}}const kl=1e3;function Jt(){return mr()/kl}function $h(){const{performance:t}=L;if(!t?.now||!t.timeOrigin)return Jt;const e=t.timeOrigin;return()=>(e+_r(()=>t.now()))/kl}let oc;function be(){return(oc??(oc=$h()))()}let ai=null;function Oh(){const{performance:t}=L;if(!t?.now)return;const e=3e5,n=_r(()=>t.now()),r=mr(),s=t.timeOrigin;if(typeof s=="number"&&Math.abs(s+n-r)<e)return s;const i=t.timing?.navigationStart;return typeof i=="number"&&Math.abs(i+n-r)<e?i:r-n}function Oe(){return ai===null&&(ai=Oh()),ai}function Nh(t){const e=be(),n={sid:Ue(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Mh(n)};return t&&_n(n,t),n}function _n(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||be(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Ue()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function Fh(t,e){let n={};t.status==="ok"&&(n={status:"exited"}),_n(t,n)}function Mh(t){return{sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}}}function vr(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&Object.keys(e).length===0)return t;const r={...t};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=vr(r[s],e[s],n-1));return r}function lt(){return Ue()}function ot(){return Ue().substring(16)}const Wi="_sentrySpan";function mn(t,e){e?Ce(t,Wi,e):delete t[Wi]}function hs(t){return t[Wi]}const Lh=100;class Je{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:lt(),sampleRand:wt()}}clone(){const e=new Je;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._attributes={...this._attributes},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,e._conversationId=this._conversationId,mn(e,hs(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&_n(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setConversationId(e){return this._conversationId=e||void 0,this._notifyScopeListeners(),this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this.setTags({[e]:n})}setAttributes(e){return this._attributes={...this._attributes,...e},this._notifyScopeListeners(),this}setAttribute(e,n){return this.setAttributes({[e]:n})}removeAttribute(e){return e in this._attributes&&(delete this._attributes[e],this._notifyScopeListeners()),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,r=n instanceof Je?n.getScopeData():or(n)?e:void 0,{tags:s,attributes:i,extra:o,user:a,contexts:c,level:u,fingerprint:l=[],propagationContext:d,conversationId:f}=r||{};return this._tags={...this._tags,...s},this._attributes={...this._attributes,...i},this._extra={...this._extra,...o},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),l.length&&(this._fingerprint=l),d&&(this._propagationContext=d),f&&(this._conversationId=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,this._conversationId=void 0,mn(this,void 0),this._attachments=[],this.setPropagationContext({traceId:lt(),sampleRand:wt()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:Lh;if(r<=0)return this;const s={timestamp:Jt(),...e,message:e.message?ji(e.message,2048):e.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:hs(this),conversationId:this._conversationId}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=vr(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n?.event_id||Ue();if(!this._client)return k&&y.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...n,event_id:r},this),r}captureMessage(e,n,r){const s=r?.event_id||Ue();if(!this._client)return k&&y.warn("No client configured on scope - will not capture message!"),s;const i=r?.syntheticException??new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:i,...r,event_id:s},this),s}captureEvent(e,n){const r=n?.event_id||Ue();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(k&&y.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function Dh(){return wn("defaultCurrentScope",()=>new Je)}function Hh(){return wn("defaultIsolationScope",()=>new Je)}class Uh{constructor(e,n){let r;e?r=e:r=new Je;let s;n?s=n:s=new Je,this._stack=[{scope:r}],this._isolationScope=s}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(s){throw this._popScope(),s}return kn(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function vn(){const t=Yt(),e=Rs(t);return e.stack=e.stack||new Uh(Dh(),Hh())}function Bh(t){return vn().withScope(t)}function jh(t,e){const n=vn();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function ac(t){return vn().withScope(()=>t(vn().getIsolationScope()))}function qh(){return{withIsolationScope:ac,withScope:Bh,withSetScope:jh,withSetIsolationScope:(t,e)=>ac(e),getCurrentScope:()=>vn().getScope(),getIsolationScope:()=>vn().getIsolationScope()}}function xn(t){const e=Rs(t);return e.acs?e.acs:qh()}function G(){const t=Yt();return xn(t).getCurrentScope()}function pt(){const t=Yt();return xn(t).getIsolationScope()}function Wh(){return wn("globalScope",()=>new Je)}function As(...t){const e=Yt(),n=xn(e);if(t.length===2){const[r,s]=t;return r?n.withSetScope(r,s):n.withScope(s)}return n.withScope(t[0])}function V(){return G().getClient()}function Gh(t){const e=t.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=e,i={trace_id:n,span_id:s||ot()};return r&&(i.parent_span_id=r),i}const Ye="sentry.source",Ro="sentry.sample_rate",xl="sentry.previous_trace_sample_rate",dt="sentry.op",ye="sentry.origin",ar="sentry.idle_span_finish_reason",yr="sentry.measurement_unit",br="sentry.measurement_value",cc="sentry.custom_span_name",Po="sentry.profile_id",Rn="sentry.exclusive_time",Vh="sentry.link.type",zh="gen_ai.conversation.id",Yh=0,Co=1,_e=2;function Jh(t){if(t<400&&t>=100)return{code:Co};if(t>=400&&t<500)switch(t){case 401:return{code:_e,message:"unauthenticated"};case 403:return{code:_e,message:"permission_denied"};case 404:return{code:_e,message:"not_found"};case 409:return{code:_e,message:"already_exists"};case 413:return{code:_e,message:"failed_precondition"};case 429:return{code:_e,message:"resource_exhausted"};case 499:return{code:_e,message:"cancelled"};default:return{code:_e,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:_e,message:"unimplemented"};case 503:return{code:_e,message:"unavailable"};case 504:return{code:_e,message:"deadline_exceeded"};default:return{code:_e,message:"internal_error"}}return{code:_e,message:"internal_error"}}function Rl(t,e){t.setAttribute("http.response.status_code",e);const n=Jh(e);n.message!=="unknown_error"&&t.setStatus(n)}const Pl="_sentryScope",Cl="_sentryIsolationScope";function Xh(t){try{const e=L.WeakRef;if(typeof e=="function")return new e(t)}catch{}return t}function Kh(t){if(t){if(typeof t=="object"&&"deref"in t&&typeof t.deref=="function")try{return t.deref()}catch{return}return t}}function Zh(t,e,n){t&&(Ce(t,Cl,Xh(n)),Ce(t,Pl,e))}function gs(t){const e=t;return{scope:e[Pl],isolationScope:Kh(e[Cl])}}const Ao="sentry-",Qh=/^sentry-/,eg=8192;function Al(t){const e=ng(t);if(!e)return;const n=Object.entries(e).reduce((r,[s,i])=>{if(s.match(Qh)){const o=s.slice(Ao.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function tg(t){if(!t)return;const e=Object.entries(t).reduce((n,[r,s])=>(s&&(n[`${Ao}${r}`]=s),n),{});return rg(e)}function ng(t){if(!(!t||!it(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,n)=>{const r=uc(n);return Object.entries(r).forEach(([s,i])=>{e[s]=i}),e},{}):uc(t)}function uc(t){return t.split(",").map(e=>{const n=e.indexOf("=");if(n===-1)return[];const r=e.slice(0,n),s=e.slice(n+1);return[r,s].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}function rg(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[n,r],s)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=s===0?i:`${e},${i}`;return o.length>eg?(k&&y.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),e):o},"")}const sg=/^o(\d+)\./,ig=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)((?:\[[:.%\w]+\]|[\w.-]+))(?::(\d+))?\/(.+)/;function og(t){return t==="http"||t==="https"}function Pn(t,e=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function ag(t){const e=ig.exec(t);if(!e){Tn(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[n,r,s="",i="",o="",a=""]=e.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const d=u.match(/^\d+/);d&&(u=d[0])}return $l({host:i,pass:s,path:c,projectId:u,port:o,protocol:n,publicKey:r})}function $l(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function cg(t){if(!k)return!0;const{port:e,projectId:n,protocol:r}=t;return["protocol","publicKey","host","projectId"].find(o=>t[o]?!1:(y.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?og(r)?e&&isNaN(parseInt(e,10))?(y.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(y.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(y.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function ug(t){return t.match(sg)?.[1]}function lg(t){const e=t.getOptions(),{host:n}=t.getDsn()||{};let r;return e.orgId?r=String(e.orgId):n&&(r=ug(n)),r}function dg(t){const e=typeof t=="string"?ag(t):$l(t);if(!(!e||!cg(e)))return e}function cr(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const Ol=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function pg(t){if(!t)return;const e=t.match(Ol);if(!e)return;let n;return e[3]==="1"?n=!0:e[3]==="0"&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}function fg(t,e){const n=pg(t),r=Al(e);if(!n?.traceId)return{traceId:lt(),sampleRand:wt()};const s=hg(n,r);r&&(r.sample_rand=s.toString());const{traceId:i,parentSpanId:o,parentSampled:a}=n;return{traceId:i,parentSpanId:o,sampled:a,dsc:r||{},sampleRand:s}}function Nl(t=lt(),e=ot(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${t}-${e}${r}`}function Fl(t=lt(),e=ot(),n){return`00-${t}-${e}-${n?"01":"00"}`}function hg(t,e){const n=cr(e?.sample_rand);if(n!==void 0)return n;const r=cr(e?.sample_rate);return r&&t?.parentSampled!==void 0?t.parentSampled?wt()*r:r+wt()*(1-r):wt()}const Ml=0,$o=1;let lc=!1;function gg(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:s,parent_span_id:i,status:o,origin:a,links:c}=j(t);return{parent_span_id:i,span_id:e,trace_id:n,data:r,op:s,status:o,origin:a,links:c}}function _g(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext(),s=r?e:j(t).parent_span_id,i=gs(t).scope,o=r?i?.getPropagationContext().propagationSpanId||ot():e;return{parent_span_id:s,span_id:o,trace_id:n}}function mg(t){const{traceId:e,spanId:n}=t.spanContext(),r=$t(t);return Nl(e,n,r)}function vg(t){const{traceId:e,spanId:n}=t.spanContext(),r=$t(t);return Fl(e,n,r)}function Ll(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:n,traceFlags:r,...s},attributes:i})=>({span_id:e,trace_id:n,sampled:r===$o,attributes:i,...s}))}function Bt(t){return typeof t=="number"?dc(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?dc(t.getTime()):be()}function dc(t){return t>9999999999?t/1e3:t}function j(t){if(bg(t))return t.getSpanJSON();const{spanId:e,traceId:n}=t.spanContext();if(yg(t)){const{attributes:r,startTime:s,name:i,endTime:o,status:a,links:c}=t,u="parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?t.parentSpanContext?.spanId:void 0;return{span_id:e,trace_id:n,data:r,description:i,parent_span_id:u,start_timestamp:Bt(s),timestamp:Bt(o)||void 0,status:Dl(a),op:r[dt],origin:r[ye],links:Ll(c)}}return{span_id:e,trace_id:n,start_timestamp:0,data:{}}}function yg(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function bg(t){return typeof t.getSpanJSON=="function"}function $t(t){const{traceFlags:e}=t.spanContext();return e===$o}function Dl(t){if(!(!t||t.code===Yh))return t.code===Co?"ok":t.message||"internal_error"}const jt="_sentryChildSpans",Gi="_sentryRootSpan";function Hl(t,e){const n=t[Gi]||t;Ce(e,Gi,n),t[jt]?t[jt].add(e):Ce(t,jt,new Set([e]))}function Eg(t,e){t[jt]&&t[jt].delete(e)}function Wr(t){const e=new Set;function n(r){if(!e.has(r)&&$t(r)){e.add(r);const s=r[jt]?Array.from(r[jt]):[];for(const i of s)n(i)}}return n(t),Array.from(e)}function Ie(t){return t[Gi]||t}function Ne(){const t=Yt(),e=xn(t);return e.getActiveSpan?e.getActiveSpan():hs(G())}function Vi(){lc||(Tn(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),lc=!0)}let pc=!1;function Sg(){if(pc)return;function t(){const e=Ne(),n=e&&Ie(e);if(n){const r="internal_error";k&&y.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:_e,message:r})}}t.tag="sentry_tracingErrorCallback",pc=!0,ml(t),vl(t)}function We(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=t||V()?.getOptions();return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}function fc(t){y.log(`Ignoring span ${t.op} - ${t.description} because it matches \`ignoreSpans\`.`)}function _s(t,e){if(!e?.length||!t.description)return!1;for(const n of e){if(Tg(n)){if(qr(t.description,n))return k&&fc(t),!0;continue}if(!n.name&&!n.op)continue;const r=n.name?qr(t.description,n.name):!0,s=n.op?t.op&&qr(t.op,n.op):!0;if(r&&s)return k&&fc(t),!0}return!1}function wg(t,e){const n=e.parent_span_id,r=e.span_id;if(n)for(const s of t)s.parent_span_id===r&&(s.parent_span_id=n)}function Tg(t){return typeof t=="string"||t instanceof RegExp}const Oo="production",Ul="_frozenDsc";function Gr(t,e){Ce(t,Ul,e)}function Bl(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},s={environment:n.environment||Oo,release:n.release,public_key:r,trace_id:t,org_id:lg(e)};return e.emit("createDsc",s),s}function jl(t,e){const n=e.getPropagationContext();return n.dsc||Bl(n.traceId,t)}function xt(t){const e=V();if(!e)return{};const n=Ie(t),r=j(n),s=r.data,i=n.spanContext().traceState,o=i?.get("sentry.sample_rate")??s[Ro]??s[xl];function a(h){return(typeof o=="number"||typeof o=="string")&&(h.sample_rate=`${o}`),h}const c=n[Ul];if(c)return a(c);const u=i?.get("sentry.dsc"),l=u&&Al(u);if(l)return a(l);const d=Bl(t.spanContext().traceId,e),f=s[Ye],p=r.description;return f!=="url"&&p&&(d.transaction=p),We()&&(d.sampled=String($t(n)),d.sample_rand=i?.get("sentry.sample_rand")??gs(n).scope?.getPropagationContext().sampleRand.toString()),a(d),e.emit("createDsc",d,n),d}class Rt{constructor(e={}){this._traceId=e.traceId||lt(),this._spanId=e.spanId||ot()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Ml}}end(e){}setAttribute(e,n){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,n,r){return this}addLink(e){return this}addLinks(e){return this}recordException(e,n){}}function tt(t,e=100,n=1/0){try{return zi("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function ql(t,e=3,n=100*1024){const r=tt(t,e);return Rg(r)>n?ql(t,e-1,n):r}function zi(t,e,n=1/0,r=1/0,s=Pg()){const[i,o]=s;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const a=Ig(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const c=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(e))return"[Circular ~]";const u=e;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return zi("",p,c-1,r,s)}catch{}const l=Array.isArray(e)?[]:{};let d=0;const f=Tl(e);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(d>=r){l[p]="[MaxProperties ~]";break}const h=f[p];l[p]=zi(p,h,c-1,r,s),d++}return o(e),l}function Ig(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(El(e))return _l(e);if(Ih(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${ct(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=kg(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function kg(t){const e=Object.getPrototypeOf(t);return e?.constructor?e.constructor.name:"null prototype"}function xg(t){return~-encodeURI(t).split(/%..|./).length}function Rg(t){return xg(JSON.stringify(t))}function Pg(){const t=new WeakSet;function e(r){return t.has(r)?!0:(t.add(r),!1)}function n(r){t.delete(r)}return[e,n]}function Xt(t,e=[]){return[t,e]}function Cg(t,e){const[n,r]=t;return[n,[...r,e]]}function Yi(t,e){const n=t[1];for(const r of n){const s=r[0].type;if(e(r,s))return!0}return!1}function Ag(t,e){return Yi(t,(n,r)=>e.includes(r))}function Ji(t){const e=Rs(L);return e.encodePolyfill?e.encodePolyfill(t):new TextEncoder().encode(t)}function $g(t){const[e,n]=t;let r=JSON.stringify(e);function s(i){typeof r=="string"?r=typeof i=="string"?r+i:[Ji(r),i]:r.push(typeof i=="string"?Ji(i):i)}for(const i of n){const[o,a]=i;if(s(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)s(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(tt(a))}s(c)}}return typeof r=="string"?r:Og(r)}function Og(t){const e=t.reduce((s,i)=>s+i.length,0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Ng(t){return[{type:"span"},t]}function Fg(t){const e=typeof t.data=="string"?Ji(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const Mg={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function hc(t){return Mg[t]}function Wl(t){if(!t?.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function Lg(t,e,n,r){const s=t.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:Pn(r)},...s&&{trace:s}}}function Dg(t,e){if(!e)return t;const n=t.sdk||{};return t.sdk={...n,name:n.name||e.name,version:n.version||e.version,integrations:[...t.sdk?.integrations||[],...e.integrations||[]],packages:[...t.sdk?.packages||[],...e.packages||[]],settings:t.sdk?.settings||e.settings?{...t.sdk?.settings,...e.settings}:void 0},t}function Hg(t,e,n,r){const s=Wl(n),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&e&&{dsn:Pn(e)}},o="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return Xt(i,[o])}function Ug(t,e,n,r){const s=Wl(n),i=t.type&&t.type!=="replay_event"?t.type:"event";Dg(t,n?.sdk);const o=Lg(t,s,r,e);return delete t.sdkProcessingMetadata,Xt(o,[[{type:i},t]])}function Bg(t,e){function n(p){return!!p.trace_id&&!!p.public_key}const r=xt(t[0]),s=e?.getDsn(),i=e?.getOptions().tunnel,o={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&s&&{dsn:Pn(s)}},{beforeSendSpan:a,ignoreSpans:c}=e?.getOptions()||{},u=c?.length?t.filter(p=>!_s(j(p),c)):t,l=t.length-u.length;l&&e?.recordDroppedEvent("before_send","span",l);const d=a?p=>{const h=j(p),g=a(h);return g||(Vi(),h)}:j,f=[];for(const p of u){const h=d(p);h&&f.push(Ng(h))}return Xt(o,f)}function jg(t){if(!k)return;const{description:e="< unknown name >",op:n="< unknown op >",parent_span_id:r}=j(t),{spanId:s}=t.spanContext(),i=$t(t),o=Ie(t),a=o===t,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${e}`,`ID: ${s}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:l,description:d}=j(o);u.push(`root ID: ${o.spanContext().spanId}`),l&&u.push(`root op: ${l}`),d&&u.push(`root description: ${d}`)}y.log(`${c}
  ${u.join(`
  `)}`)}function qg(t){if(!k)return;const{description:e="< unknown name >",op:n="< unknown op >"}=j(t),{spanId:r}=t.spanContext(),i=Ie(t)===t,o=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${e}" with ID ${r}`;y.log(o)}function Wg(t,e,n,r=Ne()){const s=r&&Ie(r);s&&(k&&y.log(`[Measurement] Setting measurement on root span: ${t} = ${e} ${n}`),s.addEvent(t,{[br]:e,[yr]:n}))}function gc(t){if(!t||t.length===0)return;const e={};return t.forEach(n=>{const r=n.attributes||{},s=r[yr],i=r[br];typeof s=="string"&&typeof i=="number"&&(e[n.name]={value:i,unit:s})}),e}const _c=1e3;class $s{constructor(e={}){this._traceId=e.traceId||lt(),this._spanId=e.spanId||ot(),this._startTime=e.startTimestamp||be(),this._links=e.links,this._attributes={},this.setAttributes({[ye]:"manual",[dt]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,n){}spanContext(){const{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?$o:Ml}}setAttribute(e,n){return n===void 0?delete this._attributes[e]:this._attributes[e]=n,this}setAttributes(e){return Object.keys(e).forEach(n=>this.setAttribute(n,e[n])),this}updateStartTime(e){this._startTime=Bt(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(Ye,"custom"),this}end(e){this._endTime||(this._endTime=Bt(e),qg(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[dt],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Dl(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[ye],profile_id:this._attributes[Po],exclusive_time:this._attributes[Rn],measurements:gc(this._events),is_segment:this._isStandaloneSpan&&Ie(this)===this||void 0,segment_id:this._isStandaloneSpan?Ie(this).spanContext().spanId:void 0,links:Ll(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,n,r){k&&y.log("[Tracing] Adding an event to span:",e);const s=mc(n)?n:r||be(),i=mc(n)?{}:n||{},o={name:e,time:Bt(s),attributes:i};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=V();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===Ie(this)))return;if(this._isStandaloneSpan){this._sampled?Vg(Bg([this],e)):(k&&y.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(gs(this).scope||G()).captureEvent(r)}_convertSpanToTransaction(){if(!vc(j(this)))return;this._name||(k&&y.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:n}=gs(this),r=e?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;const i=Wr(this).filter(l=>l!==this&&!Gg(l)).map(l=>j(l)).filter(vc),o=this._attributes[Ye];delete this._attributes[cc],i.forEach(l=>{delete l.data[cc]});const a={contexts:{trace:gg(this)},spans:i.length>_c?i.sort((l,d)=>l.start_timestamp-d.start_timestamp).slice(0,_c):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:n,dynamicSamplingContext:xt(this)},request:r,...o&&{transaction_info:{source:o}}},c=gc(this._events);return c&&Object.keys(c).length&&(k&&y.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function mc(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}function vc(t){return!!t.start_timestamp&&!!t.timestamp&&!!t.span_id&&!!t.trace_id}function Gg(t){return t instanceof $s&&t.isStandaloneSpan()}function Vg(t){const e=V();if(!e)return;const n=t[1];if(!n||n.length===0){e.recordDroppedEvent("before_send","span");return}e.sendEnvelope(t)}function zg(t,e,n=()=>{},r=()=>{}){let s;try{s=t()}catch(i){throw e(i),n(),i}return Yg(s,e,n,r)}function Yg(t,e,n,r){return kn(t)?t.then(s=>(n(),r(s),s),s=>{throw e(s),n(),s}):(n(),r(t),t)}function Jg(t,e,n){if(!We(t))return[!1];let r,s;typeof t.tracesSampler=="function"?(s=t.tracesSampler({...e,inheritOrSampleWith:a=>typeof e.parentSampleRate=="number"?e.parentSampleRate:typeof e.parentSampled=="boolean"?Number(e.parentSampled):a}),r=!0):e.parentSampled!==void 0?s=e.parentSampled:typeof t.tracesSampleRate<"u"&&(s=t.tracesSampleRate,r=!0);const i=cr(s);if(i===void 0)return k&&y.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!i)return k&&y.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];const o=n<i;return o||k&&y.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[o,i,r]}const Gl="__SENTRY_SUPPRESS_TRACING__";function Xg(t,e){const n=Fo();if(n.startSpan)return n.startSpan(t,e);const r=zl(t),{forceTransaction:s,parentSpan:i,scope:o}=t,a=o?.clone();return As(a,()=>Zg(i)(()=>{const u=G(),l=Yl(u,i),f=t.onlyIfParent&&!l?new Rt:Vl({parentSpan:l,spanArguments:r,forceTransaction:s,scope:u});return mn(u,f),zg(()=>e(f),()=>{const{status:p}=j(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:_e,message:"internal_error"})},()=>{f.end()})}))}function Cn(t){const e=Fo();if(e.startInactiveSpan)return e.startInactiveSpan(t);const n=zl(t),{forceTransaction:r,parentSpan:s}=t;return(t.scope?o=>As(t.scope,o):s!==void 0?o=>No(s,o):o=>o())(()=>{const o=G(),a=Yl(o,s);return t.onlyIfParent&&!a?new Rt:Vl({parentSpan:a,spanArguments:n,forceTransaction:r,scope:o})})}function No(t,e){const n=Fo();return n.withActiveSpan?n.withActiveSpan(t,e):As(r=>(mn(r,t||void 0),e(r)))}function Vl({parentSpan:t,spanArguments:e,forceTransaction:n,scope:r}){if(!We()){const o=new Rt;if(n||!t){const a={sampled:"false",sample_rate:"0",transaction:e.name,...xt(o)};Gr(o,a)}return o}const s=pt();let i;if(t&&!n)i=Kg(t,r,e),Hl(t,i);else if(t){const o=xt(t),{traceId:a,spanId:c}=t.spanContext(),u=$t(t);i=yc({traceId:a,parentSpanId:c,...e},r,u),Gr(i,o)}else{const{traceId:o,dsc:a,parentSpanId:c,sampled:u}={...s.getPropagationContext(),...r.getPropagationContext()};i=yc({traceId:o,parentSpanId:c,...e},r,u),a&&Gr(i,a)}return jg(i),Zh(i,r,s),i}function zl(t){const n={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const r={...n};return r.startTimestamp=Bt(t.startTime),delete r.startTime,r}return n}function Fo(){const t=Yt();return xn(t)}function yc(t,e,n){const r=V(),s=r?.getOptions()||{},{name:i=""}=t,o={spanAttributes:{...t.attributes},spanName:i,parentSampled:n};r?.emit("beforeSampling",o,{decision:!1});const a=o.parentSampled??n,c=o.spanAttributes,u=e.getPropagationContext(),[l,d,f]=e.getScopeData().sdkProcessingMetadata[Gl]?[!1]:Jg(s,{name:i,parentSampled:a,attributes:c,parentSampleRate:cr(u.dsc?.sample_rate)},u.sampleRand),p=new $s({...t,attributes:{[Ye]:"custom",[Ro]:d!==void 0&&f?d:void 0,...c},sampled:l});return!l&&r&&(k&&y.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function Kg(t,e,n){const{spanId:r,traceId:s}=t.spanContext(),i=e.getScopeData().sdkProcessingMetadata[Gl]?!1:$t(t),o=i?new $s({...n,parentSpanId:r,traceId:s,sampled:i}):new Rt({traceId:s});Hl(t,o);const a=V();return a&&(a.emit("spanStart",o),n.endTimestamp&&a.emit("spanEnd",o)),o}function Yl(t,e){if(e)return e;if(e===null)return;const n=hs(t);if(!n)return;const r=V();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Ie(n):n}function Zg(t){return t!==void 0?e=>No(t,e):e=>e()}const Vr={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},Qg="heartbeatFailed",e_="idleTimeout",t_="finalTimeout",n_="externalFinish";function Jl(t,e={}){const n=new Map;let r=!1,s,i=n_,o=!e.disableAutoFinish;const a=[],{idleTimeout:c=Vr.idleTimeout,finalTimeout:u=Vr.finalTimeout,childSpanTimeout:l=Vr.childSpanTimeout,beforeSpanEnd:d,trimIdleSpanEndTimestamp:f=!0}=e,p=V();if(!p||!We()){const C=new Rt,R={sample_rate:"0",sampled:"false",...xt(C)};return Gr(C,R),C}const h=G(),g=Ne(),m=r_(t);m.end=new Proxy(m.end,{apply(C,R,de){if(d&&d(m),R instanceof Rt)return;const[ae,...Z]=de,ce=ae||be(),re=Bt(ce),U=Wr(m).filter(A=>A!==m),ue=j(m);if(!U.length||!f)return ge(re),Reflect.apply(C,R,[re,...Z]);const pe=p.getOptions().ignoreSpans,fe=U?.reduce((A,X)=>{const H=j(X);return!H.timestamp||pe&&_s(H,pe)?A:A?Math.max(A,H.timestamp):H.timestamp},void 0),N=ue.start_timestamp,q=Math.min(N?N+u/1e3:1/0,Math.max(N||-1/0,Math.min(re,fe||1/0)));return ge(q),Reflect.apply(C,R,[q,...Z])}});function v(){s&&(clearTimeout(s),s=void 0)}function T(C){v(),s=setTimeout(()=>{!r&&n.size===0&&o&&(i=e_,m.end(C))},c)}function F(C){s=setTimeout(()=>{!r&&o&&(i=Qg,m.end(C))},l)}function O(C){v(),n.set(C,!0);const R=be();F(R+l/1e3)}function I(C){if(n.has(C)&&n.delete(C),n.size===0){const R=be();T(R+c/1e3)}}function ge(C){r=!0,n.clear(),a.forEach(U=>U()),mn(h,g);const R=j(m),{start_timestamp:de}=R;if(!de)return;R.data[ar]||m.setAttribute(ar,i);const Z=R.status;(!Z||Z==="unknown")&&m.setStatus({code:Co}),y.log(`[Tracing] Idle span "${R.op}" finished`);const ce=Wr(m).filter(U=>U!==m);let re=0;ce.forEach(U=>{U.isRecording()&&(U.setStatus({code:_e,message:"cancelled"}),U.end(C),k&&y.log("[Tracing] Cancelling span since span ended early",JSON.stringify(U,void 0,2)));const ue=j(U),{timestamp:pe=0,start_timestamp:fe=0}=ue,N=fe<=C,q=(u+c)/1e3,A=pe-fe<=q;if(k){const X=JSON.stringify(U,void 0,2);N?A||y.log("[Tracing] Discarding span since it finished after idle span final timeout",X):y.log("[Tracing] Discarding span since it happened after idle span was finished",X)}(!A||!N)&&(Eg(m,U),re++)}),re>0&&m.setAttribute("sentry.idle_span_discarded_spans",re)}return a.push(p.on("spanStart",C=>{if(r||C===m||j(C).timestamp||C instanceof $s&&C.isStandaloneSpan())return;Wr(m).includes(C)&&O(C.spanContext().spanId)})),a.push(p.on("spanEnd",C=>{r||I(C.spanContext().spanId)})),a.push(p.on("idleSpanEnableAutoFinish",C=>{C===m&&(o=!0,T(),n.size&&F())})),e.disableAutoFinish||T(),setTimeout(()=>{r||(m.setStatus({code:_e,message:"deadline_exceeded"}),i=t_,m.end())},u),m}function r_(t){const e=Cn(t);return mn(G(),e),k&&y.log("[Tracing] Started span is an idle span"),e}const ci=0,bc=1,Ec=2;function Os(t){return new ur(e=>{e(t)})}function Mo(t){return new ur((e,n)=>{n(t)})}class ur{constructor(e){this._state=ci,this._handlers=[],this._runExecutor(e)}then(e,n){return new ur((r,s)=>{this._handlers.push([!1,i=>{if(!e)r(i);else try{r(e(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new ur((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,e&&e()},o=>{i=!0,s=o,e&&e()}).then(()=>{if(i){r(s);return}n(s)})})}_executeHandlers(){if(this._state===ci)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===bc&&n[1](this._value),this._state===Ec&&n[2](this._value),n[0]=!0)})}_runExecutor(e){const n=(i,o)=>{if(this._state===ci){if(kn(o)){o.then(r,s);return}this._state=i,this._value=o,this._executeHandlers()}},r=i=>{n(bc,i)},s=i=>{n(Ec,i)};try{e(r,s)}catch(i){s(i)}}}function s_(t,e,n,r=0){try{const s=Xi(e,n,t,r);return kn(s)?s:Os(s)}catch(s){return Mo(s)}}function Xi(t,e,n,r){const s=n[r];if(!t||!s)return t;const i=s({...t},e);return k&&i===null&&y.log(`Event processor "${s.id||"?"}" dropped event`),kn(i)?i.then(o=>Xi(o,e,n,r+1)):Xi(i,e,n,r+1)}let Lt,Sc,wc,_t;function i_(t){const e=L._sentryDebugIds,n=L._debugIds;if(!e&&!n)return{};const r=e?Object.keys(e):[],s=n?Object.keys(n):[];if(_t&&r.length===Sc&&s.length===wc)return _t;Sc=r.length,wc=s.length,_t={},Lt||(Lt={});const i=(o,a)=>{for(const c of o){const u=a[c],l=Lt?.[c];if(l&&_t&&u)_t[l[0]]=u,Lt&&(Lt[c]=[l[0],u]);else if(u){const d=t(c);for(let f=d.length-1;f>=0;f--){const h=d[f]?.filename;if(h&&_t&&Lt){_t[h]=u,Lt[c]=[h,u];break}}}}};return e&&i(r,e),n&&i(s,n),_t}function o_(t,e){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=e;c_(t,e),r&&d_(t,r),p_(t,n),u_(t,s),l_(t,i)}function Tc(t,e){const{extra:n,tags:r,attributes:s,user:i,contexts:o,level:a,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:l,eventProcessors:d,attachments:f,propagationContext:p,transactionName:h,span:g}=e;jn(t,"extra",n),jn(t,"tags",r),jn(t,"attributes",s),jn(t,"user",i),jn(t,"contexts",o),t.sdkProcessingMetadata=vr(t.sdkProcessingMetadata,c,2),a&&(t.level=a),h&&(t.transactionName=h),g&&(t.span=g),u.length&&(t.breadcrumbs=[...t.breadcrumbs,...u]),l.length&&(t.fingerprint=[...t.fingerprint,...l]),d.length&&(t.eventProcessors=[...t.eventProcessors,...d]),f.length&&(t.attachments=[...t.attachments,...f]),t.propagationContext={...t.propagationContext,...p}}function jn(t,e,n){t[e]=vr(t[e],n,1)}function a_(t,e){const n=Wh().getScopeData();return t&&Tc(n,t.getScopeData()),e&&Tc(n,e.getScopeData()),n}function c_(t,e){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=e;Object.keys(n).length&&(t.extra={...n,...t.extra}),Object.keys(r).length&&(t.tags={...r,...t.tags}),Object.keys(s).length&&(t.user={...s,...t.user}),Object.keys(i).length&&(t.contexts={...i,...t.contexts}),o&&(t.level=o),a&&t.type!=="transaction"&&(t.transaction=a)}function u_(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function l_(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function d_(t,e){t.contexts={trace:_g(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:xt(e),...t.sdkProcessingMetadata};const n=Ie(e),r=j(n).description;r&&!t.transaction&&t.type==="transaction"&&(t.transaction=r)}function p_(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint.length||delete t.fingerprint}function f_(t,e,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,c={...e,event_id:e.event_id||n.event_id||Ue(),timestamp:e.timestamp||Jt()},u=n.integrations||t.integrations.map(m=>m.name);h_(c,t),m_(c,u),s&&s.emit("applyFrameMetadata",e),e.type===void 0&&g_(c,t.stackParser);const l=y_(r,n.captureContext);n.mechanism&&gn(c,n.mechanism);const d=s?s.getEventProcessors():[],f=a_(i,l),p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),o_(c,f);const h=[...d,...f.eventProcessors];return s_(h,c,n).then(m=>(m&&__(m),typeof o=="number"&&o>0?v_(m,o,a):m))}function h_(t,e){const{environment:n,release:r,dist:s,maxValueLength:i}=e;t.environment=t.environment||n||Oo,!t.release&&r&&(t.release=r),!t.dist&&s&&(t.dist=s);const o=t.request;o?.url&&i&&(o.url=ji(o.url,i)),i&&t.exception?.values?.forEach(a=>{a.value&&(a.value=ji(a.value,i))})}function g_(t,e){const n=i_(e);t.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(s=>{s.filename&&(s.debug_id=n[s.filename])})})}function __(t){const e={};if(t.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(s=>{s.debug_id&&(s.abs_path?e[s.abs_path]=s.debug_id:s.filename&&(e[s.filename]=s.debug_id),delete s.debug_id)})}),Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.entries(e).forEach(([r,s])=>{n.push({type:"sourcemap",code_file:r,debug_id:s})})}function m_(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function v_(t,e,n){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(s=>({...s,...s.data&&{data:tt(s.data,e,n)}}))},...t.user&&{user:tt(t.user,e,n)},...t.contexts&&{contexts:tt(t.contexts,e,n)},...t.extra&&{extra:tt(t.extra,e,n)}};return t.contexts?.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=tt(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(s=>({...s,...s.data&&{data:tt(s.data,e,n)}}))),t.contexts?.flags&&r.contexts&&(r.contexts.flags=tt(t.contexts.flags,3,n)),r}function y_(t,e){if(!e)return t;const n=t?t.clone():new Je;return n.update(e),n}function b_(t){if(t)return E_(t)?{captureContext:t}:w_(t)?{captureContext:t}:t}function E_(t){return t instanceof Je||typeof t=="function"}const S_=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function w_(t){return Object.keys(t).some(e=>S_.includes(e))}function T_(t,e){return G().captureException(t,b_(e))}function vE(t,e){const r={captureContext:e};return G().captureMessage(t,void 0,r)}function Xl(t,e){return G().captureEvent(t,e)}function I_(t,e){pt().setContext(t,e)}function k_(){const t=V();return t?.getOptions().enabled!==!1&&!!t?.getTransport()}function Ic(t){const e=pt(),n=G(),{userAgent:r}=L.navigator||{},s=Nh({user:n.getUser()||e.getUser(),...r&&{userAgent:r},...t}),i=e.getSession();return i?.status==="ok"&&_n(i,{status:"exited"}),Kl(),e.setSession(s),s}function Kl(){const t=pt(),n=G().getSession()||t.getSession();n&&Fh(n),Zl(),t.setSession()}function Zl(){const t=pt(),e=V(),n=t.getSession();n&&e&&e.captureSession(n)}function kc(t=!1){if(t){Kl();return}Zl()}const x_="7";function R_(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function P_(t){return`${R_(t)}${t.projectId}/envelope/`}function C_(t,e){const n={sentry_version:x_};return t.publicKey&&(n.sentry_key=t.publicKey),e&&(n.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(n).toString()}function A_(t,e,n){return e||`${P_(t)}?${C_(t,n)}`}const xc=[];function $_(t){const e={};return t.forEach(n=>{const{name:r}=n,s=e[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(e[r]=n)}),Object.values(e)}function O_(t){const e=t.defaultIntegrations||[],n=t.integrations;e.forEach(s=>{s.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...e,...n];else if(typeof n=="function"){const s=n(e);r=Array.isArray(s)?s:[s]}else r=e;return $_(r)}function N_(t,e){const n={};return e.forEach(r=>{r&&Ql(t,r,n)}),n}function Rc(t,e){for(const n of e)n?.afterAllSetup&&n.afterAllSetup(t)}function Ql(t,e,n){if(n[e.name]){k&&y.log(`Integration skipped because it was already installed: ${e.name}`);return}if(n[e.name]=e,!xc.includes(e.name)&&typeof e.setupOnce=="function"&&(e.setupOnce(),xc.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(s,i)=>r(s,i,t))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),s=Object.assign((i,o)=>r(i,o,t),{id:e.name});t.addEventProcessor(s)}k&&y.log(`Integration installed: ${e.name}`)}function F_(t){return[{type:"log",item_count:t.length,content_type:"application/vnd.sentry.items.log+json"},{items:t}]}function M_(t,e,n,r){const s={};return e?.sdk&&(s.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(s.dsn=Pn(r)),Xt(s,[F_(t)])}function ed(t,e){const n=e??L_(t)??[];if(n.length===0)return;const r=t.getOptions(),s=M_(n,r._metadata,r.tunnel,t.getDsn());td().set(t,[]),t.emit("flushLogs"),t.sendEnvelope(s)}function L_(t){return td().get(t)}function td(){return wn("clientToLogBufferMap",()=>new WeakMap)}function D_(t){return[{type:"trace_metric",item_count:t.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:t}]}function H_(t,e,n,r){const s={};return e?.sdk&&(s.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(s.dsn=Pn(r)),Xt(s,[D_(t)])}function nd(t,e){const n=e??U_(t)??[];if(n.length===0)return;const r=t.getOptions(),s=H_(n,r._metadata,r.tunnel,t.getDsn());rd().set(t,[]),t.emit("flushMetrics"),t.sendEnvelope(s)}function U_(t){return rd().get(t)}function rd(){return wn("clientToMetricBufferMap",()=>new WeakMap)}const Lo=Symbol.for("SentryBufferFullError");function Do(t=100){const e=new Set;function n(){return e.size<t}function r(o){e.delete(o)}function s(o){if(!n())return Mo(Lo);const a=o();return e.add(a),a.then(()=>r(a),()=>r(a)),a}function i(o){if(!e.size)return Os(!0);const a=Promise.allSettled(Array.from(e)).then(()=>!0);if(!o)return a;const c=[a,new Promise(u=>setTimeout(()=>u(!1),o))];return Promise.race(c)}return{get $(){return Array.from(e)},add:s,drain:i}}const B_=60*1e3;function j_(t,e=mr()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${t}`);return isNaN(r)?B_:r-e}function q_(t,e){return t[e]||t.all||0}function W_(t,e,n=mr()){return q_(t,e)>n}function G_(t,{statusCode:e,headers:n},r=mr()){const s={...t},i=n?.["x-sentry-rate-limits"],o=n?.["retry-after"];if(i)for(const a of i.trim().split(",")){const[c,u,,,l]=a.split(":",5),d=parseInt(c,10),f=(isNaN(d)?60:d)*1e3;if(!u)s.all=r+f;else for(const p of u.split(";"))p==="metric_bucket"?(!l||l.split(";").includes("custom"))&&(s[p]=r+f):s[p]=r+f}else o?s.all=r+j_(o,r):e===429&&(s.all=r+60*1e3);return s}const sd=64;function V_(t,e,n=Do(t.bufferSize||sd)){let r={};const s=o=>n.drain(o);function i(o){const a=[];if(Yi(o,(d,f)=>{const p=hc(f);W_(r,p)?t.recordDroppedEvent("ratelimit_backoff",p):a.push(d)}),a.length===0)return Promise.resolve({});const c=Xt(o[0],a),u=d=>{if(Ag(c,["client_report"])){k&&y.warn(`Dropping client report. Will not send outcomes (reason: ${d}).`);return}Yi(c,(f,p)=>{t.recordDroppedEvent(d,hc(p))})},l=()=>e({body:$g(c)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&k&&y.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=G_(r,d),d),d=>{throw u("network_error"),k&&y.error("Encountered error running transport request:",d),d});return n.add(l).then(d=>d,d=>{if(d===Lo)return k&&y.error("Skipped sending event because buffer is full."),u("queue_overflow"),Promise.resolve({});throw d})}return{send:i,flush:s}}function z_(t,e,n){const r=[{type:"client_report"},{timestamp:Jt(),discarded_events:t}];return Xt(e?{dsn:e}:{},[r])}function id(t){const e=[];t.message&&e.push(t.message);try{const n=t.exception.values[t.exception.values.length-1];n?.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`))}catch{}return e}function Y_(t){const{trace_id:e,parent_span_id:n,span_id:r,status:s,origin:i,data:o,op:a}=t.contexts?.trace??{};return{data:o??{},description:t.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:t.start_timestamp??0,status:s,timestamp:t.timestamp,trace_id:e??"",origin:i,profile_id:o?.[Po],exclusive_time:o?.[Rn],measurements:t.measurements,is_segment:!0}}function J_(t){return{type:"transaction",timestamp:t.timestamp,start_timestamp:t.start_timestamp,transaction:t.description,contexts:{trace:{trace_id:t.trace_id,span_id:t.span_id,parent_span_id:t.parent_span_id,op:t.op,status:t.status,origin:t.origin,data:{...t.data,...t.profile_id&&{[Po]:t.profile_id},...t.exclusive_time&&{[Rn]:t.exclusive_time}}}},measurements:t.measurements}}const Pc="Not capturing exception because it's already been captured.",Cc="Discarded session because of missing or non-string release",od=Symbol.for("SentryInternalError"),ad=Symbol.for("SentryDoNotSendEventError"),X_=5e3;function zr(t){return{message:t,[od]:!0}}function ui(t){return{message:t,[ad]:!0}}function Ac(t){return!!t&&typeof t=="object"&&od in t}function $c(t){return!!t&&typeof t=="object"&&ad in t}function Oc(t,e,n,r,s){let i=0,o,a=!1;t.on(n,()=>{i=0,clearTimeout(o),a=!1}),t.on(e,c=>{i+=r(c),i>=8e5?s(t):a||(a=!0,o=setTimeout(()=>{s(t)},X_))}),t.on("flush",()=>{s(t)})}class K_{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=Do(e.transportOptions?.bufferSize??sd),e.dsn?this._dsn=dg(e.dsn):k&&y.warn("No DSN provided, client will not send events."),this._dsn){const r=A_(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:r})}this._options.enableLogs=this._options.enableLogs??this._options._experiments?.enableLogs,this._options.enableLogs&&Oc(this,"afterCaptureLog","flushLogs",tm,ed),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&Oc(this,"afterCaptureMetric","flushMetrics",em,nd)}captureException(e,n,r){const s=Ue();if(ic(e))return k&&y.log(Pc),s;const i={event_id:s,...n};return this._process(()=>this.eventFromException(e,i).then(o=>this._captureEvent(o,i,r)).then(o=>o),"error"),i.event_id}captureMessage(e,n,r,s){const i={event_id:Ue(),...r},o=To(e)?e:String(e),a=hn(e),c=a?this.eventFromMessage(o,n,i):this.eventFromException(e,i);return this._process(()=>c.then(u=>this._captureEvent(u,i,s)),a?"unknown":"error"),i.event_id}captureEvent(e,n,r){const s=Ue();if(n?.originalException&&ic(n.originalException))return k&&y.log(Pc),s;const i={event_id:s,...n},o=e.sdkProcessingMetadata||{},a=o.capturedSpanScope,c=o.capturedSpanIsolationScope,u=Nc(e.type);return this._process(()=>this._captureEvent(e,i,a||r,c),u),i.event_id}captureSession(e){this.sendSession(e),_n(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(e){const n=this._transport;if(!n)return!0;this.emit("flush");const r=await this._isClientDoneProcessing(e),s=await n.flush(e);return r&&s}async close(e){const n=await this.flush(e);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];Ql(this,e,this._integrations),n||Rc(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=Ug(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=Cg(r,Fg(s));this.sendEnvelope(r).then(s=>this.emit("afterSendEvent",e,s))}sendSession(e){const{release:n,environment:r=Oo}=this._options;if("aggregates"in e){const i=e.attrs||{};if(!i.release&&!n){k&&y.warn(Cc);return}i.release=i.release||n,i.environment=i.environment||r,e.attrs=i}else{if(!e.release&&!n){k&&y.warn(Cc);return}e.release=e.release||n,e.environment=e.environment||r}this.emit("beforeSendSession",e);const s=Hg(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(e,n,r=1){if(this._options.sendClientReports){const s=`${e}:${n}`;k&&y.log(`Recording outcome: "${s}"${r>1?` (${r} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+r}}on(e,n){const r=this._hooks[e]=this._hooks[e]||new Set,s=(...i)=>n(...i);return r.add(s),()=>{r.delete(s)}}emit(e,...n){const r=this._hooks[e];r&&r.forEach(s=>s(...n))}async sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)try{return await this._transport.send(e)}catch(n){return k&&y.error("Error while sending envelope:",n),{}}return k&&y.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=N_(this,e),Rc(this,e)}_updateSessionFromEvent(e,n){let r=n.level==="fatal",s=!1;const i=n.exception?.values;if(i){s=!0,r=!1;for(const c of i)if(c.mechanism?.handled===!1){r=!0;break}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(_n(e,{...r&&{status:"crashed"},errors:e.errors||Number(s||r)}),this.captureSession(e))}async _isClientDoneProcessing(e){let n=0;for(;!e||n<e;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r,s){const i=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o?.length&&(n.integrations=o),this.emit("preprocessEvent",e,n),e.type||s.setLastEventId(e.event_id||n.event_id),f_(i,e,n,r,this,s).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:Gh(r),...a.contexts};const c=jl(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(e,n={},r=G(),s=pt()){return k&&Ki(e)&&y.log(`Captured error event \`${id(e)[0]||"<unknown>"}\``),this._processEvent(e,n,r,s).then(i=>i.event_id,i=>{k&&($c(i)?y.log(i.message):Ac(i)?y.warn(i.message):y.warn(i))})}_processEvent(e,n,r,s){const i=this.getOptions(),{sampleRate:o}=i,a=cd(e),c=Ki(e),l=`before send for type \`${e.type||"error"}\``,d=typeof o>"u"?void 0:cr(o);if(c&&typeof d=="number"&&wt()>d)return this.recordDroppedEvent("sample_rate","error"),Mo(ui(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const f=Nc(e.type);return this._prepareEvent(e,n,r,s).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f),ui("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return p;const g=Q_(this,i,p,n);return Z_(g,l)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",f),a){const v=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",v)}throw ui(`${l} returned \`null\`, will not send event.`)}const h=r.getSession()||s.getSession();if(c&&h&&this._updateSessionFromEvent(h,p),a){const m=p.sdkProcessingMetadata?.spanCountBeforeProcessing||0,v=p.spans?p.spans.length:0,T=m-v;T>0&&this.recordDroppedEvent("before_send","span",T)}const g=p.transaction_info;if(a&&g&&p.transaction!==e.transaction){const m="custom";p.transaction_info={...g,source:m}}return this.sendEvent(p,n),p}).then(null,p=>{throw $c(p)||Ac(p)?p:(this.captureException(p,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:p}),zr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(e,n){this._numProcessing++,this._promiseBuffer.add(e).then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r===Lo&&this.recordDroppedEvent("queue_overflow",n),r))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,r])=>{const[s,i]=n.split(":");return{reason:s,category:i,quantity:r}})}_flushOutcomes(){k&&y.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){k&&y.log("No outcomes to send");return}if(!this._dsn){k&&y.log("No dsn provided, will not send outcomes");return}k&&y.log("Sending outcomes:",e);const n=z_(e,this._options.tunnel&&Pn(this._dsn));this.sendEnvelope(n)}}function Nc(t){return t==="replay_event"?"replay":t||"error"}function Z_(t,e){const n=`${e} must return \`null\` or a valid event.`;if(kn(t))return t.then(r=>{if(!or(r)&&r!==null)throw zr(n);return r},r=>{throw zr(`${e} rejected with ${r}`)});if(!or(t)&&t!==null)throw zr(n);return t}function Q_(t,e,n,r){const{beforeSend:s,beforeSendTransaction:i,beforeSendSpan:o,ignoreSpans:a}=e;let c=n;if(Ki(c)&&s)return s(c,r);if(cd(c)){if(o||a){const u=Y_(c);if(a?.length&&_s(u,a))return null;if(o){const l=o(u);l?c=vr(n,J_(l)):Vi()}if(c.spans){const l=[],d=c.spans;for(const p of d){if(a?.length&&_s(p,a)){wg(d,p);continue}if(o){const h=o(p);h?l.push(h):(Vi(),l.push(p))}else l.push(p)}const f=c.spans.length-l.length;f&&t.recordDroppedEvent("before_send","span",f),c.spans=l}}if(i){if(c.spans){const u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return i(c,r)}}return c}function Ki(t){return t.type===void 0}function cd(t){return t.type==="transaction"}function em(t){let e=0;return t.name&&(e+=t.name.length*2),e+=8,e+ud(t.attributes)}function tm(t){let e=0;return t.message&&(e+=t.message.length*2),e+ud(t.attributes)}function ud(t){if(!t)return 0;let e=0;return Object.values(t).forEach(n=>{Array.isArray(n)?e+=n.length*Fc(n[0]):hn(n)?e+=Fc(n):e+=100}),e}function Fc(t){return typeof t=="string"?t.length*2:typeof t=="number"?8:typeof t=="boolean"?4:0}function nm(t){return Ps(t)&&"__sentry_fetch_url_host__"in t&&typeof t.__sentry_fetch_url_host__=="string"}function Mc(t){return nm(t)?`${t.message} (${t.__sentry_fetch_url_host__})`:t.message}function rm(t,e){e.debug===!0&&(k?y.enable():Tn(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),G().update(e.initialScope);const r=new t(e);return sm(r),r.init(),r}function sm(t){G().setClient(t)}const im="thismessage:/";function ld(t){return"isRelative"in t}function dd(t,e){const n=t.indexOf("://")<=0&&t.indexOf("//")!==0,r=n?im:void 0;try{if("canParse"in URL&&!URL.canParse(t,r))return;const s=new URL(t,r);return n?{isRelative:n,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function om(t){if(ld(t))return t.pathname;const e=new URL(t);return e.search="",e.hash="",["80","443"].includes(e.port)&&(e.port=""),e.password&&(e.password="%filtered%"),e.username&&(e.username="%filtered%"),e.toString()}function qt(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function am(t){return t.split(/[?#]/,1)[0]}function It(t,e=!0){if(t.startsWith("data:")){const n=t.match(/^data:([^;,]+)/),r=n?n[1]:"text/plain",s=t.includes(";base64,"),i=t.indexOf(",");let o="";if(e&&i!==-1){const a=t.slice(i+1);o=a.length>10?`${a.slice(0,10)}... [truncated]`:a}return`data:${r}${s?",base64":""}${o?`,${o}`:""}`}return t}function cm(t){"aggregates"in t?t.attrs?.ip_address===void 0&&(t.attrs={...t.attrs,ip_address:"{{auto}}"}):t.ipAddress===void 0&&(t.ipAddress="{{auto}}")}function pd(t,e,n=[e],r="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${e}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:Ut})),version:Ut}),t._metadata=s}function fd(t={}){const e=t.client||V();if(!k_()||!e)return{};const n=Yt(),r=xn(n);if(r.getTraceData)return r.getTraceData(t);const s=t.scope||G(),i=t.span||Ne(),o=i?mg(i):um(s),a=i?xt(i):jl(e,s),c=tg(a);if(!Ol.test(o))return y.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const l={"sentry-trace":o,baggage:c};return t.propagateTraceparent&&(l.traceparent=i?vg(i):lm(s)),l}function um(t){const{traceId:e,sampled:n,propagationSpanId:r}=t.getPropagationContext();return Nl(e,r,n)}function lm(t){const{traceId:e,sampled:n,propagationSpanId:r}=t.getPropagationContext();return Fl(e,r,n)}const dm=100;function zt(t,e){const n=V(),r=pt();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:i=dm}=n.getOptions();if(i<=0)return;const a={timestamp:Jt(),...t},c=s?Tn(()=>s(a,e)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,e),r.addBreadcrumb(c,i))}let Lc;const pm="FunctionToString",Dc=new WeakMap,fm=(()=>({name:pm,setupOnce(){Lc=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=xo(this),n=Dc.has(V())&&e!==void 0?e:this;return Lc.apply(n,t)}}catch{}},setup(t){Dc.set(t,!0)}})),hm=fm,gm=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],_m="EventFilters",mm=(t={})=>{let e;return{name:_m,setup(n){const r=n.getOptions();e=Hc(t,r)},processEvent(n,r,s){if(!e){const i=s.getOptions();e=Hc(t,i)}return ym(n,e)?null:n}}},vm=((t={})=>({...mm(t),name:"InboundFilters"}));function Hc(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:gm],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function ym(t,e){if(t.type){if(t.type==="transaction"&&Em(t,e.ignoreTransactions))return k&&y.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Ht(t)}`),!0}else{if(bm(t,e.ignoreErrors))return k&&y.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Ht(t)}`),!0;if(Im(t))return k&&y.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Ht(t)}`),!0;if(Sm(t,e.denyUrls))return k&&y.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Ht(t)}.
Url: ${ms(t)}`),!0;if(!wm(t,e.allowUrls))return k&&y.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Ht(t)}.
Url: ${ms(t)}`),!0}return!1}function bm(t,e){return e?.length?id(t).some(n=>Tt(n,e)):!1}function Em(t,e){if(!e?.length)return!1;const n=t.transaction;return n?Tt(n,e):!1}function Sm(t,e){if(!e?.length)return!1;const n=ms(t);return n?Tt(n,e):!1}function wm(t,e){if(!e?.length)return!0;const n=ms(t);return n?Tt(n,e):!0}function Tm(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function ms(t){try{const n=[...t.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?Tm(n):null}catch{return k&&y.error(`Cannot extract url for event ${Ht(t)}`),null}}function Im(t){return t.exception?.values?.length?!t.message&&!t.exception.values.some(e=>e.stacktrace||e.type&&e.type!=="Error"||e.value):!1}function km(t,e,n,r,s,i){if(!s.exception?.values||!i||!ut(i.originalException,Error))return;const o=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;o&&(s.exception.values=Zi(t,e,r,i.originalException,n,s.exception.values,o,0))}function Zi(t,e,n,r,s,i,o,a){if(i.length>=n+1)return i;let c=[...i];if(ut(r[s],Error)){Uc(o,a);const u=t(e,r[s]),l=c.length;Bc(u,s,l,a),c=Zi(t,e,n,r[s],s,[u,...c],u,l)}return Array.isArray(r.errors)&&r.errors.forEach((u,l)=>{if(ut(u,Error)){Uc(o,a);const d=t(e,u),f=c.length;Bc(d,`errors[${l}]`,f,a),c=Zi(t,e,n,u,s,[d,...c],d,f)}}),c}function Uc(t,e){t.mechanism={handled:!0,type:"auto.core.linked_errors",...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function Bc(t,e,n,r){t.mechanism={handled:!0,...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function xm(t){const e="console";Ct(e,t),At(e,Rm)}function Rm(){"console"in L&&dh.forEach(function(t){t in L.console&&$e(L.console,t,function(e){return fs[t]=e,function(...n){He("console",{args:n,level:t}),fs[t]?.apply(L.console,n)}})})}function Pm(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const Cm="Dedupe",Am=(()=>{let t;return{name:Cm,processEvent(e){if(e.type)return e;try{if(Om(e,t))return k&&y.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}}),$m=Am;function Om(t,e){return e?!!(Nm(t,e)||Fm(t,e)):!1}function Nm(t,e){const n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!gd(t,e)||!hd(t,e))}function Fm(t,e){const n=jc(e),r=jc(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!gd(t,e)||!hd(t,e))}function hd(t,e){let n=Qa(t),r=Qa(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const i=r[s],o=n[s];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function gd(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function jc(t){return t.exception?.values?.[0]}const Mm="ConversationId",Lm=(()=>({name:Mm,setup(t){t.on("spanStart",e=>{const n=G().getScopeData(),r=pt().getScopeData(),s=n.conversationId||r.conversationId;s&&e.setAttribute(zh,s)})}})),Dm=Lm;function Hm(t,e,n,r,s){if(!t.fetchData)return;const{method:i,url:o}=t.fetchData,a=We()&&e(o);if(t.endTimestamp&&a){const p=t.fetchData.__span;if(!p)return;const h=r[p];h&&(jm(h,t),Um(h,t,s),delete r[p]);return}const{spanOrigin:c="auto.http.browser",propagateTraceparent:u=!1}=typeof s=="object"?s:{spanOrigin:s},l=!!Ne(),d=a&&l?Cn(Wm(o,i,c)):new Rt;if(t.fetchData.__span=d.spanContext().spanId,r[d.spanContext().spanId]=d,n(t.fetchData.url)){const p=t.args[0],h={...t.args[1]||{}},g=Bm(p,h,We()&&l?d:void 0,u);g&&(t.args[1]=h,h.headers=g)}const f=V();if(f){const p={input:t.args,response:t.response,startTimestamp:t.startTimestamp,endTimestamp:t.endTimestamp};f.emit("beforeOutgoingRequestSpan",d,p)}return d}function Um(t,e,n){(typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0)?.(t,{headers:e.response?.headers,error:e.error})}function Bm(t,e,n,r){const s=fd({span:n,propagateTraceparent:r}),i=s["sentry-trace"],o=s.baggage,a=s.traceparent;if(!i)return;const c=e.headers||(Io(t)?t.headers:void 0);if(c)if(qm(c)){const u=new Headers(c);if(u.get("sentry-trace")||u.set("sentry-trace",i),r&&a&&!u.get("traceparent")&&u.set("traceparent",a),o){const l=u.get("baggage");l?Fr(l)||u.set("baggage",`${l},${o}`):u.set("baggage",o)}return u}else if(Array.isArray(c)){const u=[...c];c.find(d=>d[0]==="sentry-trace")||u.push(["sentry-trace",i]),r&&a&&!c.find(d=>d[0]==="traceparent")&&u.push(["traceparent",a]);const l=c.find(d=>d[0]==="baggage"&&Fr(d[1]));return o&&!l&&u.push(["baggage",o]),u}else{const u="sentry-trace"in c?c["sentry-trace"]:void 0,l="traceparent"in c?c.traceparent:void 0,d="baggage"in c?c.baggage:void 0,f=d?Array.isArray(d)?[...d]:[d]:[],p=d&&(Array.isArray(d)?d.find(g=>Fr(g)):Fr(d));o&&!p&&f.push(o);const h={...c,"sentry-trace":u??i,baggage:f.length>0?f.join(","):void 0};return r&&a&&!l&&(h.traceparent=a),h}else return{...s}}function jm(t,e){if(e.response){Rl(t,e.response.status);const n=e.response?.headers?.get("content-length");if(n){const r=parseInt(n);r>0&&t.setAttribute("http.response_content_length",r)}}else e.error&&t.setStatus({code:_e,message:"internal_error"});t.end()}function Fr(t){return t.split(",").some(e=>e.trim().startsWith(Ao))}function qm(t){return typeof Headers<"u"&&ut(t,Headers)}function Wm(t,e,n){if(t.startsWith("data:")){const i=It(t);return{name:`${e} ${i}`,attributes:qc(t,void 0,e,n)}}const r=dd(t),s=r?om(r):t;return{name:`${e} ${s}`,attributes:qc(t,r,e,n)}}function qc(t,e,n,r){const s={url:It(t),type:"fetch","http.method":n,[ye]:r,[dt]:"http.client"};return e&&(ld(e)||(s["http.url"]=It(e.href),s["server.address"]=e.host),e.search&&(s["http.query"]=e.search),e.hash&&(s["http.fragment"]=e.hash)),s}function _d(t){if(t!==void 0)return t>=400&&t<500?"warning":t>=500?"error":void 0}const lr=L;function Gm(){return"history"in lr&&!!lr.history}function Vm(){if(!("fetch"in lr))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function Qi(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function zm(){if(typeof EdgeRuntime=="string")return!0;if(!Vm())return!1;if(Qi(lr.fetch))return!0;let t=!1;const e=lr.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow?.fetch&&(t=Qi(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){k&&y.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function md(t,e){const n="fetch";Ct(n,t),At(n,()=>vd(void 0,e))}function Ym(t){const e="fetch-body-resolved";Ct(e,t),At(e,()=>vd(Xm))}function vd(t,e=!1){e&&!zm()||$e(L,"fetch",function(n){return function(...r){const s=new Error,{method:i,url:o}=Km(r),a={args:r,fetchData:{method:i,url:o},startTimestamp:be()*1e3,virtualError:s,headers:Zm(r)};return t||He("fetch",{...a}),n.apply(L,r).then(async c=>(t?t(c):He("fetch",{...a,endTimestamp:be()*1e3,response:c}),c),c=>{He("fetch",{...a,endTimestamp:be()*1e3,error:c}),Ps(c)&&c.stack===void 0&&(c.stack=s.stack,Ce(c,"framesToPop",1));const l=V()?.getOptions().enhanceFetchErrorMessages??"always";if(l!==!1&&c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const p=new URL(a.fetchData.url).host;l==="always"?c.message=`${c.message} (${p})`:Ce(c,"__sentry_fetch_url_host__",p)}catch{}throw c})}})}async function Jm(t,e){if(t?.body){const n=t.body,r=n.getReader(),s=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let i=!0;for(;i;){let o;try{o=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:a}=await r.read();clearTimeout(o),a&&(e(),i=!1)}catch{i=!1}finally{clearTimeout(o)}}clearTimeout(s),r.releaseLock(),n.cancel().then(null,()=>{})}}function Xm(t){let e;try{e=t.clone()}catch{return}Jm(e,()=>{He("fetch-body-resolved",{endTimestamp:be()*1e3,response:t})})}function Yr(t,e){return!!t&&typeof t=="object"&&!!t[e]}function Wc(t){return typeof t=="string"?t:t?Yr(t,"url")?t.url:t.toString?t.toString():"":""}function Km(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[n,r]=t;return{url:Wc(n),method:Yr(r,"method")?String(r.method).toUpperCase():Io(n)&&Yr(n,"method")?String(n.method).toUpperCase():"GET"}}const e=t[0];return{url:Wc(e),method:Yr(e,"method")?String(e.method).toUpperCase():"GET"}}function Zm(t){const[e,n]=t;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(Io(e))return new Headers(e.headers)}catch{}}function Qm(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function ev(){return"npm"}function tv(){return!Qm()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function nv(){return typeof window<"u"&&(!tv()||rv())}function rv(){return L.process?.type==="renderer"}const D=L;let eo=0;function yd(){return eo>0}function sv(){eo++,setTimeout(()=>{eo--})}function yn(t,e={}){function n(s){return typeof s=="function"}if(!n(t))return t;try{const s=t.__sentry_wrapped__;if(s)return typeof s=="function"?s:t;if(xo(t))return t}catch{return t}const r=function(...s){try{const i=s.map(o=>yn(o,e));return t.apply(this,i)}catch(i){throw sv(),As(o=>{o.addEventProcessor(a=>(e.mechanism&&(qi(a,void 0),gn(a,e.mechanism)),a.extra={...a.extra,arguments:s},a)),T_(i)}),i}};try{for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}catch{}wl(r,t),Ce(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch{}return r}function Ho(){const t=gr(),{referrer:e}=D.document||{},{userAgent:n}=D.navigator||{},r={...e&&{Referer:e},...n&&{"User-Agent":n}};return{url:t,headers:r}}function Uo(t,e){const n=Bo(t,e),r={type:uv(e),value:lv(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function iv(t,e,n,r){const i=V()?.getOptions().normalizeDepth,o=gv(e),a={__serialized__:ql(e,i)};if(o)return{exception:{values:[Uo(t,o)]},extra:a};const c={exception:{values:[{type:Cs(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:fv(e,{isUnhandledRejection:r})}]},extra:a};if(n){const u=Bo(t,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function li(t,e){return{exception:{values:[Uo(t,e)]}}}function Bo(t,e){const n=e.stacktrace||e.stack||"",r=av(e),s=cv(e);try{return t(n,r,s)}catch{}return[]}const ov=/Minified React error #\d+;/i;function av(t){return t&&ov.test(t.message)?1:0}function cv(t){return typeof t.framesToPop=="number"?t.framesToPop:0}function bd(t){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?t instanceof WebAssembly.Exception:!1}function uv(t){const e=t?.name;return!e&&bd(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function lv(t){const e=t?.message;return bd(t)?Array.isArray(t.message)&&t.message.length==2?t.message[1]:"wasm exception":e?e.error&&typeof e.error.message=="string"?Mc(e.error):Mc(t):"No error message"}function dv(t,e,n,r){const s=n?.syntheticException||void 0,i=jo(t,e,s,r);return gn(i),i.level="error",n?.event_id&&(i.event_id=n.event_id),Os(i)}function pv(t,e,n="info",r,s){const i=r?.syntheticException||void 0,o=to(t,e,i,s);return o.level=n,r?.event_id&&(o.event_id=r.event_id),Os(o)}function jo(t,e,n,r,s){let i;if(bl(e)&&e.error)return li(t,e.error);if(tc(e)||Sh(e)){const o=e;if("stack"in e)i=li(t,e);else{const a=o.name||(tc(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;i=to(t,c,n,r),qi(i,c)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return Ps(e)?li(t,e):or(e)||Cs(e)?(i=iv(t,e,n,s),gn(i,{synthetic:!0}),i):(i=to(t,e,n,r),qi(i,`${e}`),gn(i,{synthetic:!0}),i)}function to(t,e,n,r){const s={};if(r&&n){const i=Bo(t,n);i.length&&(s.exception={values:[{value:e,stacktrace:{frames:i}}]}),gn(s,{synthetic:!0})}if(To(e)){const{__sentry_template_string__:i,__sentry_template_values__:o}=e;return s.logentry={message:i,params:o},s}return s.message=e,s}function fv(t,{isUnhandledRejection:e}){const n=Rh(t),r=e?"promise rejection":"exception";return bl(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:Cs(t)?`Event \`${hv(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function hv(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function gv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];if(n instanceof Error)return n}}class _v extends K_{constructor(e){const n=mv(e),r=D.SENTRY_SDK_SOURCE||ev();pd(n,"browser",["browser"],r),n._metadata?.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);const{sendDefaultPii:s,sendClientReports:i,enableLogs:o,_experiments:a,enableMetrics:c}=this._options,u=c??a?.enableMetrics??!0;D.document&&(i||o||u)&&D.document.addEventListener("visibilitychange",()=>{D.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),o&&ed(this),u&&nd(this))}),s&&this.on("beforeSendSession",cm)}eventFromException(e,n){return dv(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return pv(this._options.stackParser,e,n,r,this._options.attachStacktrace)}_prepareEvent(e,n,r,s){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r,s)}}function mv(t){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:D.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...t}}const Er=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,$=L,vv=(t,e)=>t>e[1]?"poor":t>e[0]?"needs-improvement":"good",Sr=(t,e,n,r)=>{let s,i;return o=>{e.value>=0&&(o||r)&&(i=e.value-(s??0),(i||s===void 0)&&(s=e.value,e.delta=i,e.rating=vv(e.value,n),t(e)))}},wr=(t=!0)=>{const e=$.performance?.getEntriesByType?.("navigation")[0];if(!t||e&&e.responseStart>0&&e.responseStart<performance.now())return e},An=()=>wr()?.activationStart??0;function kt(t,e,n){$.document&&$.addEventListener(t,e,n)}function vs(t,e,n){$.document&&$.removeEventListener(t,e,n)}let ln=-1;const Ed=new Set,yv=()=>$.document?.visibilityState==="hidden"&&!$.document?.prerendering?0:1/0,Jr=t=>{if(bv(t)&&ln>-1){if(t.type==="visibilitychange"||t.type==="pagehide")for(const e of Ed)e();isFinite(ln)||(ln=t.type==="visibilitychange"?t.timeStamp:0,vs("prerenderingchange",Jr,!0))}},Tr=()=>{if($.document&&ln<0){const t=An();ln=($.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>t)[0]?.startTime)??yv(),kt("visibilitychange",Jr,!0),kt("pagehide",Jr,!0),kt("prerenderingchange",Jr,!0)}return{get firstHiddenTime(){return ln},onHidden(t){Ed.add(t)}}};function bv(t){return t.type==="pagehide"||$.document?.visibilityState==="hidden"}const Ev=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Ir=(t,e=-1)=>{const n=wr();let r="navigate";return n&&($.document?.prerendering||An()>0?r="prerender":$.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:Ev(),navigationType:r}},di=new WeakMap;function qo(t,e){try{return di.get(t)||di.set(t,new e),di.get(t)}catch{return new e}}class ys{constructor(){ys.prototype.__init.call(this),ys.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(e){if(e.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&e.startTime-r.startTime<1e3&&e.startTime-n.startTime<5e3?(this._sessionValue+=e.value,this._sessionEntries.push(e)):(this._sessionValue=e.value,this._sessionEntries=[e]),this._onAfterProcessingUnexpectedShift?.(e)}}const $n=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(s=>{Promise.resolve().then(()=>{e(s.getEntries())})});return r.observe({type:t,buffered:!0,...n}),r}}catch{}},Wo=t=>{let e=!1;return()=>{e||(t(),e=!0)}},Ns=t=>{$.document?.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},Sv=[1800,3e3],wv=(t,e={})=>{Ns(()=>{const n=Tr(),r=Ir("FCP");let s;const o=$n("paint",a=>{for(const c of a)c.name==="first-contentful-paint"&&(o.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-An(),0),r.entries.push(c),s(!0)))});o&&(s=Sr(t,r,Sv,e.reportAllChanges))})},Tv=[.1,.25],Iv=(t,e={})=>{wv(Wo(()=>{const n=Ir("CLS",0);let r;const s=Tr(),i=qo(e,ys),o=c=>{for(const u of c)i._processEntry(u);i._sessionValue>n.value&&(n.value=i._sessionValue,n.entries=i._sessionEntries,r())},a=$n("layout-shift",o);a&&(r=Sr(t,n,Tv,e.reportAllChanges),s.onHidden(()=>{o(a.takeRecords()),r(!0)}),$?.setTimeout?.(r))}))};let Sd=0,pi=1/0,Mr=0;const kv=t=>{t.forEach(e=>{e.interactionId&&(pi=Math.min(pi,e.interactionId),Mr=Math.max(Mr,e.interactionId),Sd=Mr?(Mr-pi)/7+1:0)})};let no;const wd=()=>no?Sd:performance.interactionCount||0,xv=()=>{"interactionCount"in performance||no||(no=$n("event",kv,{type:"event",buffered:!0,durationThreshold:0}))},fi=10;let Td=0;const Rv=()=>wd()-Td;class bs{constructor(){bs.prototype.__init.call(this),bs.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){Td=wd(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const e=Math.min(this._longestInteractionList.length-1,Math.floor(Rv()/50));return this._longestInteractionList[e]}_processEntry(e){if(this._onBeforeProcessingEntry?.(e),!(e.interactionId||e.entryType==="first-input"))return;const n=this._longestInteractionList.at(-1);let r=this._longestInteractionMap.get(e.interactionId);if(r||this._longestInteractionList.length<fi||e.duration>n._latency){if(r?e.duration>r._latency?(r.entries=[e],r._latency=e.duration):e.duration===r._latency&&e.startTime===r.entries[0].startTime&&r.entries.push(e):(r={id:e.interactionId,entries:[e],_latency:e.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((s,i)=>i._latency-s._latency),this._longestInteractionList.length>fi){const s=this._longestInteractionList.splice(fi);for(const i of s)this._longestInteractionMap.delete(i.id)}this._onAfterProcessingINPCandidate?.(r)}}}const Id=t=>{const e=$.requestIdleCallback||$.setTimeout;$.document?.visibilityState==="hidden"?t():(t=Wo(t),kt("visibilitychange",t,{once:!0,capture:!0}),kt("pagehide",t,{once:!0,capture:!0}),e(()=>{t(),vs("visibilitychange",t,{capture:!0}),vs("pagehide",t,{capture:!0})}))},Pv=[200,500],Cv=40,Av=(t,e={})=>{if(!(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return;const n=Tr();Ns(()=>{xv();const r=Ir("INP");let s;const i=qo(e,bs),o=c=>{Id(()=>{for(const l of c)i._processEntry(l);const u=i._estimateP98LongestInteraction();u&&u._latency!==r.value&&(r.value=u._latency,r.entries=u.entries,s())})},a=$n("event",o,{durationThreshold:e.durationThreshold??Cv});s=Sr(t,r,Pv,e.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{o(a.takeRecords()),s(!0)}))})};class $v{_processEntry(e){this._onBeforeProcessingEntry?.(e)}}const Ov=[2500,4e3],Nv=(t,e={})=>{Ns(()=>{const n=Tr(),r=Ir("LCP");let s;const i=qo(e,$v),o=c=>{e.reportAllChanges||(c=c.slice(-1));for(const u of c)i._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-An(),0),r.entries=[u],s())},a=$n("largest-contentful-paint",o);if(a){s=Sr(t,r,Ov,e.reportAllChanges);const c=Wo(()=>{o(a.takeRecords()),a.disconnect(),s(!0)}),u=l=>{l.isTrusted&&(Id(c),vs(l.type,u,{capture:!0}))};for(const l of["keydown","click","visibilitychange"])kt(l,u,{capture:!0})}})},Fv=[800,1800],ro=t=>{$.document?.prerendering?Ns(()=>ro(t)):$.document?.readyState!=="complete"?addEventListener("load",()=>ro(t),!0):setTimeout(t)},Mv=(t,e={})=>{const n=Ir("TTFB"),r=Sr(t,n,Fv,e.reportAllChanges);ro(()=>{const s=wr();s&&(n.value=Math.max(s.responseStart-An(),0),n.entries=[s],r(!0))})},er={},Es={};let kd,xd,Rd,Pd;function Cd(t,e=!1){return Fs("cls",t,Hv,kd,e)}function Ad(t,e=!1){return Fs("lcp",t,Uv,xd,e)}function Lv(t){return Fs("ttfb",t,Bv,Rd)}function Dv(t){return Fs("inp",t,jv,Pd)}function bn(t,e){return $d(t,e),Es[t]||(qv(t),Es[t]=!0),Od(t,e)}function kr(t,e){const n=er[t];if(n?.length)for(const r of n)try{r(e)}catch(s){Er&&y.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${ct(r)}
Error:`,s)}}function Hv(){return Iv(t=>{kr("cls",{metric:t}),kd=t},{reportAllChanges:!0})}function Uv(){return Nv(t=>{kr("lcp",{metric:t}),xd=t},{reportAllChanges:!0})}function Bv(){return Mv(t=>{kr("ttfb",{metric:t}),Rd=t})}function jv(){return Av(t=>{kr("inp",{metric:t}),Pd=t})}function Fs(t,e,n,r,s=!1){$d(t,e);let i;return Es[t]||(i=n(),Es[t]=!0),r&&e({metric:r}),Od(t,e,s?i:void 0)}function qv(t){const e={};t==="event"&&(e.durationThreshold=0),$n(t,n=>{kr(t,{entries:n})},e)}function $d(t,e){er[t]=er[t]||[],er[t].push(e)}function Od(t,e,n){return()=>{n&&n();const r=er[t];if(!r)return;const s=r.indexOf(e);s!==-1&&r.splice(s,1)}}function Wv(t){return"duration"in t}const Gv=t=>{const e=n=>{(n.type==="pagehide"||$.document?.visibilityState==="hidden")&&t(n)};kt("visibilitychange",e,{capture:!0,once:!0}),kt("pagehide",e,{capture:!0,once:!0})};function hi(t){return typeof t=="number"&&isFinite(t)}function Pt(t,e,n,{...r}){const s=j(t).start_timestamp;return s&&s>e&&typeof t.updateStartTime=="function"&&t.updateStartTime(e),No(t,()=>{const i=Cn({startTime:e,...r});return i&&i.end(n),i})}function Go(t){const e=V();if(!e)return;const{name:n,transaction:r,attributes:s,startTime:i}=t,{release:o,environment:a,sendDefaultPii:c}=e.getOptions(),l=e.getIntegrationByName("Replay")?.getReplayId(),d=G(),f=d.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0;let h;try{h=d.getScopeData().contexts.profile.profile_id}catch{}const g={release:o,environment:a,user:p||void 0,profile_id:h||void 0,replay_id:l||void 0,transaction:r,"user_agent.original":$.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...s};return Cn({name:n,attributes:g,startTime:i,experimental:{standalone:!0}})}function xr(){return $.addEventListener&&$.performance}function ie(t){return t/1e3}function Vv(t){let e="unknown",n="unknown",r="";for(const s of t){if(s==="/"){[e,n]=t.split("/");break}if(!isNaN(Number(s))){e=r==="h"?"http":r,n=t.split(r)[1];break}r+=s}return r===t&&(e=r),{name:e,version:n}}function Nd(t){try{return PerformanceObserver.supportedEntryTypes.includes(t)}catch{return!1}}function Fd(t,e){let n,r=!1;function s(a){!r&&n&&e(a,n),r=!0}Gv(()=>{s("pagehide")});const i=t.on("beforeStartNavigationSpan",(a,c)=>{c?.isRedirect||(s("navigation"),i(),o())}),o=t.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,o()})}function zv(t){let e=0,n;if(!Nd("layout-shift"))return;const r=Cd(({metric:s})=>{const i=s.entries[s.entries.length-1];i&&(e=s.value,n=i)},!0);Fd(t,(s,i)=>{Yv(e,n,i,s),r()})}function Yv(t,e,n,r){Er&&y.log(`Sending CLS span (${t})`);const s=e?ie((Oe()||0)+e.startTime):be(),i=G().getScopeData().transactionName,o=e?Be(e.sources[0]?.node):"Layout shift",a={[ye]:"auto.http.browser.cls",[dt]:"ui.webvital.cls",[Rn]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};e?.sources&&e.sources.forEach((u,l)=>{a[`cls.source.${l+1}`]=Be(u.node)});const c=Go({name:o,transaction:i,attributes:a,startTime:s});c&&(c.addEvent("cls",{[yr]:"",[br]:t}),c.end(s))}function Jv(t){let e=0,n;if(!Nd("largest-contentful-paint"))return;const r=Ad(({metric:s})=>{const i=s.entries[s.entries.length-1];i&&(e=s.value,n=i)},!0);Fd(t,(s,i)=>{Xv(e,n,i,s),r()})}function Xv(t,e,n,r){Er&&y.log(`Sending LCP span (${t})`);const s=ie((Oe()||0)+(e?.startTime||0)),i=G().getScopeData().transactionName,o=e?Be(e.element):"Largest contentful paint",a={[ye]:"auto.http.browser.lcp",[dt]:"ui.webvital.lcp",[Rn]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};e&&(e.element&&(a["lcp.element"]=Be(e.element)),e.id&&(a["lcp.id"]=e.id),e.url&&(a["lcp.url"]=e.url),e.loadTime!=null&&(a["lcp.loadTime"]=e.loadTime),e.renderTime!=null&&(a["lcp.renderTime"]=e.renderTime),e.size!=null&&(a["lcp.size"]=e.size));const c=Go({name:o,transaction:i,attributes:a,startTime:s});c&&(c.addEvent("lcp",{[yr]:"millisecond",[br]:t}),c.end(s))}function Fe(t){return t&&((Oe()||performance.timeOrigin)+t)/1e3}function Md(t){const e={};if(t.nextHopProtocol!=null){const{name:n,version:r}=Vv(t.nextHopProtocol);e["network.protocol.version"]=r,e["network.protocol.name"]=n}return Oe()||xr()?.timeOrigin?Kv({...e,"http.request.redirect_start":Fe(t.redirectStart),"http.request.redirect_end":Fe(t.redirectEnd),"http.request.worker_start":Fe(t.workerStart),"http.request.fetch_start":Fe(t.fetchStart),"http.request.domain_lookup_start":Fe(t.domainLookupStart),"http.request.domain_lookup_end":Fe(t.domainLookupEnd),"http.request.connect_start":Fe(t.connectStart),"http.request.secure_connection_start":Fe(t.secureConnectionStart),"http.request.connection_end":Fe(t.connectEnd),"http.request.request_start":Fe(t.requestStart),"http.request.response_start":Fe(t.responseStart),"http.request.response_end":Fe(t.responseEnd),"http.request.time_to_first_byte":t.responseStart!=null?t.responseStart/1e3:void 0}):e}function Kv(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!=null))}const Zv=2147483647;let Gc=0,qe={},ke,Ss;function Qv({recordClsStandaloneSpans:t,recordLcpStandaloneSpans:e,client:n}){const r=xr();if(r&&Oe()){r.mark&&$.performance.mark("sentry-tracing-init");const s=e?Jv(n):sy(),i=iy(),o=t?zv(n):ry();return()=>{s?.(),i(),o?.()}}return()=>{}}function ey(){bn("longtask",({entries:t})=>{const e=Ne();if(!e)return;const{op:n,start_timestamp:r}=j(e);for(const s of t){const i=ie(Oe()+s.startTime),o=ie(s.duration);n==="navigation"&&r&&i<r||Pt(e,i,i+o,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[ye]:"auto.ui.browser.metrics"}})}})}function ty(){new PerformanceObserver(e=>{const n=Ne();if(n)for(const r of e.getEntries()){if(!r.scripts[0])continue;const s=ie(Oe()+r.startTime),{start_timestamp:i,op:o}=j(n);if(o==="navigation"&&i&&s<i)continue;const a=ie(r.duration),c={[ye]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:l,invokerType:d,sourceURL:f,sourceFunctionName:p,sourceCharPosition:h}=u;c["browser.script.invoker"]=l,c["browser.script.invoker_type"]=d,f&&(c["code.filepath"]=f),p&&(c["code.function"]=p),h!==-1&&(c["browser.script.source_char_position"]=h),Pt(n,s,s+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function ny(){bn("event",({entries:t})=>{const e=Ne();if(e){for(const n of t)if(n.name==="click"){const r=ie(Oe()+n.startTime),s=ie(n.duration),i={name:Be(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[ye]:"auto.ui.browser.metrics"}},o=Sl(n.target);o&&(i.attributes["ui.component_name"]=o),Pt(e,r,r+s,i)}}})}function ry(){return Cd(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(qe.cls={value:t.value,unit:""},Ss=e)},!0)}function sy(){return Ad(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(qe.lcp={value:t.value,unit:"millisecond"},ke=e)},!0)}function iy(){return Lv(({metric:t})=>{t.entries[t.entries.length-1]&&(qe.ttfb={value:t.value,unit:"millisecond"})})}function oy(t,e){const n=xr(),r=Oe();if(!n?.getEntries||!r)return;const s=ie(r),i=n.getEntries(),{op:o,start_timestamp:a}=j(t);i.slice(Gc).forEach(c=>{const u=ie(c.startTime),l=ie(Math.max(0,c.duration));if(!(o==="navigation"&&a&&s+u<a))switch(c.entryType){case"navigation":{ly(t,c,s);break}case"mark":case"paint":case"measure":{cy(t,c,u,l,s,e.ignorePerformanceApiSpans);const d=Tr(),f=c.startTime<d.firstHiddenTime;c.name==="first-paint"&&f&&(qe.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(qe.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{fy(t,c,c.name,u,l,s,e.ignoreResourceSpans);break}}}),Gc=Math.max(i.length-1,0),hy(t),o==="pageload"&&(my(qe),e.recordClsOnPageloadSpan||delete qe.cls,e.recordLcpOnPageloadSpan||delete qe.lcp,Object.entries(qe).forEach(([c,u])=>{Wg(c,u.value,u.unit)}),t.setAttribute("performance.timeOrigin",s),t.setAttribute("performance.activationStart",An()),gy(t,e)),ke=void 0,Ss=void 0,qe={}}function ay(t){if(t?.entryType==="measure")try{return t.detail.devtools.track==="Components "}catch{return}}function cy(t,e,n,r,s,i){if(ay(e)||["mark","measure"].includes(e.entryType)&&Tt(e.name,i))return;const o=wr(!1),a=ie(o?o.requestStart:0),c=s+Math.max(n,a),u=s+n,l=u+r,d={[ye]:"auto.resource.browser.metrics"};c!==u&&(d["sentry.browser.measure_happened_before_request"]=!0,d["sentry.browser.measure_start_time"]=c),uy(d,e),c<=l&&Pt(t,c,l,{name:e.name,op:e.entryType,attributes:d})}function uy(t,e){try{const n=e.detail;if(!n)return;if(typeof n=="object"){for(const[r,s]of Object.entries(n))if(s&&hn(s))t[`sentry.browser.measure.detail.${r}`]=s;else if(s!==void 0)try{t[`sentry.browser.measure.detail.${r}`]=JSON.stringify(s)}catch{}return}if(hn(n)){t["sentry.browser.measure.detail"]=n;return}try{t["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function ly(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Lr(t,e,r,n)}),Lr(t,e,"secureConnection",n,"TLS/SSL"),Lr(t,e,"fetch",n,"cache"),Lr(t,e,"domainLookup",n,"DNS"),py(t,e,n)}function Lr(t,e,n,r,s=n){const i=dy(n),o=e[i],a=e[`${n}Start`];!a||!o||Pt(t,r+ie(a),r+ie(o),{op:`browser.${s}`,name:e.name,attributes:{[ye]:"auto.ui.browser.metrics",...n==="redirect"&&e.redirectCount!=null?{"http.redirect_count":e.redirectCount}:{}}})}function dy(t){return t==="secureConnection"?"connectEnd":t==="fetch"?"domainLookupStart":`${t}End`}function py(t,e,n){const r=n+ie(e.requestStart),s=n+ie(e.responseEnd),i=n+ie(e.responseStart);e.responseEnd&&(Pt(t,r,s,{op:"browser.request",name:e.name,attributes:{[ye]:"auto.ui.browser.metrics"}}),Pt(t,i,s,{op:"browser.response",name:e.name,attributes:{[ye]:"auto.ui.browser.metrics"}}))}function fy(t,e,n,r,s,i,o){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const a=e.initiatorType?`resource.${e.initiatorType}`:"resource.other";if(o?.includes(a))return;const c={[ye]:"auto.resource.browser.metrics"},u=qt(n);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop()),u.host&&(c["server.address"]=u.host),c["url.same_origin"]=n.includes($.location.origin),_y(e,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const l={...c,...Md(e)},d=i+r,f=d+s;Pt(t,d,f,{name:n.replace($.location.origin,""),op:a,attributes:l})}function hy(t){const e=$.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&t.setAttribute("connectionType",n.type),hi(n.rtt)&&(qe["connection.rtt"]={value:n.rtt,unit:"millisecond"})),hi(e.deviceMemory)&&t.setAttribute("deviceMemory",`${e.deviceMemory} GB`),hi(e.hardwareConcurrency)&&t.setAttribute("hardwareConcurrency",String(e.hardwareConcurrency))}function gy(t,e){ke&&e.recordLcpOnPageloadSpan&&(ke.element&&t.setAttribute("lcp.element",Be(ke.element)),ke.id&&t.setAttribute("lcp.id",ke.id),ke.url&&t.setAttribute("lcp.url",ke.url.trim().slice(0,200)),ke.loadTime!=null&&t.setAttribute("lcp.loadTime",ke.loadTime),ke.renderTime!=null&&t.setAttribute("lcp.renderTime",ke.renderTime),t.setAttribute("lcp.size",ke.size)),Ss?.sources&&e.recordClsOnPageloadSpan&&Ss.sources.forEach((n,r)=>t.setAttribute(`cls.source.${r+1}`,Be(n.node)))}function _y(t,e,n){n.forEach(([r,s])=>{const i=t[r];i!=null&&(typeof i=="number"&&i<Zv||typeof i=="string")&&(e[s]=i)})}function my(t){const e=wr(!1);if(!e)return;const{responseStart:n,requestStart:r}=e;r<=n&&(t["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function vy(){return xr()&&Oe()?bn("element",yy):()=>{}}const yy=({entries:t})=>{const e=Ne(),n=e?Ie(e):void 0,r=n?j(n).description:G().getScopeData().transactionName;t.forEach(s=>{const i=s;if(!i.identifier)return;const o=i.name,a=i.renderTime,c=i.loadTime,[u,l]=c?[ie(c),"load-time"]:a?[ie(a),"render-time"]:[be(),"entry-emission"],d=o==="image-paint"?ie(Math.max(0,(a??0)-(c??0))):0,f={[ye]:"auto.ui.browser.elementtiming",[dt]:"ui.elementtiming",[Ye]:"component","sentry.span_start_time_source":l,"sentry.transaction_name":r,"element.id":i.id,"element.type":i.element?.tagName?.toLowerCase()||"unknown","element.size":i.naturalWidth&&i.naturalHeight?`${i.naturalWidth}x${i.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":i.url||void 0,"element.identifier":i.identifier,"element.paint_type":o};Xg({name:`element[${i.identifier}]`,attributes:f,startTime:u,onlyIfParent:!0},p=>{p.end(u+d)})})},by=1e3;let Vc,so,io;function Ey(t){Ct("dom",t),At("dom",Sy)}function Sy(){if(!$.document)return;const t=He.bind(null,"dom"),e=zc(t,!0);$.document.addEventListener("click",e,!1),$.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{const s=$[n]?.prototype;s?.hasOwnProperty?.("addEventListener")&&($e(s,"addEventListener",function(i){return function(o,a,c){if(o==="click"||o=="keypress")try{const u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},l=u[o]=u[o]||{refCount:0};if(!l.handler){const d=zc(t);l.handler=d,i.call(this,o,d,c)}l.refCount++}catch{}return i.call(this,o,a,c)}}),$e(s,"removeEventListener",function(i){return function(o,a,c){if(o==="click"||o=="keypress")try{const u=this.__sentry_instrumentation_handlers__||{},l=u[o];l&&(l.refCount--,l.refCount<=0&&(i.call(this,o,l.handler,c),l.handler=void 0,delete u[o]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return i.call(this,o,a,c)}}))})}function wy(t){if(t.type!==so)return!1;try{if(!t.target||t.target._sentryId!==io)return!1}catch{}return!0}function Ty(t,e){return t!=="keypress"?!1:e?.tagName?!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable):!0}function zc(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=Iy(n);if(Ty(n.type,r))return;Ce(n,"_sentryCaptured",!0),r&&!r._sentryId&&Ce(r,"_sentryId",Ue());const s=n.type==="keypress"?"input":n.type;wy(n)||(t({event:n,name:s,global:e}),so=n.type,io=r?r._sentryId:void 0),clearTimeout(Vc),Vc=$.setTimeout(()=>{io=void 0,so=void 0},by)}}function Iy(t){try{return t.target}catch{return null}}let Dr;function Vo(t){const e="history";Ct(e,t),At(e,ky)}function ky(){if($.addEventListener("popstate",()=>{const e=$.location.href,n=Dr;if(Dr=e,n===e)return;He("history",{from:n,to:e})}),!Gm())return;function t(e){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const s=Dr,i=xy(String(r));if(Dr=i,s===i)return e.apply(this,n);He("history",{from:s,to:i})}return e.apply(this,n)}}$e($.history,"pushState",t),$e($.history,"replaceState",t)}function xy(t){try{return new URL(t,$.location.origin).toString()}catch{return t}}const Xr={};function Ry(t){const e=Xr[t];if(e)return e;let n=$[t];if(Qi(n))return Xr[t]=n.bind($);const r=$.document;if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const i=s.contentWindow;i?.[t]&&(n=i[t]),r.head.removeChild(s)}catch(s){Er&&y.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,s)}return n&&(Xr[t]=n.bind($))}function Py(t){Xr[t]=void 0}const an="__sentry_xhr_v3__";function Ld(t){Ct("xhr",t),At("xhr",Cy)}function Cy(){if(!$.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,r){const s=new Error,i=be()*1e3,o=it(r[0])?r[0].toUpperCase():void 0,a=Ay(r[1]);if(!o||!a)return e.apply(n,r);n[an]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const u=n[an];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}const l={endTimestamp:be()*1e3,startTimestamp:i,xhr:n,virtualError:s};He("xhr",l)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,l,d){return c(),u.apply(l,d)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,l,d){const[f,p]=d,h=l[an];return h&&it(f)&&it(p)&&(h.request_headers[f.toLowerCase()]=p),u.apply(l,d)}}),e.apply(n,r)}}),t.send=new Proxy(t.send,{apply(e,n,r){const s=n[an];if(!s)return e.apply(n,r);r[0]!==void 0&&(s.body=r[0]);const i={startTimestamp:be()*1e3,xhr:n};return He("xhr",i),e.apply(n,r)}})}function Ay(t){if(it(t))return t;try{return t.toString()}catch{}}function $y(t){let e;try{e=t.getAllResponseHeaders()}catch(n){return Er&&y.error(n,"Failed to get xhr response headers",t),{}}return e?e.split(`\r
`).reduce((n,r)=>{const[s,i]=r.split(": ");return i&&(n[s.toLowerCase()]=i),n},{}):{}}const gi=[],Kr=new Map,en=new Map,Oy=60;function Ny(){if(xr()&&Oe()){const e=Fy();return()=>{e()}}return()=>{}}const oo={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function Fy(){return Dv(My)}const My=({metric:t})=>{if(t.value==null)return;const e=ie(t.value);if(e>Oy)return;const n=t.entries.find(h=>h.duration===t.value&&oo[h.name]);if(!n)return;const{interactionId:r}=n,s=oo[n.name],i=ie(Oe()+n.startTime),o=Ne(),a=o?Ie(o):void 0,c=r!=null?Kr.get(r):void 0,u=c?.span||a,l=u?j(u).description:G().getScopeData().transactionName,d=c?.elementName||Be(n.target),f={[ye]:"auto.http.browser.inp",[dt]:`ui.interaction.${s}`,[Rn]:n.duration},p=Go({name:d,transaction:l,attributes:f,startTime:i});p&&(p.addEvent("inp",{[yr]:"millisecond",[br]:t.value}),p.end(i+e))};function Ly(){const t=Object.keys(oo);nv()&&t.forEach(s=>{$.addEventListener(s,e,{capture:!0,passive:!0})});function e(s){const i=s.target;if(!i)return;const o=Be(i),a=Math.round(s.timeStamp);if(en.set(a,o),en.size>50){const c=en.keys().next().value;c!==void 0&&en.delete(c)}}function n(s){const i=Math.round(s.startTime);let o=en.get(i);if(!o)for(let a=-5;a<=5;a++){const c=en.get(i+a);if(c){o=c;break}}return o||"<unknown>"}const r=({entries:s})=>{const i=Ne(),o=i&&Ie(i);s.forEach(a=>{if(!Wv(a))return;const c=a.interactionId;if(c==null||Kr.has(c))return;const u=a.target?Be(a.target):n(a);if(gi.length>10){const l=gi.shift();Kr.delete(l)}gi.push(c),Kr.set(c,{span:o,elementName:u})})};bn("event",r),bn("first-input",r)}const Dy=40;function Hy(t,e=Ry("fetch")){let n=0,r=0;async function s(i){const o=i.body.length;n+=o,r++;const a={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{const c=await e(t.url,a);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw Py("fetch"),c}finally{n-=o,r--}}return V_(t,s,Do(t.bufferSize||Dy))}const je=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Uy=30,By=50;function ao(t,e,n,r){const s={filename:t,function:e==="<anonymous>"?Vt:e,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const jy=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,qy=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Wy=/\((\S*)(?::(\d+))(?::(\d+))\)/,Gy=/at (.+?) ?\(data:(.+?),/,Vy=t=>{const e=t.match(Gy);if(e)return{filename:`<data:${e[2]}>`,function:e[1]};const n=jy.exec(t);if(n){const[,s,i,o]=n;return ao(s,Vt,+i,+o)}const r=qy.exec(t);if(r){if(r[2]&&r[2].indexOf("eval")===0){const a=Wy.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}const[i,o]=Dd(r[1]||Vt,r[2]);return ao(o,i,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},zy=[Uy,Vy],Yy=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Jy=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Xy=t=>{const e=Yy.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const i=Jy.exec(e[3]);i&&(e[1]=e[1]||"eval",e[3]=i[1],e[4]=i[2],e[5]="")}let r=e[3],s=e[1]||Vt;return[s,r]=Dd(s,r),ao(r,s,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},Ky=[By,Xy],Zy=[zy,Ky],Qy=gl(...Zy),Dd=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:Vt,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},Hr=1024,eb="Breadcrumbs",tb=((t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:eb,setup(n){e.console&&xm(ib(n)),e.dom&&Ey(sb(n,e.dom)),e.xhr&&Ld(ob(n)),e.fetch&&md(ab(n)),e.history&&Vo(cb(n)),e.sentry&&n.on("beforeSendEvent",rb(n))}}}),nb=tb;function rb(t){return function(n){V()===t&&zt({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Ht(n)},{event:n})}}function sb(t,e){return function(r){if(V()!==t)return;let s,i,o=typeof e=="object"?e.serializeAttribute:void 0,a=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;a&&a>Hr&&(je&&y.warn(`\`dom.maxStringLength\` cannot exceed ${Hr}, but a value of ${a} was configured. Sentry will use ${Hr} instead.`),a=Hr),typeof o=="string"&&(o=[o]);try{const u=r.event,l=ub(u)?u.target:u;s=Be(l,{keyAttrs:o,maxStringLength:a}),i=Sl(l)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${r.name}`,message:s};i&&(c.data={"ui.component_name":i}),zt(c,{event:r.event,name:r.name,global:r.global})}}function ib(t){return function(n){if(V()!==t)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:Pm(n.level),message:sc(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${sc(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;zt(r,{input:n.args,level:n.level})}}function ob(t){return function(n){if(V()!==t)return;const{startTimestamp:r,endTimestamp:s}=n,i=n.xhr[an];if(!r||!s||!i)return;const{method:o,url:a,status_code:c,body:u}=i,l={method:o,url:a,status_code:c},d={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:s},f={category:"xhr",data:l,type:"http",level:_d(c)};t.emit("beforeOutgoingRequestBreadcrumb",f,d),zt(f,d)}}function ab(t){return function(n){if(V()!==t)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const i=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s},a={category:"fetch",data:i,level:"error",type:"http"};t.emit("beforeOutgoingRequestBreadcrumb",a,o),zt(a,o)}else{const i=n.response,o={...n.fetchData,status_code:i?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,i?.status;const a={input:n.args,response:i,startTimestamp:r,endTimestamp:s},c={category:"fetch",data:o,type:"http",level:_d(o.status_code)};t.emit("beforeOutgoingRequestBreadcrumb",c,a),zt(c,a)}}}function cb(t){return function(n){if(V()!==t)return;let r=n.from,s=n.to;const i=qt(D.location.href);let o=r?qt(r):void 0;const a=qt(s);o?.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(s=a.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),zt({category:"navigation",data:{from:r,to:s}})}}function ub(t){return!!t&&!!t.target}const lb=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],db="BrowserApiErrors",pb=((t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...t};return{name:db,setupOnce(){e.setTimeout&&$e(D,"setTimeout",Yc),e.setInterval&&$e(D,"setInterval",Yc),e.requestAnimationFrame&&$e(D,"requestAnimationFrame",hb),e.XMLHttpRequest&&"XMLHttpRequest"in D&&$e(XMLHttpRequest.prototype,"send",gb);const n=e.eventTarget;n&&(Array.isArray(n)?n:lb).forEach(s=>_b(s,e))}}}),fb=pb;function Yc(t){return function(...e){const n=e[0];return e[0]=yn(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${ct(t)}`}}),t.apply(this,e)}}function hb(t){return function(e){return t.apply(this,[yn(e,{mechanism:{data:{handler:ct(t)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function gb(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&$e(n,s,function(i){const o={mechanism:{data:{handler:ct(i)},handled:!1,type:`auto.browser.browserapierrors.xhr.${s}`}},a=xo(i);return a&&(o.mechanism.data.handler=ct(a)),yn(i,o)})}),t.apply(this,e)}}function _b(t,e){const r=D[t]?.prototype;r?.hasOwnProperty?.("addEventListener")&&($e(r,"addEventListener",function(s){return function(i,o,a){try{mb(o)&&(o.handleEvent=yn(o.handleEvent,{mechanism:{data:{handler:ct(o),target:t},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return e.unregisterOriginalCallbacks&&vb(this,i,o),s.apply(this,[i,yn(o,{mechanism:{data:{handler:ct(o),target:t},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),a])}}),$e(r,"removeEventListener",function(s){return function(i,o,a){try{const c=o.__sentry_wrapped__;c&&s.call(this,i,c,a)}catch{}return s.call(this,i,o,a)}}))}function mb(t){return typeof t.handleEvent=="function"}function vb(t,e,n){t&&typeof t=="object"&&"removeEventListener"in t&&typeof t.removeEventListener=="function"&&t.removeEventListener(e,n)}const yb=()=>({name:"BrowserSession",setupOnce(){if(typeof D.document>"u"){je&&y.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Ic({ignoreDuration:!0}),kc(),Vo(({from:t,to:e})=>{t!==void 0&&t!==e&&(Ic({ignoreDuration:!0}),kc())})}}),bb="GlobalHandlers",Eb=((t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:bb,setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(wb(n),Jc("onerror")),e.onunhandledrejection&&(Tb(n),Jc("onunhandledrejection"))}}}),Sb=Eb;function wb(t){ml(e=>{const{stackParser:n,attachStacktrace:r}=Hd();if(V()!==t||yd())return;const{msg:s,url:i,line:o,column:a,error:c}=e,u=xb(jo(n,c||s,void 0,r,!1),i,o,a);u.level="error",Xl(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function Tb(t){vl(e=>{const{stackParser:n,attachStacktrace:r}=Hd();if(V()!==t||yd())return;const s=Ib(e),i=hn(s)?kb(s):jo(n,s,void 0,r,!0);i.level="error",Xl(i,{originalException:s,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function Ib(t){if(hn(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}function kb(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function xb(t,e,n,r){const s=t.exception=t.exception||{},i=s.values=s.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],u=r,l=n,d=Rb(e)??gr();return c.length===0&&c.push({colno:u,filename:d,function:Vt,in_app:!0,lineno:l}),t}function Jc(t){je&&y.log(`Global Handler attached: ${t}`)}function Hd(){return V()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function Rb(t){if(!(!it(t)||t.length===0))return t.startsWith("data:")?`<${It(t,!1)}>`:t}const Pb=()=>({name:"HttpContext",preprocessEvent(t){if(!D.navigator&&!D.location&&!D.document)return;const e=Ho(),n={...e.headers,...t.request?.headers};t.request={...e,...t.request,headers:n}}}),Cb="cause",Ab=5,$b="LinkedErrors",Ob=((t={})=>{const e=t.limit||Ab,n=t.key||Cb;return{name:$b,preprocessEvent(r,s,i){const o=i.getOptions();km(Uo,o.stackParser,n,e,r,s)}}}),Nb=Ob;function Fb(){return Mb()?(je&&Tn(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function Mb(){if(typeof D.window>"u")return!1;const t=D;if(t.nw||!(t.chrome||t.browser)?.runtime?.id)return!1;const n=gr(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(D===D.top&&r.some(i=>n.startsWith(`${i}://`)))}function Lb(t){return[vm(),hm(),Dm(),fb(),nb(),Sb(),Nb(),$m(),Pb(),yb()]}function Db(t={}){const e=!t.skipBrowserExtensionCheck&&Fb();let n=t.defaultIntegrations==null?Lb():t.defaultIntegrations;const r={...t,enabled:e?!1:t.enabled,stackParser:vh(t.stackParser||Qy),integrations:O_({integrations:t.integrations,defaultIntegrations:n}),transport:t.transport||Hy};return rm(_v,r)}function Hb(t){return t.split(",").some(e=>e.trim().startsWith("sentry-"))}function Ud(t){try{return new URL(t,D.location.origin).href}catch{return}}function Ub(t){return t.entryType==="resource"&&"initiatorType"in t&&typeof t.nextHopProtocol=="string"&&(t.initiatorType==="fetch"||t.initiatorType==="xmlhttprequest")}function Bd(t){try{return new Headers(t)}catch{return}}const Xc=new WeakMap,_i=new Map,jd={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Bb(t,e){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:i,enableHTTPTimings:o,tracePropagationTargets:a,onRequestSpanStart:c,onRequestSpanEnd:u}={...jd,...e},l=typeof i=="function"?i:h=>!0,d=h=>jb(h,a),f={},p=t.getOptions().propagateTraceparent;n&&(t.addEventProcessor(h=>(h.type==="transaction"&&h.spans&&h.spans.forEach(g=>{if(g.op==="http.client"){const m=_i.get(g.span_id);m&&(g.timestamp=m/1e3,_i.delete(g.span_id))}}),h)),s&&Ym(h=>{if(h.response){const g=Xc.get(h.response);g&&h.endTimestamp&&_i.set(g,h.endTimestamp)}}),md(h=>{const g=Hm(h,l,d,f,{propagateTraceparent:p,onRequestSpanEnd:u});if(h.response&&h.fetchData.__span&&Xc.set(h.response,h.fetchData.__span),g){const m=Ud(h.fetchData.url),v=m?qt(m).host:void 0;g.setAttributes({"http.url":m?It(m):void 0,"server.address":v}),o&&Kc(g),c?.(g,{headers:h.headers})}})),r&&Ld(h=>{const g=qb(h,l,d,f,p,u);g&&(o&&Kc(g),c?.(g,{headers:Bd(h.xhr.__sentry_xhr_v3__?.request_headers)}))})}function Kc(t){const{url:e}=j(t).data;if(!e||typeof e!="string")return;const n=bn("resource",({entries:r})=>{r.forEach(s=>{Ub(s)&&s.name.endsWith(e)&&(t.setAttributes(Md(s)),setTimeout(n))})})}function jb(t,e){const n=gr();if(n){let r,s;try{r=new URL(t,n),s=new URL(n).origin}catch{return!1}const i=r.origin===s;return e?Tt(r.toString(),e)||i&&Tt(r.pathname,e):i}else{const r=!!t.match(/^\/(?!\/)/);return e?Tt(t,e):r}}function qb(t,e,n,r,s,i){const o=t.xhr,a=o?.[an];if(!o||o.__sentry_own_request__||!a)return;const{url:c,method:u}=a,l=We()&&e(c);if(t.endTimestamp&&l){const v=o.__sentry_xhr_span_id__;if(!v)return;const T=r[v];T&&a.status_code!==void 0&&(Rl(T,a.status_code),T.end(),i?.(T,{headers:Bd($y(o)),error:t.error}),delete r[v]);return}const d=Ud(c),f=qt(d||c),p=It(am(c)),h=!!Ne(),g=l&&h?Cn({name:`${u} ${p}`,attributes:{url:It(c),type:"xhr","http.method":u,"http.url":d?It(d):void 0,"server.address":f?.host,[ye]:"auto.http.browser",[dt]:"http.client",...f?.search&&{"http.query":f?.search},...f?.hash&&{"http.fragment":f?.hash}}}):new Rt;o.__sentry_xhr_span_id__=g.spanContext().spanId,r[o.__sentry_xhr_span_id__]=g,n(c)&&Wb(o,We()&&h?g:void 0,s);const m=V();return m&&m.emit("beforeOutgoingRequestSpan",g,t),g}function Wb(t,e,n){const{"sentry-trace":r,baggage:s,traceparent:i}=fd({span:e,propagateTraceparent:n});r&&Gb(t,r,s,i)}function Gb(t,e,n,r){const s=t.__sentry_xhr_v3__?.request_headers;if(!(s?.["sentry-trace"]||!t.setRequestHeader))try{if(t.setRequestHeader("sentry-trace",e),r&&!s?.traceparent&&t.setRequestHeader("traceparent",r),n){const i=s?.baggage;(!i||!Hb(i))&&t.setRequestHeader("baggage",n)}}catch{}}function Vb(){D.document?D.document.addEventListener("visibilitychange",()=>{const t=Ne();if(!t)return;const e=Ie(t);if(D.document.hidden&&e){const n="cancelled",{op:r,status:s}=j(e);je&&y.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),s||e.setStatus({code:_e,message:n}),e.setAttribute("sentry.cancellation_reason","document.hidden"),e.end()}}):je&&y.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const zb=3600,qd="sentry_previous_trace",Yb="sentry.previous_trace";function Jb(t,{linkPreviousTrace:e,consistentTraceSampling:n}){const r=e==="session-storage";let s=r?Zb():void 0;t.on("spanStart",o=>{if(Ie(o)!==o)return;const a=G().getPropagationContext();s=Xb(s,o,a),r&&Kb(s)});let i=!0;n&&t.on("beforeSampling",o=>{if(!s)return;const a=G(),c=a.getPropagationContext();if(i&&c.parentSpanId){i=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(s.sampleRate),sampled:String(co(s.spanContext))},sampleRand:s.sampleRand}),o.parentSampled=co(s.spanContext),o.parentSampleRate=s.sampleRate,o.spanAttributes={...o.spanAttributes,[xl]:s.sampleRate}})}function Xb(t,e,n){const r=j(e);function s(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[Ro])}catch{return 0}}const i={spanContext:e.spanContext(),startTimestamp:r.start_timestamp,sampleRate:s(),sampleRand:n.sampleRand};if(!t)return i;const o=t.spanContext;return o.traceId===r.trace_id?t:(Date.now()/1e3-t.startTimestamp<=zb&&(je&&y.log(`Adding previous_trace \`${JSON.stringify(o)}\` link to span \`${JSON.stringify({op:r.op,...e.spanContext()})}\``),e.addLink({context:o,attributes:{[Vh]:"previous_trace"}}),e.setAttribute(Yb,`${o.traceId}-${o.spanId}-${co(o)?1:0}`)),i)}function Kb(t){try{D.sessionStorage.setItem(qd,JSON.stringify(t))}catch(e){je&&y.warn("Could not store previous trace in sessionStorage",e)}}function Zb(){try{const t=D.sessionStorage?.getItem(qd);return JSON.parse(t)}catch{return}}function co(t){return t.traceFlags===1}const Qb="BrowserTracing",eE={...Vr,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...jd},yE=((t={})=>{const e={name:void 0,source:void 0},n=D.document,{enableInp:r,enableElementTiming:s,enableLongTask:i,enableLongAnimationFrame:o,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:l,idleTimeout:d,finalTimeout:f,childSpanTimeout:p,markBackgroundSpan:h,traceFetch:g,traceXHR:m,trackFetchStreamPerformance:v,shouldCreateSpanForRequest:T,enableHTTPTimings:F,ignoreResourceSpans:O,ignorePerformanceApiSpans:I,instrumentPageLoad:ge,instrumentNavigation:C,detectRedirects:R,linkPreviousTrace:de,consistentTraceSampling:ae,enableReportPageLoaded:Z,onRequestSpanStart:ce,onRequestSpanEnd:re}={...eE,...t};let U,ue,pe;function fe(N,q,A=!0){const X=q.op==="pageload",H=q.name,z=l?l(q):q,te=z.attributes||{};if(H!==z.name&&(te[Ye]="custom",z.attributes=te),!A){const Ot=Jt();Cn({...z,startTime:Ot}).end(Ot);return}e.name=z.name,e.source=te[Ye];const P=Jl(z,{idleTimeout:d,finalTimeout:f,childSpanTimeout:p,disableAutoFinish:X,beforeSpanEnd:Ot=>{U?.(),oy(Ot,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:O,ignorePerformanceApiSpans:I}),Qc(N,void 0);const Rr=G(),Ms=Rr.getPropagationContext();Rr.setPropagationContext({...Ms,traceId:P.spanContext().traceId,sampled:$t(P),dsc:xt(Ot)}),X&&(pe=void 0)},trimIdleSpanEndTimestamp:!Z});X&&Z&&(pe=P),Qc(N,P);function se(){n&&["interactive","complete"].includes(n.readyState)&&N.emit("idleSpanEnableAutoFinish",P)}X&&!Z&&n&&(n.addEventListener("readystatechange",()=>{se()}),se())}return{name:Qb,setup(N){if(Sg(),U=Qv({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:N}),r&&Ny(),s&&vy(),o&&L.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?ty():i&&ey(),a&&ny(),R&&n){const A=()=>{ue=be()};addEventListener("click",A,{capture:!0}),addEventListener("keydown",A,{capture:!0,passive:!0})}function q(){const A=dr(N);A&&!j(A).timestamp&&(je&&y.log(`[Tracing] Finishing current active span with op: ${j(A).op}`),A.setAttribute(ar,"cancelled"),A.end())}N.on("startNavigationSpan",(A,X)=>{if(V()!==N)return;if(X?.isRedirect){je&&y.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),fe(N,{op:"navigation.redirect",...A},!1);return}ue=void 0,q(),pt().setPropagationContext({traceId:lt(),sampleRand:Math.random(),propagationSpanId:We()?void 0:ot()});const H=G();H.setPropagationContext({traceId:lt(),sampleRand:Math.random(),propagationSpanId:We()?void 0:ot()}),H.setSDKProcessingMetadata({normalizedRequest:void 0}),fe(N,{op:"navigation",...A,parentSpan:null,forceTransaction:!0})}),N.on("startPageLoadSpan",(A,X={})=>{if(V()!==N)return;q();const H=X.sentryTrace||Zc("sentry-trace"),z=X.baggage||Zc("baggage"),te=fg(H,z),P=G();P.setPropagationContext(te),We()||(P.getPropagationContext().propagationSpanId=ot()),P.setSDKProcessingMetadata({normalizedRequest:Ho()}),fe(N,{op:"pageload",...A})}),N.on("endPageloadSpan",()=>{Z&&pe&&(pe.setAttribute(ar,"reportPageLoaded"),pe.end())})},afterAllSetup(N){let q=gr();if(de!=="off"&&Jb(N,{linkPreviousTrace:de,consistentTraceSampling:ae}),D.location){if(ge){const A=Oe();tE(N,{name:D.location.pathname,startTime:A?A/1e3:void 0,attributes:{[Ye]:"url",[ye]:"auto.pageload.browser"}})}C&&Vo(({to:A,from:X})=>{if(X===void 0&&q?.indexOf(A)!==-1){q=void 0;return}q=void 0;const H=dd(A),z=dr(N),te=z&&R&&sE(z,ue);nE(N,{name:H?.pathname||D.location.pathname,attributes:{[Ye]:"url",[ye]:"auto.navigation.browser"}},{url:A,isRedirect:te})})}h&&Vb(),a&&rE(N,d,f,p,e),r&&Ly(),Bb(N,{traceFetch:g,traceXHR:m,trackFetchStreamPerformance:v,tracePropagationTargets:N.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:T,enableHTTPTimings:F,onRequestSpanStart:ce,onRequestSpanEnd:re})}}});function tE(t,e,n){t.emit("startPageLoadSpan",e,n),G().setTransactionName(e.name);const r=dr(t);return r&&t.emit("afterStartPageLoadSpan",r),r}function nE(t,e,n){const{url:r,isRedirect:s}=n||{};t.emit("beforeStartNavigationSpan",e,{isRedirect:s}),t.emit("startNavigationSpan",e,{isRedirect:s});const i=G();return i.setTransactionName(e.name),r&&!s&&i.setSDKProcessingMetadata({normalizedRequest:{...Ho(),url:r}}),dr(t)}function Zc(t){return D.document?.querySelector(`meta[name=${t}]`)?.getAttribute("content")||void 0}function rE(t,e,n,r,s){const i=D.document;let o;const a=()=>{const c="ui.action.click",u=dr(t);if(u){const l=j(u).op;if(["navigation","pageload"].includes(l)){je&&y.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(o&&(o.setAttribute(ar,"interactionInterrupted"),o.end(),o=void 0),!s.name){je&&y.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}o=Jl({name:s.name,op:c,attributes:{[Ye]:s.source||"url"}},{idleTimeout:e,finalTimeout:n,childSpanTimeout:r})};i&&addEventListener("click",a,{capture:!0})}const Wd="_sentry_idleSpan";function dr(t){return t[Wd]}function Qc(t,e){Ce(t,Wd,e)}const eu=1.5;function sE(t,e){const n=j(t),r=Jt(),s=n.start_timestamp;return!(r-s>eu||e&&r-e<=eu)}function bE(t){const e={...t};return pd(e,"react"),I_("react",{version:J.version}),Db(e)}var iE=Object.defineProperty,ws=Object.getOwnPropertySymbols,Gd=Object.prototype.hasOwnProperty,Vd=Object.prototype.propertyIsEnumerable,tu=(t,e,n)=>e in t?iE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yt=(t,e)=>{for(var n in e||(e={}))Gd.call(e,n)&&tu(t,n,e[n]);if(ws)for(var n of ws(e))Vd.call(e,n)&&tu(t,n,e[n]);return t},oE=(t,e)=>{var n={};for(var r in t)Gd.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ws)for(var r of ws(t))e.indexOf(r)<0&&Vd.call(t,r)&&(n[r]=t[r]);return n},Kn=(t,e)=>{let n="[react-use-intercom]";switch(t){case"info":console.log(`${n} ${e}`);break;case"warn":console.warn(`${n} ${e}`);break;case"error":console.error(`${n} ${e}`);break;default:console.log(`${n} ${e}`)}},uo=typeof window>"u",zd=t=>(Object.keys(t).forEach(e=>{t[e]&&typeof t[e]=="object"?zd(t[e]):t[e]===void 0&&delete t[e]}),t),aE=(t,...e)=>{if(!uo&&window.Intercom)return window.Intercom.apply(null,[t,...e]);Kn("error",`${t} Intercom instance is not initalized yet`)},Q=aE,cE=J.createContext(void 0),uE=cE,lE=(t,e=0,n)=>{var r=window,s=r.Intercom;if(typeof s=="function")s("reattach_activator"),s("update",r.intercomSettings);else{var i=document,o=function(){o.c(arguments)};o.q=[],o.c=function(c){o.q.push(c)},r.Intercom=o;var a=function(){setTimeout(function(){var c=i.createElement("script");c.type="text/javascript",c.async=!0,n&&c.setAttribute("nonce",n),c.src="https://widget.intercom.io/widget/"+t;var u=i.getElementsByTagName("script")[0];u.parentNode.insertBefore(c,u)},e)};document.readyState==="complete"?a():r.attachEvent?r.attachEvent("onload",a):r.addEventListener("load",a,!1)}},dE=lE,pE=t=>({custom_launcher_selector:t.customLauncherSelector,alignment:t.alignment,vertical_padding:t.verticalPadding,horizontal_padding:t.horizontalPadding,z_index:t.zIndex,hide_default_launcher:t.hideDefaultLauncher,session_duration:t.sessionDuration,action_color:t.actionColor,background_color:t.backgroundColor}),nu=t=>yt({company_id:t.companyId,name:t.name,created_at:t.createdAt,plan:t.plan,monthly_spend:t.monthlySpend,user_count:t.userCount,size:t.size,website:t.website,industry:t.industry},t.customAttributes),fE=t=>({type:t.type,image_url:t.imageUrl}),hE=t=>{var e;return yt({email:t.email,user_id:t.userId,created_at:t.createdAt,name:t.name,phone:t.phone,last_request_at:t.lastRequestAt,unsubscribed_from_emails:t.unsubscribedFromEmails,language_override:t.languageOverride,utm_campaign:t.utmCampaign,utm_content:t.utmContent,utm_medium:t.utmMedium,utm_source:t.utmSource,utm_term:t.utmTerm,avatar:t.avatar&&fE(t.avatar),user_hash:t.userHash,company:t.company&&nu(t.company),companies:(e=t.companies)==null?void 0:e.map(nu),intercom_user_jwt:t.intercomUserJwt},t.customAttributes)},ru=t=>zd(yt(yt({},pE(t)),hE(t))),EE=t=>{var e=t,{appId:n,autoBoot:r=!1,autoBootProps:s,children:i,onHide:o,onShow:a,onUnreadCountChange:c,onUserEmailSupplied:u,shouldInitialize:l=!uo,apiBase:d,initializeDelay:f,cspNonce:p}=e,h=oE(e,["appId","autoBoot","autoBootProps","children","onHide","onShow","onUnreadCountChange","onUserEmailSupplied","shouldInitialize","apiBase","initializeDelay","cspNonce"]);let g=J.useRef(!1),m=J.useRef(!1),[v,T]=J.useState(!1),F=Object.keys(h).filter(P=>!P.startsWith("data-"));F.length>0&&Kn("warn",["some invalid props were passed to IntercomProvider. ",`Please check following props: ${F.join(", ")}.`].join(""));let O=J.useCallback(P=>{if(!window.Intercom&&!l){Kn("warn","Intercom instance is not initialized because `shouldInitialize` is set to `false` in `IntercomProvider`");return}if(g.current)return;Q("onHide",()=>{T(!1),o?.()}),Q("onShow",()=>{T(!0),a?.()}),Q("onUserEmailSupplied",u),c&&Q("onUnreadCountChange",c);let se=yt(yt({app_id:n},d&&{api_base:d}),P&&ru(P));window.intercomSettings=se,Q("boot",se),g.current=!0},[d,n,o,a,c,u,l]);!uo&&l&&!m.current&&(dE(n,f,p),r&&O(s),m.current=!0);let I=J.useCallback((P,se)=>{if(!window.Intercom&&!l){Kn("warn","Intercom instance is not initialized because `shouldInitialize` is set to `false` in `IntercomProvider`");return}if(!g.current){Kn("warn",[`"${P}" was called but Intercom has not booted yet. `,`Please call 'boot' before calling '${P}' or `,"set 'autoBoot' to true in the IntercomProvider."].join(""));return}return se()},[l]),ge=J.useCallback(()=>{g.current&&(Q("shutdown"),delete window.intercomSettings,g.current=!1)},[]),C=J.useCallback(()=>{g.current&&(Q("shutdown"),delete window.Intercom,delete window.intercomSettings,g.current=!1)},[]),R=J.useCallback(()=>{I("update",()=>{let P=Math.floor(new Date().getTime()/1e3);Q("update",{last_request_at:P})})},[I]),de=J.useCallback(P=>{I("update",()=>{if(!P){R();return}let se=ru(P);window.intercomSettings=yt(yt({},window.intercomSettings),se),Q("update",se)})},[I,R]),ae=J.useCallback(()=>{I("hide",()=>{Q("hide")})},[I]),Z=J.useCallback(()=>{I("show",()=>Q("show"))},[I]),ce=J.useCallback(()=>{I("showMessages",()=>{Q("showMessages")})},[I]),re=J.useCallback(P=>{I("showNewMessage",()=>{P?Q("showNewMessage",P):Q("showNewMessage")})},[I]),U=J.useCallback(()=>I("getVisitorId",()=>Q("getVisitorId")),[I]),ue=J.useCallback(P=>{I("startTour",()=>{Q("startTour",P)})},[I]),pe=J.useCallback(P=>{I("startChecklist",()=>{Q("startChecklist",P)})},[I]),fe=J.useCallback((P,se)=>{I("trackEvent",()=>{se?Q("trackEvent",P,se):Q("trackEvent",P)})},[I]),N=J.useCallback(P=>I("showArticle",()=>{Q("showArticle",P)}),[I]),q=J.useCallback(P=>I("showSpace",()=>{Q("showSpace",P)}),[I]),A=J.useCallback(P=>{I("startSurvey",()=>{Q("startSurvey",P)})},[I]),X=J.useCallback(P=>I("showNews",()=>{Q("showNews",P)}),[I]),H=J.useCallback(P=>I("showTicket",()=>{Q("showTicket",P)}),[I]),z=J.useCallback(P=>I("showConversation",()=>{Q("showConversation",P)}),[I]),te=J.useMemo(()=>({boot:O,shutdown:ge,hardShutdown:C,update:de,hide:ae,show:Z,isOpen:v,showMessages:ce,showNewMessage:re,getVisitorId:U,startTour:ue,startChecklist:pe,trackEvent:fe,showArticle:N,startSurvey:A,showSpace:q,showNews:X,showTicket:H,showConversation:z}),[O,ge,C,de,ae,Z,v,ce,re,U,ue,pe,fe,N,A,q,X,H,z]);return J.createElement(uE.Provider,{value:te},i)};export{mE as J,zt as a,vE as b,T_ as c,yE as d,bE as i,EE as p};
//# sourceMappingURL=tracking-EoFUaJF0.js.map
